define((()=>(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{init:()=>R});var o={};e.r(o),e.d(o,{canAddDocument:()=>v,createFolder:()=>x,createShortcut:()=>F,deleteDocument:()=>I,duplicateDocument:()=>$,getBreadCrumbs:()=>h,getDocumentItems:()=>f,getFileVersions:()=>b,getFullTreeData:()=>w,getNewName:()=>D,moveDocument:()=>y,renameDocument:()=>S,restoreVersion:()=>C,saveVisibility:()=>g,undoDeleteDocument:()=>P,updateDescription:()=>E,updateVersionSummary:()=>X});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-list-item",{staticClass:"clickable",on:{click:function(t){return e.openPreview()}}},[o("v-list-item-icon",{staticClass:"me-3 my-auto"},[o("v-icon",{attrs:{size:"25",color:e.iconColor}},[e._v("\n      "+e._s(e.iconClass)+"\n    ")])],1),e._v(" "),o("v-list-item-content",[o("v-list-item-title",{staticClass:"text-color body-2"},[e._v(e._s(e.documentTitle))])],1),e._v(" "),o("v-list-item-action",[o("favorite-button",{attrs:{id:e.id,favorite:e.isFavorite,top:e.top,right:e.right,type:"file","type-label":"Documents"},on:{removed:e.removed,"remove-error":e.removeError}})],1)],1)};n._withStripped=!0;var r=function(e,t,o,n,r,i,a,s){var c,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=[],d._compiled=!0),c)if(d.functional){d._injectStyles=c;var l=d.render;d.render=function(e,t){return c.call(t),l(e,t)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,c):[c]}return{exports:e,options:d}}({props:{id:{type:String,default:()=>null}},data:()=>({documentTitle:"",file:{},documentPreviewInit:{},dateFormat:{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},iconColor:"#476A9C",iconClass:"fas fa-file",isFavorite:!0}),created(){this.$attachmentService.getAttachmentById(this.id).then((e=>{this.file=e,this.getFileIcon(this.file?.mimetype),this.documentTitle=decodeURI(decodeURI(e.title));const t=e&&e.updater&&e.updater.profile&&e.updater.profile.fullname||"",o=new Date(e.updated),n=this.$dateUtil.formatDateObjectToDisplay(o,this.dateFormat),r=`${this.$t("documents.preview.updatedOn")} ${n} ${this.$t("documents.preview.updatedBy")} ${t} ${e.size}`;this.documentPreviewInit={doc:{id:e.id,repository:"repository",workspace:"collaboration",title:e.title,downloadUrl:e.downloadUrl,openUrl:e.openUrl,breadCrumb:e.previewBreadcrumb,fileInfo:r,size:e.size,isCloudDrive:e.cloudDrive},author:e.updater,version:{number:e.version&&Number(e.version)||0},showComments:!1,showOpenInFolderButton:!1}}))},methods:{getFileIcon(e){const t=extensionRegistry.loadExtensions("documents","documents-icons-extension");let o=t[0].get(e);o||(o=t[0].get("file")),this.iconColor=o.color,this.iconClass=o.class},openPreview(){documentPreview.init(this.documentPreviewInit),this.$root.$emit("close-favorite-drawer")},removed(){this.isFavorite=!this.isFavorite,this.displayAlert(this.$t("Favorite.tooltip.SuccessfullyDeletedFavorite",{0:this.$t("file.label")})),this.$emit("removed"),this.$root.$emit("refresh-favorite-list")},removeError(){this.displayAlert(this.$t("Favorite.tooltip.ErrorDeletingFavorite",{0:this.$t("file.label")}),"error")},displayAlert(e,t){document.dispatchEvent(new CustomEvent("attachments-notification-alert",{detail:{messageObject:{message:e,type:t||"success"}}}))}}},n);r.options.__file="src/main/webapp/vue-app/documents-extensions/components/DocumentsFavoriteItem.vue";const i={"documents-favorite-item":r.exports};for(const e in i)Vue.component(e,i[e]);const a={class:"fas fa-file-powerpoint",color:"#CB4B32"},s={class:"fas fa-file-excel",color:"#217345"},c={class:"fas fa-file-word",color:"#2A5699"},d={class:"fas fa-file-image",color:"#999999"},l={class:"fas fa-file-video",color:"#79577A"},p={class:"fas fa-file-archive",color:"#717272"},m={class:"fas fa-file-code",color:"#6cf500"},u=new Map([["application/pdf",{class:"fas fa-file-pdf",color:"#FF0000"}],["application/vnd.ms-powerpoint",a],["application/vnd.openxmlformats-officedocument.presentationml.presentation",a],["application/vnd.oasis.opendocument.presentation",a],["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",s],["application/vnd.oasis.opendocument.spreadsheet",s],["officedocument.spreadsheetml.sheet",s],["application/vnd.ms-excel",s],["text/csv",s],["application/vnd.openxmlformats-officedocument.wordprocessingml.document",c],["application/msword",c],["application/rtf",c],["application/vnd.oasis.opendocument.text",c],["text/plain",{class:"fas fa-file-alt",color:"#385989"}],["image/webp",d],["image/avif",d],["image/bmp",d],["image/gif",d],["image/jpeg",d],["image/png",d],["image/tiff",d],["video/x-msvideo",l],["video/mp4",l],["video/mpeg",l],["video/ogg",l],["video/webm",l],["video/3gpp",l],["application/zip",p],["application/vnd.rar",p],["application/postscript",{class:"fas fa-file-contract",color:"#E79E24"}],["text/html",m],["text/xml",m],["application/xml",m],["text/css",m],["file",{class:"fas fa-file",color:"#476A9C"}],["folder",{class:"fas fa-folder",color:"#476A9C"}]]);function f(e,t,o,n){const r=new FormData;e&&Object.keys(e).forEach((t=>{const o=e[t];o&&r.append(t,o)})),n&&r.append("expand",n),t&&r.append("offset",t),o&&r.append("limit",o);const i=new URLSearchParams(r).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents?${i}`,{method:"GET",credentials:"include"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Response code indicates a server error",e)}))}function v(e){return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/canAddDocument?spaceId=${e}`,{headers:{"Content-Type":"text/plain"},method:"GET"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Server indicates an error while sending request")}))}function h(e,t,o){const n=new FormData;e&&n.append("folderId",e),o&&n.append("folderPath",o),t&&n.append("ownerId",t);const r=new URLSearchParams(n).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/breadcrumb?${r}`,{method:"GET",credentials:"include"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Response code indicates a server error",e)}))}function w(e,t){const o=new FormData;t&&o.append("folderId",t),e&&o.append("ownerId",e);const n=new URLSearchParams(o).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/fullTree?${n}`,{method:"GET",credentials:"include"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Response code indicates a server error",e)}))}function $(e,t,o){const n=new FormData;e&&n.append("fileId",e),t&&n.append("ownerId",t),o&&n.append("prefixClone",o);const r=new URLSearchParams(n).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/duplicate?${r}`,{method:"post",credentials:"include"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Response code indicates a server error",e)}))}function g(e){const t={id:e.id,path:e.path,ownerId:e.ownerId,creatorId:e.creatorId,acl:e.acl};return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/permissions`,{method:"post",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{if(e&&e.ok)return e.ok;throw new Error("Response code indicates a server error",e)}))}function S(e,t,o){const n=new FormData;e&&n.append("ownerId",e),t&&n.append("documentID",t),o&&n.append("newName",o);const r=new URLSearchParams(n).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/rename?${r}`,{credentials:"include",method:"PUT"}).then((e=>{if(e&&e.ok)return e.ok;throw e}))}function y(e,t,o,n){const r=new FormData;e&&r.append("ownerId",e),t&&r.append("documentID",t),o&&r.append("destPath",o),n&&r.append("conflictAction",n);const i=new URLSearchParams(r).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/move?${i}`,{credentials:"include",method:"PUT"}).then((e=>{if(e&&e.ok)return e.ok;throw e}))}function x(e,t,o,n){const r=new FormData;e&&r.append("ownerId",e),t&&r.append("parentid",t),o&&r.append("folderPath",o),n&&r.append("name",n);const i=new URLSearchParams(r).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/folder?${i}`,{credentials:"include",method:"POST"}).then((e=>{if(e&&e.ok)return e.json();throw e}))}function D(e,t,o,n){const r=new FormData;e&&r.append("ownerId",e),t&&r.append("parentid",t),o&&r.append("folderPath",o),n&&r.append("name",n);const i=new URLSearchParams(r).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/newname?${i}`,{credentials:"include",method:"GET"}).then((e=>{if(e&&e.ok)return e.text();throw new Error("Response code indicates a server error",e)}))}function I(e,t,o,n){n>0&&localStorage.setItem("deletedDocument",t);const r=new FormData;n&&r.append("delay",n),e&&r.append("documentPath",e.replaceAll("/",":")),o&&r.append("favorite",o),t&&r.append("documentId",t);const i=new URLSearchParams(r).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/${t}?${i}`,{credentials:"include",method:"DELETE"}).then((e=>{if(e&&!e.ok)throw new Error("Error when deleting document")}))}function P(e){return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/${e}/undoDelete`,{method:"POST",credentials:"include"}).then((e=>{if(!e||!e.ok)throw new Error("Error when undoing deleting document");localStorage.removeItem("deletedDocument")}))}function E(e,t){const o=new FormData;e&&o.append("ownerId",e),t.id&&o.append("documentId",t.id),t.description&&o.append("description",t.description);const n=new URLSearchParams(o).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/description?${n}`,{credentials:"include",method:"PUT"}).then((e=>{if(e&&e.ok)return e.ok})).catch((e=>{throw new Error(`Error when trying to update document description ${e}`)}))}function F(e,t,o){const n=new FormData;e&&n.append("documentID",e),t&&n.append("destPath",t),o&&n.append("conflictAction",o);const r=new URLSearchParams(n).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/shortcut?${r}`,{credentials:"include",method:"POST"}).then((e=>{if(e&&e.ok)return e.ok;throw e}))}function b(e){const t=new FormData;t.append("fileId",e);const o=new URLSearchParams(t).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/versions?${o}`,{method:"GET",credentials:"include"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Response code indicates a server error")}))}function X(e,t,o){const n=new FormData;n.append("versionId",t),n.append("originFileId",e);const r=new URLSearchParams(n).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/versions?${r}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:o})}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Error while updating version summary")}))}function C(e){const t=new FormData;t.append("versionId",e);const o=new URLSearchParams(t).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/versions?${o}`,{method:"PUT",credentials:"include"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Error while restoring version")}))}function R(){extensionRegistry.registerComponent("favorite-file","favorite-drawer-item",{id:"file",vueComponent:Vue.options.components["documents-favorite-item"]}),extensionRegistry.registerExtension("documents","documents-icons-extension",u)}return Vue.prototype.$documentFileService||window.Object.defineProperty(Vue.prototype,"$documentFileService",{value:o}),t})()));