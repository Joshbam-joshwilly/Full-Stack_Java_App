define((()=>(()=>{"use strict";var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{destroy:()=>R,init:()=>B});var s={};e.r(s),e.d(s,{canPublishNews:()=>I,canScheduleNews:()=>E,canUserCreateNews:()=>j,clickOnEditButton:()=>T,deleteDraft:()=>S,deleteNews:()=>X,escapeHTML:()=>k,fetchFoldersAndFiles:()=>M,findUserSpaces:()=>x,getDrivers:()=>A,getNews:()=>b,getNewsByActivityId:()=>w,getNewsById:()=>v,getNewsSpaces:()=>f,getSpaceById:()=>C,getUserSpaces:()=>N,importFileFromUrl:()=>_,markNewsAsRead:()=>g,saveNews:()=>$,scheduleNews:()=>D,searchSpaces:()=>P,undoDeleteNews:()=>O,updateNews:()=>y});var i={};e.r(i),e.d(i,{convertDate:()=>F,pad:()=>H});var o=function(){var e=this,t=e._self._c;return t("div",[t("v-overlay",{attrs:{"z-index":"1000",value:e.drawer},nativeOn:{click:function(t){e.drawer=!1}}}),e._v(" "),t("exo-drawer",{ref:"postNewsDrawer",attrs:{id:"postNewsDrawer","show-overlay":"","body-classes":"hide-scroll decrease-z-index-more",right:""},on:{opened:function(t){e.stepper=1},closed:e.closeDrawer},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},["editScheduledNews"!==e.editScheduledNews?t("template",{slot:"title"},[e._v("\n      "+e._s(e.$t("news.composer.postArticle"))+"\n    ")]):t("template",{slot:"title"},[e._v("\n      "+e._s(e.$t("news.composer.editArticle"))+"\n    ")]),e._v(" "),t("template",{slot:"content"},[e.canPublishNews?t("v-stepper",{staticClass:"ma-0 py-0 me-4",attrs:{vertical:"",flat:""},model:{value:e.stepper,callback:function(t){e.stepper=t},expression:"stepper"}},[t("v-stepper-step",{staticClass:"ma-0",attrs:{complete:e.stepper>1,step:"1"}},[e._v("\n          "+e._s(e.$t("news.composer.stepper.postStream.title"))+"\n        ")]),e._v(" "),t("v-stepper-content",{staticClass:"ps-4 pe-6 my-0",attrs:{step:"1"}},[t("div",{staticClass:"d-flex flex-column pt-2"},[t("div",{staticClass:"d-flex flex-row grey--text ms-2 postOnStreamOption"},[e._v(e._s(e.$t("news.composer.stepper.postOnStream.description")))]),e._v(" "),t("div",{staticClass:"d-flex flex-row"},[t("v-switch",{staticClass:"my-0 ms-3",attrs:{inset:"",dense:""},model:{value:e.isActivityPosted,callback:function(t){e.isActivityPosted=t},expression:"isActivityPosted"}}),e._v(" "),t("label",{staticClass:"publishSectionOption my-auto"},[e._v("\n                "+e._s(e.$t("news.composer.stepper.postOnStream.option"))+"\n              ")])],1),e._v(" "),t("v-card-actions",{staticClass:"d-flex flex-row mt-4 ms-2 px-0"},[t("v-spacer"),e._v(" "),t("v-btn",{staticClass:"btn btn-primary me-4",attrs:{outlined:""},on:{click:e.nextStep}},[e._v("\n                "+e._s(e.$t("news.composer.stepper.continue"))+"\n                "),t("v-icon",{staticClass:"ms-2",attrs:{size:"18"}},[e._v("\n                  "+e._s(e.$vuetify.rtl?"fa-caret-left":"fa-caret-right")+"\n                ")])],1)],1)],1)]),e._v(" "),t("v-stepper-step",{staticClass:"ma-0",attrs:{complete:e.stepper>2,step:"2"}},[e._v("\n          "+e._s(e.$t("news.composer.stepper.publishSection.title"))+"\n        ")]),e._v(" "),t("v-stepper-content",{staticClass:"ps-4 pe-6 my-0",attrs:{step:"2"}},[t("div",{staticClass:"d-flex flex-column pt-2"},[t("div",{staticClass:"d-flex flex-row grey--text ms-2"},[e._v(e._s(e.$t("news.composer.stepper.publishSection.description")))]),e._v(" "),t("div",{staticClass:"d-flex flex-row"},[t("v-switch",{staticClass:"my-0 ms-3",attrs:{disabled:!e.allowedTargets.length,inset:"",dense:""},model:{value:e.publish,callback:function(t){e.publish=t},expression:"publish"}}),e._v(" "),t("label",{staticClass:"publishSectionOption my-auto"},[e._v("\n                "+e._s(e.$t("news.composer.publishSection.option"))+"\n              ")])],1),e._v(" "),t("div",{staticClass:"d-flex flex-row grey--text ms-2"},[0===e.allowedTargets.length?t("i",{staticClass:"fas fa-exclamation-triangle mx-2 mt-3"}):e._e(),e._v("\n              "+e._s(e.selectedTargetDescription)+"\n            ")]),e._v(" "),e.publish&&e.allowedTargets.length?t("exo-news-targets-selector",{ref:"chooseTargets",attrs:{id:"chooseTargets",news:e.news,targets:e.allowedTargets,publish:e.publish,audience:e.audience},on:{"selected-targets":e.getSelectedTargets,"selected-audience":e.getSelectedAudience}}):e._e(),e._v(" "),t("v-card-actions",{staticClass:"d-flex flex-row mt-4 ms-2 px-0"},[t("v-btn",{staticClass:"btn",on:{click:e.previousStep}},[t("v-icon",{staticClass:"me-2",attrs:{size:"18"}},[e._v("\n                  "+e._s(e.$vuetify.rtl?"fa-caret-right":"fa-caret-left")+"\n                ")]),e._v("\n                "+e._s(e.$t("news.composer.stepper.back"))+"\n              ")],1),e._v(" "),t("v-spacer"),e._v(" "),t("v-btn",{staticClass:"btn btn-primary me-4",attrs:{outlined:"",disabled:e.disableTargetOption},on:{click:e.nextStep}},[e._v("\n                "+e._s(e.$t("news.composer.stepper.continue"))+"\n                "),t("v-icon",{staticClass:"ms-2",attrs:{size:"18"}},[e._v("\n                  "+e._s(e.$vuetify.rtl?"fa-caret-left":"fa-caret-right")+"\n                ")])],1)],1)],1)]),e._v(" "),t("v-stepper-step",{staticClass:"ma-0",attrs:{complete:e.stepper>3,step:"3"}},[e._v("\n          "+e._s(e.$t("news.composer.stepper.schedule.title"))+"\n        ")]),e._v(" "),t("v-stepper-content",{staticClass:"ps-4 pe-6 my-0",attrs:{step:"3"}},[t("div",{staticClass:"ms-3 grey--text"},[e._v(e._s(e.$t("news.composer.stepper.postedOrPublish.description")))]),e._v(" "),t("div",{staticClass:"scheduleNews"},[t("v-radio-group",{staticClass:"ms-2",model:{value:e.postArticleMode,callback:function(t){e.postArticleMode=t},expression:"postArticleMode"}},[t("v-radio",{attrs:{value:"immediate"}},[t("span",{staticClass:"postModeText",attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("news.composer.postImmediately")))])]),e._v(" "),t("v-radio",{staticClass:"mt-4",attrs:{value:"later"}},[t("span",{staticClass:"postModeText",attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("news.composer.postLater")))])]),e._v(" "),e.showPostLaterMessage?t("div",{staticClass:"mt-4"},[t("div",{staticClass:"grey--text my-4 scheduleInfoCursor"},[e._v(e._s(e.$t("news.composer.choosePostDate")))]),e._v(" "),t("div",{staticClass:"d-flex flex-column flex-grow-1"},[e._t("postDate"),e._v(" "),t("div",{staticClass:"d-flex flex-row flex-grow-1"},[t("date-picker",{staticClass:"scheduleDatePicker flex-grow-0 my-auto",attrs:{"min-value":e.minimumPostDate,attach:!1,top:!0},model:{value:e.postDate,callback:function(t){e.postDate=t},expression:"postDate"}}),e._v(" "),t("div",{staticClass:"flex-grow-0"},[e._t("postDateDateTime"),e._v(" "),t("time-picker",{staticClass:"my-0",attrs:{min:e.minimumPostDateTime},model:{value:e.postDateTime,callback:function(t){e.postDateTime=t},expression:"postDateTime"}})],2)],1)],2)]):e._e(),e._v(" "),e.allowNotPost?t("v-radio",{staticClass:"postModeText mt-4",attrs:{value:"notPost"}},[t("span",{staticClass:"postModeText",attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("news.composer.cancelPost")))])]):e._e(),e._v(" "),e.showDontPostMessage?t("div",{staticClass:"grey--text my-4 ms-4 scheduleInfoCursor"},[e._v(e._s(e.$t("news.composer.chooseNotPost")))]):e._e()],1),e._v(" "),t("v-card-actions",{staticClass:"d-flex flex-row mt-4 ms-2 px-0"},[t("v-btn",{staticClass:"btn",on:{click:e.previousStep}},[t("v-icon",{staticClass:"me-2",attrs:{size:"18"}},[e._v("\n                  "+e._s(e.$vuetify.rtl?"fa-caret-right":"fa-caret-left")+"\n                ")]),e._v("\n                "+e._s(e.$t("news.composer.stepper.back"))+"\n              ")],1)],1)],1)])],1):t("div",[t("div",{staticClass:"d-flex flex-column mt-4 ms-3"},[t("div",{staticClass:"d-flex flex-row"},[t("span",{staticClass:"text-subtitle-1 grey--text postModeText"},[e._v(e._s(e.$t("news.composer.modularity.post")))]),e._v(" "),t("v-divider",{staticClass:"my-auto me-4 ms-3",attrs:{inset:""}})],1),e._v(" "),t("div",{staticClass:"d-flex flex-row"},[t("v-radio-group",{model:{value:e.postArticleMode,callback:function(t){e.postArticleMode=t},expression:"postArticleMode"}},[t("v-radio",{attrs:{value:"immediate"}},[t("span",{staticClass:"postModeText",attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("news.composer.postImmediately")))])]),e._v(" "),t("v-radio",{staticClass:"mt-4",attrs:{value:"later"}},[t("span",{staticClass:"postModeText",attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("news.composer.postLater")))])]),e._v(" "),e.showPostLaterMessage?t("div",{staticClass:"mt-4"},[t("div",{staticClass:"grey--text my-4 scheduleInfoCursor"},[e._v(e._s(e.$t("news.composer.choosePostDate")))]),e._v(" "),t("div",{staticClass:"d-flex flex-row flex-grow-1"},[e._t("postDate"),e._v(" "),t("date-picker",{staticClass:"scheduleDatePicker flex-grow-1 my-auto",attrs:{"min-value":e.minimumPostDate},model:{value:e.postDate,callback:function(t){e.postDate=t},expression:"postDate"}}),e._v(" "),t("div",{staticClass:"d-flex flex-row flex-grow-0"},[e._t("postDateDateTime"),e._v(" "),t("time-picker",{staticClass:"me-2",attrs:{min:e.minimumPostDateTime},model:{value:e.postDateTime,callback:function(t){e.postDateTime=t},expression:"postDateTime"}})],2)],2)]):e._e(),e._v(" "),e.allowNotPost?t("v-radio",{staticClass:"postModeText mt-4",attrs:{value:"notPost"}},[t("span",{staticClass:"postModeText",attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("news.composer.cancelPost")))])]):e._e(),e._v(" "),e.showDontPostMessage?t("div",{staticClass:"grey--text my-4 ms-4 scheduleInfoCursor"},[e._v(e._s(e.$t("news.composer.chooseNotPost")))]):e._e()],1)],1)])])],1),e._v(" "),t("template",{slot:"footer"},["editScheduledNews"!==e.editScheduledNews?t("div",{staticClass:"d-flex justify-end"},[t("v-btn",{staticClass:"btn btn-primary ms-2",attrs:{disabled:e.disabled,loading:e.postingNews},on:{click:e.postArticle}},[e._v("\n          "+e._s(e.saveButtonLabel)+"\n        ")])],1):t("div",{staticClass:"d-flex justify-end"},[t("v-btn",{staticClass:"btn ms-2",on:{click:e.closeDrawer}},[e._v("\n          "+e._s(e.$t("news.composer.btn.cancel"))+"\n        ")]),e._v(" "),t("v-btn",{staticClass:"btn btn-primary ms-2",attrs:{disabled:e.disabled},on:{click:e.postArticle}},[e._v("\n          "+e._s(e.$t("news.composer.confirm"))+"\n        ")])],1)])],2)],1)};o._withStripped=!0;const n={props:{newsId:{type:String,required:!1,default:null},postingNews:{type:Boolean,default:!1}},data:()=>({stepper:0,drawer:!1,postArticleMode:"later",postDateTime:"8:00",editScheduledNews:!1,allowNotPost:!1,schedulePostDate:null,postDate:null,canPublishNews:!1,publish:!1,news:null,isActivityPosted:!0,selectedTargets:[],allowedTargets:[],audience:null,selectedAudience:null,disabled:!0}),watch:{postDate(e,t){if(!this.postDate||!e||!t||new Date(e).getTime()===new Date(t).getTime())return;const s=new Date(this.postDate),i=new Date(this.schedulePostDate),o=s.getFullYear().toString()+s.getMonth().toString()+s.getDate().toString(),n=i.getFullYear().toString()+i.getMonth().toString()+i.getDate().toString(),a=s.getHours().toString()+s.getMinutes().toString(),r=i.getHours().toString()+i.getMinutes().toString();this.disabled=o===n&&a===r,s.setHours(this.postDateTime.getHours()),s.setMinutes(this.postDateTime.getMinutes()),s.setSeconds(0),this.postDate=s},postDateTime(e,t){if(!this.postDateTime||!e||!t||new Date(e).getTime()===new Date(t).getTime())return;const s=new Date(this.postDate);s.setHours(this.postDateTime.getHours()),s.setMinutes(this.postDateTime.getMinutes()),s.setSeconds(0),this.postDate=s},selected(){this.publish=this.selected},publish(){"editScheduledNews"===this.editScheduledNews?this.publish===this.selected&&!this.publish||this.publish&&this.selectedTargets&&0===this.selectedTargets.length?this.disabled=!0:this.disabled=!1:this.disabled=!0},selectedTargets(e,t){this.canPublishNews&&("editScheduledNews"===this.editScheduledNews&&this.publish&&this.selectedTargets.length>0&&e.length!==t.length?this.disabled=!1:this.disabled=!0)},isActivityPosted(){"editScheduledNews"===this.editScheduledNews?this.visibilityActivity===!this.isActivityPosted?this.disabled=!0:this.disabled=!1:this.disabled=!0},stepper(){!this.canPublishNews||1!==this.stepper&&2!==this.stepper||"editScheduledNews"===this.editScheduledNews?this.canPublishNews&&2===this.stepper&&"editScheduledNews"!==this.editScheduledNews?this.disabled=this.visibilityActivity===!this.isActivityPosted||this.selected===this.publish:this.canPublishNews&&3===this.stepper&&"editScheduledNews"!==this.editScheduledNews&&(this.disabled=!1):this.disabled=!0},postArticleMode(){const e=new Date(this.postDate),t=new Date(this.schedulePostDate);"later"===this.postArticleMode?this.disabled=e.getTime()===t.getTime():this.disabled=!1}},computed:{saveButtonLabel(){return"later"===this.postArticleMode?this.$t("news.composer.schedule"):this.$t("news.composer.post")},minimumPostDate:()=>new Date,minimumPostDateTime(){const e=new Date;return this.postDate&&Number(new Date(this.postDate.getTime()))<e.getTime()?new Date(e.getTime()+18e5):null},showDontPostMessage(){return this.allowNotPost&&"later"!==this.postArticleMode&&"immediate"!==this.postArticleMode},showPostLaterMessage(){return"later"===this.postArticleMode||!this.allowNotPost&&"immediate"!==this.postArticleMode},selected(){return this.news&&this.news.published},visibilityActivity(){return this.news&&this.news.activityPosted},disableTargetOption(){return this.publish&&this.selectedTargets&&0===this.selectedTargets.length},selectedTargetDescription(){return 0===this.allowedTargets.length?this.$t("news.composer.stepper.selectedTarget.noTargetAllowed"):this.$t("news.composer.stepper.selectedTarget.description")}},created(){this.selectedAudience=this.$t("news.composer.stepper.audienceSection.allUsers"),this.disabled=!0,this.getAllowedTargets(),this.$newsServices.canPublishNews().then((e=>{this.canPublishNews=e})),this.newsId&&this.initializeDate(),this.$root.$on("open-schedule-drawer",(e=>{this.editScheduledNews=e,"editScheduledNews"===e?(this.allowNotPost=!0,this.postArticleMode="later"):(this.allowNotPost=!1,this.postArticleMode="immediate"),this.openDrawer()}))},methods:{openDrawer(){if(this.newsId&&this.initializeDate(),this.$refs.postNewsDrawer){if("editScheduledNews"===this.editScheduledNews)this.postDateTime=new Date(this.schedulePostDate),this.postDate=this.postDateTime,this.postDateTime.setHours(new Date(this.schedulePostDate).getHours()),this.postDateTime.setMinutes(new Date(this.schedulePostDate).getMinutes()),this.postDateTime.setSeconds(new Date(this.schedulePostDate).getSeconds()),this.postDateTime.setMilliseconds(new Date(this.schedulePostDate).getMilliseconds());else{const e=new Date;e.setDate(e.getDate()+1),this.postDate=e,this.postDateTime=e,this.postDateTime.setHours(8),this.postDateTime.setMinutes(0),this.postDateTime.setSeconds(0),this.postDateTime.setMilliseconds(0)}this.$refs.postNewsDrawer.open()}},initializeDate(){this.$newsServices.getNewsById(this.newsId,!1).then((e=>{e&&(this.news=e,this.canPublishNews=e.canPublish,this.isActivityPosted=!e.activityPosted,this.schedulePostDate=e.schedulePostDate,this.selectedTargets=e.targets,this.audience=e.audience?e.audience:"all")}))},postArticle(){this.$emit("post-article","later"!==this.postArticleMode?null:this.$newsUtils.convertDate(this.postDate),this.postArticleMode,this.publish,!this.isActivityPosted,this.selectedTargets,this.publish?this.selectedAudience:null)},closeDrawer(){this.news&&(this.publish=this.news.published),this.stepper=0,this.disabled=!1,this.$refs.postNewsDrawer.close()},previousStep(){this.stepper--},nextStep(){this.stepper++},getSelectedTargets(e){this.selectedTargets=e},getSelectedAudience(e){this.selectedAudience=e,"editScheduledNews"===this.editScheduledNews&&(this.disabled=!1)},getAllowedTargets(){this.$newsTargetingService.getAllowedTargets().then((e=>{this.allowedTargets=e.map((e=>({name:e.name,label:e.properties&&e.properties.label&&e.properties.label.length>35?e.properties.label.substring(0,35).concat("..."):e.properties.label,tooltipInfo:e.properties&&e.properties.label,description:e.properties&&e.properties.description})))}))}}};var a=function(e,t,s,i,o,n,a,r){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=[],c._compiled=!0),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,l):[l]}return{exports:e,options:c}}(n,o);const r=a.exports,l=eXo.env.portal.context||"",c=(eXo.env.portal.portalName,eXo.env.portal.containerName,eXo.env.portal.rest),d=`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/news`,p=(eXo.env.portal.context,eXo.env.portal.rest,`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/social/spaces`),h=`${eXo.env.portal.context}/${eXo.env.portal.rest}${eXo.env.portal.context}/social/spaces/suggest.json`,u=`${eXo.env.portal.context}/${eXo.env.portal.rest}/space/user/searchSpace/`,m=(eXo.env.portal.spaceId,window.location.host,eXo.env.portal.context,eXo.env.portal.userName);function v(e,t){return fetch(`${d}/${e}?editMode=${t||""}`,{credentials:"include",method:"GET"}).then((e=>e&&e.ok?e.json():401===e.status?e.status:void 0)).then((e=>e)).catch((e=>e))}function w(e){return fetch(`${d}/byActivity/${e}`,{credentials:"include",method:"GET"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Response code indicates a server error",e)}))}function f(e){return fetch(`${d}/${e}?fields=spaces`,{credentials:"include",method:"GET"}).then((e=>e.json())).then((e=>e))}function g(e){return fetch(`${d}/markAsRead/${e}`,{credentials:"include",method:"POST"}).then((e=>{if(e&&e.ok)return e.text();throw new Error("Error while marking news as read")}))}function b(e,t,s,i,o,n){let a=`${d}?author=${m}&publicationState=published&filter=${e}`;return s&&(a+=`&text=${s}`),t&&(a+=`&spaces=${t}`),isNaN(i)||(a+=`&offset=${i}`),isNaN(o)||(a+=`&limit=${o}`),n&&(a+=`&returnSize=${n}`),fetch(a,{headers:{"Content-Type":"application/json"},method:"GET"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Error getting news list")}))}function $(e){return fetch(`${d}`,{headers:{"Content-Type":"application/json"},credentials:"include",method:"POST",body:JSON.stringify(e)}).then((e=>e.json()))}function D(e){return fetch(`${d}/schedule`,{headers:{"Content-Type":"application/json"},credentials:"include",method:"PATCH",body:JSON.stringify(e)}).then((e=>e.json()))}function _(e){return fetch(e,{headers:{"Content-Type":"blob"},credentials:"include",method:"GET"})}function y(e,t){return fetch(`${d}/${e.id}?post=${t}`,{headers:{"Content-Type":"application/json"},credentials:"include",method:"PUT",body:JSON.stringify(e)}).then((e=>e.json()))}function T(e){return fetch(`${d}/${e}/click`,{credentials:"include",method:"POST",body:"edit"})}function x(e){return fetch(`${h}?conditionToSearch=${e}&currentUser=${m}&typeOfRelation=confirmed`,{headers:{"Content-Type":"application/json"},method:"GET"}).then((e=>e.json())).then((e=>e.options))}function S(e){return fetch(`${d}/${e}`,{credentials:"include",method:"DELETE"})}function C(e){return fetch(`${p}/${e}`,{credentials:"include",method:"GET"}).then((t=>{if(t&&t.ok)return t.json();throw new Error(`Error getting space with id ${e}`)}))}function N(e,t,s){return fetch(`${p}?offset=${e}&limit=${t}&returnSize=true&filterType=${s}`,{credentials:"include",method:"GET"}).then((e=>e.json())).then((e=>e))}function P(e){return fetch(`${u}?fields=id,url,displayName,avatarUrl&keyword=${e}`,{headers:{"Content-Type":"application/json"},method:"GET"}).then((e=>e.json()))}function M(e,t,s){return fetch(`/portal/rest/managedocument/getFoldersAndFiles/?driveName=${e}&workspaceName=${t}&currentFolder=${s}`,{}).then((e=>e.text())).then((e=>(new window.DOMParser).parseFromString(e,"text/xml"))).then((e=>e))}function A(){return fetch("/portal/rest/wcmDriver/getDrivers",{}).then((e=>e.text())).then((e=>(new window.DOMParser).parseFromString(e,"text/xml"))).then((e=>e))}function k(e){const t=document.createElement("div");return t.innerText=e,t.innerHTML}function j(e){return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/news/canCreateNews/${eXo.env.portal.spaceId||e}`,{headers:{"Content-Type":"application/json"},method:"GET"}).then((e=>e&&e.ok&&e.json()))}function E(e){return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/news/canScheduleNews/${eXo.env.portal.spaceId||e}`,{headers:{"Content-Type":"application/json"},method:"GET"}).then((e=>e&&e.ok&&e.json()))}function X(e,t,s){return s>0&&localStorage.setItem("deletedNews",e),fetch(`${d}/${e}?isDraft=${t||""}&delay=${s||0}`,{credentials:"include",method:"DELETE"}).then((e=>{if(e&&!e.ok)throw new Error("Error when deleting news")}))}function O(e){return fetch(`${d}/${e}/undoDelete`,{method:"POST",credentials:"include"}).then((e=>{if(!e||!e.ok)throw new Error("Error when undoing deleting news");localStorage.removeItem("deletedNews")}))}function I(){return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/news/canPublishNews?spaceId=${eXo.env.portal.spaceId}`,{headers:{"Content-Type":"application/json"},method:"GET"}).then((e=>e.json())).then((e=>e))}function F(e){return`${H(e.getMonth()+1)}/${H(e.getDate())}/${H(e.getFullYear())} ${H(e.getHours())}:${H(e.getMinutes())}:${H(e.getSeconds())}`}function H(e){return e<10&&`0${e}`||e}const G={"schedule-news-drawer":r};for(const e in G)Vue.component(e,G[e]);Vue.prototype.$newsServices||window.Object.defineProperty(Vue.prototype,"$newsServices",{value:s}),Vue.prototype.$newsUtils||window.Object.defineProperty(Vue.prototype,"$newsUtils",{value:i});const L="undefined"!=typeof eXo?eXo.env.portal.language:"en";Vue.use(Vuetify);const z=new Vuetify(eXo.env.portal.vuetifyPreset),U=[`${l}/${c}/i18n/bundle/locale.portlet.news.News-${L}.json`,`${l}/${c}/i18n/bundle/locale.social.Webui-${L}.json`];if(extensionRegistry){const e=extensionRegistry.loadComponents("ScheduleNewsDrawer");e&&e.length>0&&e.forEach((e=>{Vue.component(e.componentName,e.componentOptions)}))}let V;function B(e){const t=`scheduleNewsDrawer-${e.newsId}`,s=document.createElement("div");s.id=t,exoi18n.loadLanguageAsync(L,U).then((e=>{V=new Vue({template:`<schedule-news-drawer\n                  v-cacheable="{cacheId: '${t}'}"\n                  id="${t}"/>`,i18n:e,vuetify:z}).$mount(s)}))}function R(){V&&V.$destroy()}return t})()));