define(function(){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([,function(e,t,n){"use strict";n.r(t);var a={data:()=>({search:"",dialog:!1,confirmDialog:!1,itemToDelete:0,alert:!1,message:"",alert_type:"",alertIcon:"",alert_add:!1,message_add:"",alert_type_add:"",hookList:[],editedIndex:-1,editedItem:{organization:"",repo:"",webhook:"",events:"",enabled:!0},defaultItem:{organization:"",repo:"",webhook:"",events:"",enabled:!0},rules:{required:e=>!!e||"Required.",counter:e=>e.length>=3||"Min 3 characters",startWith:e=>e.startsWith("portal/rest")||"Should start with 'portal/rest', please don't include the server host"}}),computed:{formTitle(){return-1===this.editedIndex?this.$t("githubWebhookManagement.newConnector"):this.$t("githubWebhookManagement.editConnector")},headers(){return[{text:this.$t("githubWebhookManagement.organization"),align:"center",sortable:!0,value:"organization"},{text:this.$t("githubWebhookManagement.repository"),align:"center",sortable:!0,value:"repo"},{text:this.$t("githubWebhookManagement.enabled"),align:"center",sortable:!0,value:"enabled"},{text:this.$t("githubWebhookManagement.actions"),align:"center",value:"action",sortable:!1}]}},watch:{dialog(e){return!0===e||!0===this.close()}},created(){this.initialize()},methods:{initialize(){return fetch("/portal/rest/gamification/connectors/github/hooksmanagement/hooks",{credentials:"include"}).then(e=>e.json()).then(e=>this.hookList=e)},editItem(e){return fetch(`/portal/rest/gamification/connectors/github/hooksmanagement/hooks/${e.id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>{if(!e.ok)throw e}).then(()=>{this.initialize(),this.displaySusccessMessage(this.$t("githubWebhookManagement.webhookUpdated"))}).catch(e=>{this.initialize(),e.text().then(e=>{this.displayErrorMessage(e)})})},deleteItem(e){this.itemToDelete=e.id,this.confirmDialog=!0},delete_(){fetch(`/portal/rest/gamification/connectors/github/hooksmanagement/hooks/${this.itemToDelete}`,{method:"delete",credentials:"include",headers:{"Content-Type":"application/json"}}).then(e=>{if(!e.ok)throw e}).then(()=>{this.confirmDialog=!1,this.initialize(),this.displaySusccessMessage(this.$t("githubWebhookManagement.webhookDeleted"))}).catch(e=>{this.confirmDialog=!1,this.initialize(),e.text().then(e=>{this.displayErrorMessage(e)})})},close(){this.dialog=!1,this.editedItem=this.defaultItem,setTimeout(()=>{this.editedIndex=-1,this.initialize()},300)},save(){""===this.editedItem.organization||""===this.editedItem.repo?(this.alert_type_add="alert-error",this.alert_add=!0,this.message_add=this.$t("githubWebhookManagement.allFieldsShouldBeFilled"),setTimeout(()=>this.alert_add=!1,5e3)):(this.editedIndex>-1?fetch(`/portal/rest/gamification/connectors/github/hooksmanagement/hooks/${this.editedItem.id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.editedItem)}).then(e=>{if(!e.ok)throw e}).then(()=>{this.initialize(),this.displaySusccessMessage(this.$t("githubWebhookManagement.webhookUpdated"))}).catch(e=>{this.initialize(),e.text().then(e=>{this.displayErrorMessage(e)})}):(this.hookList.push(this.editedItem),fetch("/portal/rest/gamification/connectors/github/hooksmanagement/hooks",{method:"post",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.editedItem)}).then(e=>{if(!e.ok)throw e}).then(()=>{this.initialize(),this.displaySusccessMessage(this.$t("githubWebhookManagement.webhookCreated"))}).catch(e=>{this.initialize(),e.text().then(e=>{this.displayErrorMessage(e)})})),this.close())},displaySusccessMessage(e){this.message=e,this.alert_type="alert-success",this.alertIcon="uiIconSuccess",this.alert=!0,setTimeout(()=>this.alert=!1,5e3),this.editedItem=this.defaultItem},displayErrorMessage(e){this.isUpdating=!1,this.message=e,this.alert_type="alert-error",this.alertIcon="uiIconError",this.alert=!0,setTimeout(()=>this.alert=!1,5e3)}}},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{staticClass:"VuetifyApp",attrs:{id:"gitHubWebHookManagementApp",color:"transparent"}},[n("main",[e.alert?n("div",{staticClass:"alert",class:e.alert_type,attrs:{id:""}},[n("i",{class:e.alertIcon}),e._v(e._s(e.message)+"\n    ")]):e._e(),e._v(" "),n("v-layout",[n("v-data-table",{attrs:{headers:e.headers,items:e.hookList,search:e.search,"sort-by":"id"},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{staticClass:"mt-3",attrs:{flat:"",color:"white"}},[n("div",{staticClass:"flex-grow-1"}),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[n("v-text-field",{staticClass:"pt-0",attrs:{placeholder:e.$t("githubWebhookManagement.search"),"append-icon":"search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),n("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},a),[e._v("\n                  "+e._s(e.$t("githubWebhookManagement.newConnector"))+"\n                ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),e._v(" "),e.alert_add?n("div",{staticClass:"alert",class:e.alert_type_add,attrs:{id:""}},[n("i",{staticClass:"uiIconError"}),e._v(e._s(e.message_add)+"\n                ")]):e._e(),e._v(" "),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{rules:[e.rules.required,e.rules.counter],label:e.$t("githubWebhookManagement.organization")},model:{value:e.editedItem.organization,callback:function(t){e.$set(e.editedItem,"organization",t)},expression:"editedItem.organization"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{rules:[e.rules.required,e.rules.counter],label:e.$t("githubWebhookManagement.repository")},model:{value:e.editedItem.repo,callback:function(t){e.$set(e.editedItem,"repo",t)},expression:"editedItem.repo"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-checkbox",{attrs:{label:e.$t("githubWebhookManagement.enabled")},model:{value:e.editedItem.enabled,callback:function(t){e.$set(e.editedItem,"enabled",t)},expression:"editedItem.enabled"}})],1)],1)],1)],1),e._v(" "),n("v-card-actions",[n("div",{staticClass:"flex-grow-1"}),e._v(" "),n("div",{staticClass:"uiAction"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"button",text:""},on:{click:e.save}},[e._v("\n                      "+e._s(e.$t("githubWebhookManagement.save"))+"\n                    ")]),e._v(" "),n("button",{staticClass:"btn",attrs:{type:"button"},on:{click:e.close}},[e._v("\n                      "+e._s(e.$t("githubWebhookManagement.cancel"))+"\n                    ")])])])],1)],1),e._v(" "),n("v-dialog",{attrs:{"max-width":"290"},model:{value:e.confirmDialog,callback:function(t){e.confirmDialog=t},expression:"confirmDialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("\n                  "+e._s(e.$t("githubWebhookManagement.confirmation"))+"\n                ")]),e._v(" "),n("v-card-text",[e._v("\n                  "+e._s(e.$t("githubWebhookManagement.deleteConfirmationMessage"))+"\n                ")]),e._v(" "),n("v-card-actions",[n("div",{staticClass:"flex-grow-1"}),e._v(" "),n("div",{staticClass:"uiAction"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.delete_()}}},[e._v("\n                      "+e._s(e.$t("githubWebhookManagement.delete"))+"\n                    ")]),e._v(" "),n("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){e.confirmDialog=!1}}},[e._v("\n                      "+e._s(e.$t("githubWebhookManagement.cancel"))+"\n                    ")])])])],1)],1)],1)]},proxy:!0},{key:"item.enabled",fn:function(t){var a=t.item;return[n("form",{staticClass:"switchEnabled"},[n("label",{staticClass:"switch"},[n("input",{directives:[{name:"model",rawName:"v-model",value:a.enabled,expression:"item.enabled"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(a.enabled)?e._i(a.enabled,null)>-1:a.enabled},on:{change:[function(t){var n=a.enabled,i=t.target,o=!!i.checked;if(Array.isArray(n)){var s=e._i(n,null);i.checked?s<0&&e.$set(a,"enabled",n.concat([null])):s>-1&&e.$set(a,"enabled",n.slice(0,s).concat(n.slice(s+1)))}else e.$set(a,"enabled",o)},function(t){return e.editItem(a)}]}}),e._v(" "),n("span",{staticClass:"slider round"}),e._v(" "),n("span",{staticClass:"absolute-no"},[e._v(e._s(e.$t("githubWebhookManagement.no")))])])])]}},{key:"item.action",fn:function(t){var a=t.item;return[n("a",{staticClass:"actionIcon",attrs:{role:"button"},on:{click:function(t){return e.deleteItem(a)}}},[n("i",{staticClass:"uiIconRemoveStyle uiIconLightGray"})])]}},{key:"no-data",fn:function(){return[e._v("\n          "+e._s(e.$t("githubWebhookManagement.noWebhooks"))+"\n        ")]},proxy:!0}])})],1)],1)])};i._withStripped=!0;var o=function(e,t,n,a,i,o,s,r){var l=typeof(e=e||{}).default;"object"!==l&&"function"!==l||(e=e.default);var c,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=n,d._compiled=!0),a&&(d.functional=!0),o&&(d._scopeId=o),s?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},d._ssrRegister=c):i&&(c=r?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(d.functional){d._injectStyles=c;var h=d.render;d.render=function(e,t){return c.call(t),h(e,t)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,c):[c]}return{exports:e,options:d}}(a,i,[],!1,null,null,null);o.options.__file="src/main/webapp/vue-app/webhook-management/components/GitHubWebHookManagementApp.vue";const s={"github-webhook-management-app":o.exports};for(const e in s)Vue.component(e,s[e]);if(n.d(t,"init",function(){return h}),extensionRegistry){const e=extensionRegistry.loadComponents("GitHubWebHookManagementApp");e&&e.length>0&&e.forEach(e=>{Vue.component(e.componentName,e.componentOptions)})}Vue.use(Vuetify);const r=new Vuetify(eXo.env.portal.vuetifyPreset),l="gitHubWebHookManagementApp",c=eXo&&eXo.env.portal.language||"en",d=`${eXo.env.portal.context}/${eXo.env.portal.rest}/i18n/bundle/locale.portlet.GitHubWebHookManagement-${c}.json`;function h(){exoi18n.loadLanguageAsync(c,d).then(e=>{Vue.createApp({template:`<github-webhook-management-app id="${l}" />`,vuetify:r,i18n:e},`#${l}`,"Github Webhook Management")})}}])});