define((()=>(()=>{"use strict";var e={};(e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(e);var t=function(){var e=this,t=e._self._c;return t("v-app",{staticClass:"transparent peopleList",attrs:{flat:""}},[t("people-toolbar",{attrs:{keyword:e.keyword,filter:e.filter,"people-count":e.peopleCount},on:{"keyword-changed":function(t){e.keyword=t},"filter-changed":function(t){e.filter=t}}}),e._v(" "),t("people-card-list",{ref:"peopleList",attrs:{keyword:e.keyword,filter:e.filter,"loading-people":e.loadingPeople,"people-count":e.peopleCount},on:{loaded:e.peopleLoaded}}),e._v(" "),t("people-advanced-filter-drawer")],1)};function i(e,t,i,s,n,o,l,a){var r,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=i,c._compiled=!0),s&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),l?(r=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},c._ssrRegister=r):n&&(r=a?function(){n.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:n),r)if(c.functional){c._injectStyles=r;var p=c.render;c.render=function(e,t){return r.call(t),p(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,r):[r]}return{exports:e,options:c}}t._withStripped=!0;const s=i({props:{filter:{type:String,default:null}},data:()=>({keyword:null,peopleCount:0,loadingPeople:!1}),methods:{peopleLoaded(e){this.peopleCount=e}}},t,[],!1,null,null,null).exports;var n=function(){var e=this,t=e._self._c;return t("v-card",{attrs:{flat:""}},[e.loadingPeople?t("v-progress-linear",{attrs:{indeterminate:"",height:"2",color:"primary"}}):e._e(),e._v(" "),t("v-card-text",{staticClass:"pb-0",attrs:{id:"peopleListBody"}},[t("v-item-group",[t("v-container",{staticClass:"pa-0"},[e.filteredPeople&&e.filteredPeople.length?t("v-row",{staticClass:"ma-0 border-box-sizing"},e._l(e.filteredPeople,(function(i){return t("v-col",{key:i.id,staticClass:"pa-0",attrs:{cols:"12",md:"6",lg:"4",xl:"3"}},[t("people-card",{attrs:{user:i,"profile-action-extensions":e.profileActionExtensions},on:{refresh:e.searchPeople}})],1)})),1):e.loadingPeople?e._e():t("div",{staticClass:"d-flex text-center noPeopleYetBlock"},[t("div",{staticClass:"ma-auto noPeopleYet"},[t("p",{staticClass:"noPeopleYetIcons"},[t("v-icon",[e._v("fa-users")])],1),e._v(" "),"connections"===e.filter?[t("p",{staticClass:"title font-weight-bold"},[e._v("\n                "+e._s(e.$t("peopleList.label.noConnection"))+"\n              ")])]:e.hasPeople?[t("p",{staticClass:"title font-weight-bold"},[e._v("\n                "+e._s(e.$t("peopleList.label.noResults"))+"\n              ")])]:[t("p",{staticClass:"title font-weight-bold"},[e._v("\n                "+e._s(e.$t("peopleList.label.noPeopleYet"))+"\n              ")])]],2)])],1)],1)],1),e._v(" "),t("v-card-actions",{staticClass:"pt-0 px-5 border-box-sizing",attrs:{id:"peopleListFooter"}},[e.canShowMore?t("v-btn",{staticClass:"loadMoreButton ma-auto btn",attrs:{loading:e.loadingPeople,disabled:e.loadingPeople,block:""},on:{click:e.loadNextPage}},[e._v("\n      "+e._s(e.$t("peopleList.button.showMore"))+"\n    ")]):e._e()],1)],1)};n._withStripped=!0;const o=i({props:{keyword:{type:String,default:null},filter:{type:String,default:null},spaceId:{type:Number,default:0},peopleCount:{type:Number,default:0},isManager:{type:Boolean,default:!1},loadingPeople:{type:Boolean,default:!1}},data:()=>({profileExtensions:[],spaceMemberExtensions:[],fieldsToRetrieve:"all,spacesCount,relationshipStatus,connectionsCount,binding",userType:"internal",initialized:!1,hasPeople:!1,offset:0,pageSize:20,limit:20,users:[],limitToFetch:0,originalLimitToFetch:0,abortController:null}),computed:{profileActionExtensions(){const e=[...this.profileExtensions,...this.spaceMemberExtensions];return e.sort(((e,t)=>(e.sort||100)-(t.sort||100))),e},canShowMore(){return this.loadingPeople||this.users.length>=this.limitToFetch},filteredPeople(){return this.keyword&&this.loadingPeople?this.users.slice().filter((e=>e.fullname&&e.fullname.toLowerCase().indexOf(this.keyword.toLowerCase())>=0||e.position&&e.position.toLowerCase().indexOf(this.keyword.toLowerCase())>=0)):this.users}},watch:{keyword(){if(!this.keyword)return this.resetSearch(),void this.searchPeople();this.searchPeople()},limitToFetch(){this.searchPeople()},filter(){this.searchPeople()}},created(){this.originalLimitToFetch=this.limitToFetch=this.limit,document.addEventListener("space-member-extension-updated",this.refreshExtensions),document.addEventListener("profile-extension-updated",this.refreshExtensions),document.dispatchEvent(new CustomEvent("profile-extension-init")),this.$root.$on("reset-advanced-filter",this.searchPeople),this.$root.$on("advanced-filter",(e=>this.getUsersByadvancedfilter(e))),this.refreshExtensions()},methods:{refreshExtensions(){this.profileExtensions=extensionRegistry.loadExtensions("profile-extension","action")||[],this.spaceMemberExtensions=this.spaceId&&extensionRegistry.loadExtensions("space-member-extension","action")||[]},searchPeople(){let e;return this.loadingPeople=!0,this.abortController&&this.abortController.abort(),this.abortController=new AbortController,e="connections"===this.filter?this.$userService.getConnections(this.keyword,this.offset,this.limitToFetch+1,this.fieldsToRetrieve,this.abortController.signal):"member"===this.filter||"manager"===this.filter||"invited"===this.filter||"pending"===this.filter||"redactor"===this.filter||"publisher"===this.filter?this.$spaceService.getSpaceMembers(this.keyword,this.offset,this.limitToFetch+1,this.fieldsToRetrieve,this.filter,this.spaceId,this.abortController.signal):this.$userService.getUsers(this.keyword,this.offset,this.limitToFetch+1,this.fieldsToRetrieve,this.abortController.signal,!0),e.then((e=>{const t=e&&e.users||[];return this.users=t.slice(0,this.limitToFetch),this.peopleCount=e&&e.size&&e.size||0,this.hasPeople=this.hasPeople||this.peopleCount>0,this.$emit("loaded",this.peopleCount),this.$nextTick()})).then((()=>{this.keyword&&this.filteredPeople.length<this.originalLimitToFetch&&this.users.length>=this.limitToFetch&&(this.limitToFetch+=this.pageSize)})).finally((()=>{this.initialized||this.$root.$applicationLoaded(),this.loadingPeople=!1,this.initialized=!0,this.abortController=null}))},resetSearch(){this.limitToFetch!==this.originalLimitToFetch&&(this.limitToFetch=this.originalLimitToFetch)},loadNextPage(){this.originalLimitToFetch=this.limitToFetch+=this.pageSize},getUsersByadvancedfilter(e){let t;return this.loadingPeople=!0,this.abortController&&this.abortController.abort(),this.abortController=new AbortController,this.filter&&(t=this.$userService.getUsersByAdvancedFilter(e,this.offset,this.limitToFetch+1,this.fieldsToRetrieve,this.filter,this.abortController.signal)),t.then((e=>{const t=e&&e.users||[];return this.users=t.slice(0,this.limitToFetch),this.peopleCount=e&&e.size&&e.size||0,this.hasPeople=this.hasPeople||this.peopleCount>0,this.$emit("loaded",this.peopleCount),this.$nextTick()})).then((()=>{this.filteredPeople.length<this.originalLimitToFetch&&this.users.length>=this.limitToFetch&&(this.limitToFetch+=this.pageSize)})).finally((()=>{this.initialized||this.$root.$applicationLoaded(),this.loadingPeople=!1,this.initialized=!0,this.abortController=null}))}}},n,[],!1,null,null,null).exports;var l=function(){var e=this,t=e._self._c;return t("v-toolbar",{attrs:{id:"peopleListToolbar",flat:""}},[t("div",{staticClass:"showingPeopleText text-sub-title ms-3 d-none d-sm-flex"},[e._v("\n    "+e._s(e.$t("peopleList.label.peopleCount",{0:e.peopleCount}))+"\n  ")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.mobileFilter,expression:"mobileFilter"}],staticClass:"hidden-sm-and-up"},[t("v-icon",{attrs:{left:"",size:"20"},on:{click:e.showMobileFilter}},[e._v("fa-arrow-left")])],1),e._v(" "),t("v-spacer",{staticClass:"d-none d-sm-flex"}),e._v(" "),t("v-col",[t("v-text-field",{directives:[{name:"show",rawName:"v-show",value:e.isMobile&&e.mobileFilter||!e.isMobile,expression:"isMobile && mobileFilter || !isMobile"}],staticClass:"inputPeopleFilter pa-0 my-auto",attrs:{placeholder:e.$t("peopleList.label.filterPeople"),"prepend-inner-icon":"fa-filter"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),t("v-scale-transition",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.filter,expression:"filter"}],staticClass:"selectPeopleFilter my-auto me-2 subtitle-1 ignore-vuetify-classes d-none d-sm-inline",on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.filter=t.target.multiple?i:i[0]}}},e._l(e.peopleFilters,(function(i){return t("option",{key:i.value,domProps:{value:i.value}},[e._v("\n        "+e._s(i.text)+"\n      ")])})),0)]),e._v(" "),t("v-scale-transition",[t("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.isMobile&&e.mobileFilter||!e.isMobile,expression:"isMobile && mobileFilter || !isMobile"}],staticClass:"btn px-2 btn-primary",attrs:{outlined:""},on:{click:function(t){return e.openPeopleAdvancedFilterDrawer()}}},[t("v-icon",{staticClass:"primary--text mr-1",attrs:{small:""}},[e._v("fa-sliders-h")]),e._v(" "),t("span",{staticClass:"d-none font-weight-regular caption d-sm-inline mr-1"},[e._v("\n        "+e._s(e.$t("pepole.advanced.filter.button.title"))+"\n        "+e._s(e.advancedFilterCountDisplay)+"\n      ")])],1)],1),e._v(" "),t("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.isMobile&&!e.mobileFilter,expression:"isMobile && !mobileFilter"}],staticClass:"text-sub-title pa-1 my-auto mt-2 ml-auto",attrs:{size:"24"},on:{click:function(t){return e.showMobileFilter()}}},[e._v("\n    mdi-filter-outline\n  ")])],1)};l._withStripped=!0;const a=i({props:{keyword:{type:String,default:null},filter:{type:String,default:null},peopleCount:{type:String,default:null}},data:()=>({filterToChange:null,bottomMenu:!1,startSearchAfterInMilliseconds:300,endTypingKeywordTimeout:50,startTypingKeywordTimeout:0,typing:!1,advancedFilterCount:0,mobileFilter:!1}),created(){this.$root.$on("advanced-filter-count",(e=>this.advancedFilterCount=e)),this.$root.$on("reset-advanced-filter-count",(()=>{this.advancedFilterCount=0}))},computed:{peopleFilters(){return[{text:this.$t("peopleList.label.filter.all"),value:"all"},{text:this.$t("peopleList.label.filter.connections"),value:"connections"}]},advancedFilterCountDisplay(){return this.advancedFilterCount>0?`(${this.advancedFilterCount})`:""},isMobile(){return this.$vuetify.breakpoint.width<768}},watch:{keyword(){this.startTypingKeywordTimeout=Date.now()+this.startSearchAfterInMilliseconds,this.typing||(this.typing=!0,this.waitForEndTyping())},filter(){this.$emit("filter-changed",this.filter)}},methods:{openBottomMenu(){this.filterToChange=this.filter,this.bottomMenu=!0},changeFilterSelection(){this.bottomMenu=!1,this.filter=this.filterToChange},openPeopleAdvancedFilterDrawer(){this.$root.$emit("open-people-advanced-filter-drawer")},waitForEndTyping(){window.setTimeout((()=>{Date.now()>this.startTypingKeywordTimeout?(this.typing=!1,this.$emit("keyword-changed",this.keyword)):this.waitForEndTyping()}),this.endTypingKeywordTimeout)},showMobileFilter(){this.mobileFilter=!this.mobileFilter}}},l,[],!1,null,null,null).exports;var r=function(){var e=this,t=e._self._c;return t("v-flex",{class:e.flipCard?"peopleCardFlip peopleCardFlipped":"peopleCardFlip"},[t("div",{staticClass:"peopleCardFront"},[t("people-card-front",{attrs:{user:e.user,"profile-action-extensions":e.profileActionExtensions,front:""},on:{flip:function(t){e.flipCard=!0},refresh:function(t){return e.$emit("refresh")}}})],1),e._v(" "),t("div",{staticClass:"peopleCardBack"},[t("people-card-reverse",{attrs:{user:e.user},on:{flip:function(t){e.flipCard=!1}}})],1)])};r._withStripped=!0;const c=i({props:{user:{type:Object,default:()=>({})},profileActionExtensions:{type:Array,default:()=>[]}},data:()=>({flipCard:!1})},r,[],!1,null,null,null).exports;var p=function(){var e=this,t=e._self._c;return t("v-card",{staticClass:"peopleCardItem d-block d-sm-flex",attrs:{id:e.userMenuParentId,outlined:!e.isMobile,flat:"",hover:""}},[t("v-img",{staticClass:"white--text align-start d-block peopleBannerImg",attrs:{"lazy-src":e.userBannerUrl,src:e.userBannerUrl,transition:"none",height:"80px",eager:""}}),e._v(" "),t("div",{staticClass:"peopleToolbarIcons px-2"},[t("v-btn",{staticClass:"peopleInfoIcon d-flex",attrs:{title:e.$t("peopleList.label.openUserInfo"),icon:"",small:""},on:{click:function(t){return e.$emit("flip")}}},[t("v-icon",{attrs:{size:"12"}},[e._v("fa-info")])],1),e._v(" "),e.user.isManager?t("v-btn",{staticClass:"peopleInfoIcon d-flex not-clickable primary-border-color ms-1",attrs:{title:e.$t("peopleList.label.spaceManager"),ripple:!1,color:"primary",icon:"",small:""}},[t("v-icon",{attrs:{size:"12"}},[e._v("mdi-account-cog")])],1):e._e(),e._v(" "),e.user.isSpaceRedactor?t("v-btn",{staticClass:"peopleInfoIcon d-flex not-clickable primary-border-color ms-1",attrs:{title:e.$t("peopleList.label.spaceRedactor"),ripple:!1,color:"primary",icon:"",small:""}},[t("v-icon",{attrs:{size:"12"}},[e._v("mdi-account-edit")])],1):e._e(),e._v(" "),e.publisherRolePromotionFeatureEnabled&&e.user.isSpacePublisher?t("v-btn",{staticClass:"peopleInfoIcon d-flex not-clickable primary-border-color ms-1",attrs:{title:e.$t("peopleList.label.spacePublisher"),ripple:!1,color:"primary",icon:"",small:""}},[t("v-icon",{attrs:{size:"12"}},[e._v("fa-paper-plane")])],1):e._e(),e._v(" "),e.user.isGroupBound?t("v-btn",{staticClass:"peopleGroupMemberBindingIcon d-flex not-clickable ms-1",attrs:{title:e.$t("peopleList.label.groupBound"),ripple:!1,color:"grey",icon:"",small:""}},[t("span",{staticClass:"d-flex uiIconPLFFont uiIconGroup"})]):e._e(),e._v(" "),t("v-spacer"),e._v(" "),e.isMobile&&!e.isSameUser?t("div",[t("v-icon",{staticClass:"my-1",attrs:{size:"14"},on:{click:e.openBottomMenu}},[e._v("\n        fas fa-ellipsis-v\n      ")]),e._v(" "),t("v-bottom-sheet",{staticClass:"pa-0",model:{value:e.bottomMenu,callback:function(t){e.bottomMenu=t},expression:"bottomMenu"}},[t("v-sheet",{staticClass:"text-center"},[t("v-list",{attrs:{dense:""}},[e.confirmedUser?t("v-list-item",{on:{click:e.disconnect}},[t("v-list-item-title",{staticClass:"align-center d-flex"},[t("v-icon",{staticClass:"mx-4",attrs:{size:"16"}},[e._v("fas fa-minus-circle")]),e._v(" "),t("span",{staticClass:"mx-2"},[e._v("\n                  "+e._s(e.$t("peopleList.button.disconnect"))+"\n                ")])],1)],1):e.incomingUser?t("v-list-item",[t("v-list-item-title",{staticClass:"align-center d-flex"},[t("div",{on:{click:e.acceptToConnect}},[t("v-icon",{staticClass:"mx-4",attrs:{size:"16"}},[e._v("mdi-check")]),e._v(" "),t("span",{staticClass:"mx-2"},[e._v("\n                    "+e._s(e.$t("peopleList.button.acceptToConnect"))+"\n                  ")])],1),e._v(" "),t("v-divider",{attrs:{vertical:""}}),e._v(" "),t("div",{on:{click:e.refuseToConnect}},[t("v-icon",{staticClass:"mx-4",attrs:{size:"16"}},[e._v("mdi-close")]),e._v(" "),t("span",{staticClass:"mx-2"},[e._v("\n                    "+e._s(e.$t("peopleList.button.refuseToConnect"))+"\n                  ")])],1)],1)],1):e.outgoingUser?t("v-list-item",{on:{click:e.cancelRequest}},[t("v-list-item-title",{staticClass:"align-center d-flex"},[t("v-icon",{staticClass:"mx-4",attrs:{size:"16"}},[e._v("mdi-close")]),e._v(" "),t("span",{staticClass:"mx-2"},[e._v("\n                  "+e._s(e.$t("peopleList.button.cancelRequest"))+"\n                ")])],1)],1):t("v-list-item",{on:{click:e.connect}},[t("v-list-item-title",{staticClass:"align-center d-flex"},[t("v-icon",{staticClass:"mx-4",attrs:{size:"16"}},[e._v("fas fa-plus-circle")]),e._v(" "),t("span",{staticClass:"mx-2"},[e._v("\n                  "+e._s(e.$t("peopleList.button.connect"))+"\n                ")])],1)],1),e._v(" "),e._l(e.enabledProfileActionExtensions,(function(i,s){return t("v-list-item",{key:s,on:{click:function(t){return e.extensionClick(i)}}},[t("v-list-item-title",{staticClass:"align-center d-flex"},[t("v-icon",{staticClass:"mx-4",attrs:{size:"20"}},[e._v(e._s(i.class))]),e._v(" "),t("span",{staticClass:"mx-2"},[e._v("\n                  "+e._s(i.title)+"\n                ")])],1)],1)}))],2)],1)],1)],1):e._e(),e._v(" "),e.canUseActionsMenu?[t("v-btn",{staticClass:"peopleMenuIcon d-block",attrs:{title:e.$t("peopleList.label.openUserMenu"),icon:"",text:""},on:{click:function(t){e.displayActionMenu=!0}}},[t("v-icon",{attrs:{size:"21"}},[e._v("mdi-dots-vertical")])],1),e._v(" "),t("v-menu",{ref:"actionMenu",attrs:{attach:`#${e.userMenuParentId}`,transition:"slide-x-reverse-transition","content-class":"peopleActionMenu","offset-y":""},model:{value:e.displayActionMenu,callback:function(t){e.displayActionMenu=t},expression:"displayActionMenu"}},[t("v-list",{staticClass:"pa-0",attrs:{dense:""}},e._l(e.enabledProfileActionExtensions,(function(i,s){return t("v-list-item",{key:s,on:{click:function(t){return i.click(e.user)}}},[t("v-list-item-title",{staticClass:"peopleActionItem"},[t("i",{staticClass:"uiIcon",class:i.icon?i.icon:"hidden"}),e._v("\n              "+e._s(i.title)+"\n            ")])],1)})),1)],1)]:e._e()],2),e._v(" "),t("div",{staticClass:"peopleAvatar"},[t("a",{attrs:{href:e.url}},[t("v-img",{staticClass:"mx-auto",attrs:{"lazy-src":`${e.userAvatarUrl}`,src:`${e.userAvatarUrl}`,transition:"none",height:"65px",width:"65px","max-height":"65px","max-width":"65px",eager:""}})],1)]),e._v(" "),t("v-card-text",{staticClass:"peopleCardBody align-center py-0 py-sm-1"},[t("a",{staticClass:"userFullname font-weight-bold",class:e.usernameClass,attrs:{href:e.url,title:e.user.fullname}},[e._v("\n      "+e._s(e.user.fullname)+"\n      "),e.externalUser?t("span",{staticClass:"externalFlagClass"},[e._v("\n        "+e._s(e.$t("peopleList.label.external"))+"\n      ")]):e._e()]),e._v(" "),t("v-card-subtitle",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:e.userPosition,expression:"userPosition"}],staticClass:"userPositionLabel text-truncate py-0 mt-0 mt-sm-auto"})],1),e._v(" "),e.isSameUser||e.isMobile?e._e():t("v-card-actions",{staticClass:"peopleCardActions"},[t("exo-confirm-dialog",{ref:"confirmDialog",attrs:{title:e.confirmTitle,message:e.confirmMessage,"ok-label":e.$t("peopleList.label.ok"),"cancel-label":e.okMethod&&e.$t("peopleList.label.cancel")},on:{ok:e.okConfirmDialog,"dialog-closed":e.closeConfirmDialog}}),e._v(" "),!e.user.enabled||e.user.deleted?t("v-btn",{staticClass:"btn mx-auto cancelRequestButton",attrs:{depressed:"",disabled:"",block:""}},[e.user.deleted?t("span",{staticClass:"d-inline peopleDeleteButton"},[e._v("\n        "+e._s(e.$t("peopleList.label.deletedUser"))+"\n      ")]):t("span",{staticClass:"d-inline peopleDeleteButton"},[e._v("\n        "+e._s(e.$t("peopleList.label.disabledUser"))+"\n      ")]),e._v(" "),t("v-icon",{staticClass:"d-none peopleDeleteButtonMinus"},[e._v("mdi-minus")])],1):e.confirmedUser?t("v-btn",{staticClass:"btn mx-auto peopleRelationshipButton disconnectUserButton",attrs:{loading:e.sendingAction,disabled:e.sendingAction,depressed:"",block:""},on:{click:e.disconnectConfirm}},[t("i",{staticClass:"uiIconSocCancelConnectUser peopleRelationshipIcon d-inline"}),e._v(" "),t("span",{staticClass:"d-inline peopleRelationshipButtonText"},[e._v("\n        "+e._s(e.$t("peopleList.button.disconnect"))+"\n      ")]),e._v(" "),t("v-icon",{staticClass:"d-none relationshipButtonMinus"},[e._v("mdi-minus")])],1):e.incomingUser?t("div",{staticClass:"invitationButtons"},[t("div",{staticClass:"acceptToConnectButtonParent"},[t("v-btn",{staticClass:"btn mx-auto peopleRelationshipButton acceptToConnectButton",attrs:{loading:e.sendingAction,disabled:e.sendingAction,depressed:""},on:{click:e.acceptToConnect}},[t("i",{staticClass:"uiIconSocConnectUser peopleRelationshipIcon d-inline"}),e._v(" "),t("span",{staticClass:"d-flex"},[e._v("\n            "+e._s(e.$t("peopleList.button.acceptToConnect"))+"\n          ")]),e._v(" "),t("v-icon",{staticClass:"d-none relationshipButtonMinus"},[e._v("mdi-check")])],1),e._v(" "),t("v-btn",{staticClass:"btn peopleButtonMenu d-inline",attrs:{depressed:"","x-small":""},on:{click:function(t){e.displaySecondButton=!e.displaySecondButton}}},[t("v-icon",[e._v("mdi-menu-down")])],1)],1),e._v(" "),t("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.displaySecondButton,expression:"displaySecondButton"}],staticClass:"btn mx-auto peopleRelationshipButton refuseToConnectButton",attrs:{loading:e.sendingSecondAction,disabled:e.sendingSecondAction,depressed:"",block:""},on:{click:e.refuseToConnect}},[t("i",{staticClass:"uiIconSocCancelConnectUser peopleRelationshipIcon d-inline"}),e._v(" "),t("span",{staticClass:"d-flex"},[e._v("\n          "+e._s(e.$t("peopleList.button.refuseToConnect"))+"\n        ")]),e._v(" "),t("v-icon",{staticClass:"d-none relationshipButtonMinus"},[e._v("mdi-close")])],1)],1):e.outgoingUser?t("v-btn",{staticClass:"btn mx-auto peopleRelationshipButton cancelRequestButton",attrs:{loading:e.sendingAction,disabled:e.sendingAction,depressed:"",block:""},on:{click:e.cancelRequest}},[t("i",{staticClass:"uiIconSocCancelConnectUser peopleRelationshipIcon d-inline"}),e._v(" "),t("span",{staticClass:"d-inline peopleRelationshipButtonText"},[e._v("\n        "+e._s(e.$t("peopleList.button.cancelRequest"))+"\n      ")]),e._v(" "),t("v-icon",{staticClass:"d-none relationshipButtonMinus"},[e._v("mdi-close")])],1):t("v-btn",{staticClass:"btn mx-auto peopleRelationshipButton connectUserButton",attrs:{loading:e.sendingAction,disabled:e.sendingAction,depressed:"",block:""},on:{click:e.connect}},[t("i",{staticClass:"uiIconSocConnectUser peopleRelationshipIcon d-inline"}),e._v(" "),t("span",{staticClass:"d-inline peopleRelationshipButtonText"},[e._v("\n        "+e._s(e.$t("peopleList.button.connect"))+"\n      ")]),e._v(" "),t("v-icon",{staticClass:"d-none relationshipButtonMinus"},[e._v("mdi-plus")])],1)],1)],1)};p._withStripped=!0;const d=i({props:{user:{type:Object,default:null},isManager:{type:Boolean,default:!1},profileActionExtensions:{type:Array,default:()=>[]}},data:()=>({displayActionMenu:!1,waitTimeUntilCloseMenu:200,sendingAction:!1,sendingSecondAction:!1,confirmTitle:"",confirmMessage:"",okMethod:null,displaySecondButton:!1,publisherRolePromotionFeatureEnabled:eXo.env.portal.PublisherRolePromotionFeatureEnabled,bottomMenu:!1}),computed:{isSameUser(){return this.user&&this.user.username===eXo.env.portal.userName},userAvatarUrl(){let e=this.user&&this.user.avatar||`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/social/users/${this.user.username}/avatar`;return e.includes("?")?e+="&":e+="?",e+="size=65x65",e},userBannerUrl(){return this.user&&this.user.banner||`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/social/users/${this.user.username}/banner`},userMenuParentId(){return this.user&&this.user.id&&`userMenuParent-${this.user.id}`||"userMenuParent"},enabledProfileActionExtensions(){return this.profileActionExtensions&&this.user?this.isSameUser&&this.user.isManager?this.profileActionExtensions.slice().filter((e=>e.title===this.$t("peopleList.button.removeManager")||(e.title===this.$t("peopleList.button.setAsRedactor")||e.title===this.$t("peopleList.button.removeRedactor")||e.title===this.$t("peopleList.button.promotePublisher")||e.title===this.$t("peopleList.button.removePublisher"))&&e.enabled(this.user))):this.profileActionExtensions.slice().filter((e=>e.enabled(this.user))):[]},canUseActionsMenu(){return this.user&&this.enabledProfileActionExtensions.length},url(){return this.user&&this.user.username?`${eXo.env.portal.context}/${eXo.env.portal.portalName}/profile/${this.user.username}`:"#"},isMobile(){return this.$vuetify.breakpoint.xs},usernameClass(){return`${!this.user.enabled||this.user.deleted?"text-sub-title":"text-color"} ${this.isMobile?"text-truncate-2 mt-0":"text-truncate pt-1 d-block"}`},confirmedUser(){return"CONFIRMED"===this.user?.relationshipStatus},incomingUser(){return"INCOMING"===this.user?.relationshipStatus},outgoingUser(){return"OUTGOING"===this.user?.relationshipStatus},userPosition(){return this.user?.position||(this.isMobile?"--":"&nbsp;")},externalUser(){return"true"===this.user.external}},created(){$(document).on("mousedown",(()=>{this.displayActionMenu&&window.setTimeout((()=>{this.displayActionMenu=!1,this.displaySecondButton=!1}),this.waitTimeUntilCloseMenu)}))},methods:{connect(){this.sendingAction=!0,this.$userService.connect(this.user.username).then((()=>this.$emit("refresh"))).catch((e=>{console.error("Error processing action",e)})).finally((()=>{this.sendingAction=!1}))},disconnect(){this.sendingAction=!0,this.$userService.deleteRelationship(this.user.username).then((()=>this.$emit("refresh"))).catch((e=>{console.error("Error processing action",e)})).finally((()=>{this.sendingAction=!1}))},disconnectConfirm(){this.openConfirmDialog(this.$t("peopleList.title.disconnectConfirm"),this.$t("peopleList.message.disconnectConfirm",{0:`<b>${this.user.fullname}</b>`}),this.disconnect)},acceptToConnect(){this.sendingAction=!0,this.$userService.confirm(this.user.username).then((()=>this.$emit("refresh"))).catch((e=>{console.error("Error processing action",e)})).finally((()=>{this.sendingAction=!1}))},refuseToConnect(){this.sendingSecondAction=!0,this.$userService.deleteRelationship(this.user.username).then((()=>this.$emit("refresh"))).catch((e=>{console.error("Error processing action",e)})).finally((()=>{this.sendingSecondAction=!1}))},cancelRequest(){this.sendingAction=!0,this.$userService.deleteRelationship(this.user.username).then((()=>this.$emit("refresh"))).catch((e=>{console.error("Error processing action",e)})).finally((()=>{this.sendingAction=!1}))},openConfirmDialog(e,t,i){this.confirmTitle=e,this.confirmMessage=t,this.okMethod=i||null,this.$refs.confirmDialog.open()},okConfirmDialog(){this.okMethod&&this.okMethod()},closeConfirmDialog(){this.confirmTitle="",this.confirmMessage="",this.okMethod=null},openBottomMenu(){this.isSameUser||(this.bottomMenu=!0)},extensionClick(e){e.click(this.user),this.bottomMenu=!1}}},p,[],!1,null,null,null).exports;var u=function(){var e=this,t=e._self._c;return t("v-card",{staticClass:"peopleCardItem d-flex flex-column",attrs:{outlined:!e.isMobile,flat:"",hover:""}},[t("v-btn",{staticClass:"peopleInfoIcon ma-2",attrs:{absolute:"",small:"",icon:""},on:{click:function(t){return e.$emit("flip")}}},[t("v-icon",{attrs:{size:"12"}},[e._v("fa-info")])],1),e._v(" "),t("div",{staticClass:"d-flex pt-3 pb-2"},[t("p",{staticClass:"font-weight-bold ma-auto"},[e._v("\n      "+e._s(e.$t("peopleList.label.aboutMe"))+"\n    ")])]),e._v(" "),t("div",{staticClass:"aboutMeText align-center py-0 px-1 flex-grow-1"},[e.user.aboutMe?t("ellipsis",{attrs:{title:e.user.aboutMe,data:e.user.aboutMe,"line-clamp":5,"end-char":"..."}}):e._e()],1),e._v(" "),t("div",{staticClass:"d-flex pa-2 align-end flex-row"},[t("div",{staticClass:"d-flex flex-column flex-grow-0 ms-2"},[t("p",{staticClass:"font-weight-bold ma-auto mb-1"},[e._v("\n        "+e._s(e.user.connectionsCount)+"\n      ")]),e._v(" "),t("p",{staticClass:"ma-auto text-sub-title"},[e._v("\n        "+e._s(e.$t("peopleList.title.connectionsCount"))+"\n      ")])]),e._v(" "),t("div",{staticClass:"flex-grow-1"}),e._v(" "),t("div",{staticClass:"d-flex flex-column flex-grow-0 me-2"},[t("p",{staticClass:"font-weight-bold ma-auto mb-1"},[e._v("\n        "+e._s(e.user.spacesCount)+"\n      ")]),e._v(" "),t("p",{staticClass:"ma-auto text-sub-title"},[e._v("\n        "+e._s(e.$t("peopleList.title.spacesCount"))+"\n      ")])])])],1)};u._withStripped=!0;const h=i({props:{user:{type:Object,default:null}},computed:{isMobile(){return this.$vuetify.breakpoint.xs}}},u,[],!1,null,null,null).exports;var v=function(){var e=this,t=e._self._c;return t("exo-drawer",{ref:"peopleAdvancedFilterDrawer",attrs:{id:"peopleAdvancedFilterDrawer",right:""},on:{closed:e.close}},[t("template",{slot:"title"},[t("span",{staticClass:"popupTitle"},[e._v(e._s(e.$t("pepole.advanced.filter.title")))])]),e._v(" "),t("template",{slot:"content"},[t("v-form",{staticClass:"pa-2 ms-2 mt-4"},[t("div",{staticClass:"d-flex flex-column flex-grow-1"},e._l(e.settings,(function(i){return t("div",{key:i.id,staticClass:"d-flex flex-row"},[t("people-advanced-filter-input-item",{attrs:{"settings-item":i},on:{"input-value-changed":e.setValueToSearch}})],1)})),0)])],1),e._v(" "),t("template",{slot:"footer"},[t("div",{staticClass:"flex d-flex"},[t("v-btn",{attrs:{color:"primary",elevation:"0",text:"",link:""},on:{click:e.reset}},[t("v-icon",{staticClass:"pr-1",attrs:{"x-small":""}},[e._v("fas fa-redo")]),e._v("\n        "+e._s(e.$t("pepole.advanced.filter.button.reset"))+"\n      ")],1),e._v(" "),t("v-spacer"),e._v(" "),t("div",{staticClass:"d-btn"},[t("v-btn",{staticClass:"btn me-2",on:{click:e.cancel}},[[e._v("\n            "+e._s(e.$t("pepole.advanced.filter.button.cancel"))+"\n          ")]],2),e._v(" "),t("v-btn",{staticClass:"btn btn-primary",attrs:{disabled:e.disabled},on:{click:e.confirm}},[[e._v("\n            "+e._s(e.$t("pepole.advanced.filter.button.confirm"))+"\n          ")]],2)],1)],1)])],2)};v._withStripped=!0;const m=i({name:"PeopleAdvancedFilterDrawer",data:()=>({settings:[]}),created(){this.$root.$on("open-people-advanced-filter-drawer",this.openDrawer),this.getSettings()},methods:{openDrawer(){this.$refs.peopleAdvancedFilterDrawer.open()},close(){this.$refs.peopleAdvancedFilterDrawer.close()},cancel(){this.settings.forEach((e=>{e&&e.valueToSearch&&(e.valueToSearch="")})),this.$root.$emit("cancel-advanced-filter"),this.$refs.peopleAdvancedFilterDrawer.close()},reset(){this.settings.forEach((e=>{e&&e.valueToSearch&&(e.valueToSearch="")})),this.$root.$emit("reset-advanced-filter"),this.$root.$emit("reset-advanced-filter-count")},getSettings(){return this.$profileSettingsService.getSettings().then((e=>{this.settings=e.filter((e=>e.active&&null===e.parentId)).map((e=>({...e,valueToSearch:""})))||[]}))},confirm(){const e={};this.settings.forEach((t=>{t&&t.valueToSearch&&(e[t.propertyName]=t.valueToSearch)})),this.$root.$emit("advanced-filter",e);const t=Object.keys(e).length||0;this.$root.$emit("advanced-filter-count",t),this.close()},setValueToSearch(e){this.settings.forEach((t=>{t.id===e.itemId&&(t.valueToSearch=e.valueTosearch)}))}}},v,[],!1,null,null,null).exports;var f=function(){var e=this;return(0,e._self._c)("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValueItem,expression:"inputValueItem"}],staticClass:"input-block-level ignore-vuetify-classes my-3",attrs:{placeholder:e.itemResolvedName,type:"text"},domProps:{value:e.inputValueItem},on:{input:function(t){t.target.composing||(e.inputValueItem=t.target.value)}}})};f._withStripped=!0;const b={"people-list":s,"people-card-list":o,"people-toolbar":a,"people-card":c,"people-card-front":d,"people-card-reverse":h,"people-advanced-filter-drawer":m,"people-advanced-filter-input-item":i({name:"AdvancedFilterInputItem",props:{settingsItem:{type:Object,default:null}},data:()=>({inputValueItem:""}),created(){this.$root.$on("reset-advanced-filter",(()=>this.inputValueItem="")),this.$root.$on("cancel-advanced-filter",(()=>this.inputValueItem=""))},computed:{itemResolvedName(){const e=this.settingsItem,t=eXo&&eXo.env.portal.language||"en",i=e.labels.find((e=>e.language===t));return i?i.label:this.$t&&this.$t(`profileSettings.property.name.${e.propertyName}`)!==`profileSettings.property.name.${e.propertyName}`?this.$t(`profileSettings.property.name.${e.propertyName}`):e.propertyName}},watch:{inputValueItem(){this.$emit("input-value-changed",{itemId:this.settingsItem.id,valueTosearch:this.inputValueItem})}}},f,[],!1,null,null,null).exports};for(const e in b)Vue.component(e,b[e]);if(extensionRegistry){const e=extensionRegistry.loadComponents("peopleList");e&&e.length>0&&e.forEach((e=>{Vue.component(e.componentName,e.componentOptions)}))}return e})()));