define((()=>(()=>{"use strict";var e={};(e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(e);var t=function(){var e=this,t=e._self._c;return t("exo-drawer",{ref:"versionHistoryDrawer",staticClass:"versionHistoryDrawer",attrs:{"show-overlay":"",right:""},on:{closed:e.closed}},[t("template",{slot:"title"},[e._v("\n    "+e._s(e.$t("versionHistory.label.title"))+"\n  ")]),e._v(" "),t("template",{slot:"content"},[e.isLoading||0!==e.versions.length?e._e():t("div",{staticClass:"text-center mt-5"},[t("p",{staticClass:"grey--text darken-1"},[e._v("\n        "+e._s(e.$t("versionHistory.label.empty"))+"\n      ")])]),e._v(" "),t("v-list",{staticClass:"ma-3"},[t("v-list-item-group",{attrs:{"active-class":"bg-active"}},[t("v-slide-y-transition",{attrs:{group:""}},e._l(e.versions,(function(i){return t("v-list-item",{key:i.id,staticClass:"history-line pa-2 mb-2 border-color border-radius d-block",class:[i.current?"light-grey-background-color":""],on:{click:function(t){return e.openVersion(i)}}},[t("version-card",{attrs:{version:i,"can-manage":e.canManage,"disable-restore-version":e.disableRestoreVersion,"enable-edit-description":e.enableEditDescription},on:{"version-update-description":e.updateVersionDescription,"restore-version":e.restoreVersion}})],1)})),1)],1)],1)],1),e._v(" "),e.showLoadMore?t("template",{slot:"footer"},[t("div",{staticClass:"d-flex mx-4"},[t("v-btn",{staticClass:"primary--text mx-auto",attrs:{loading:e.isLoading,text:""},on:{click:e.loadMore}},[e._v("\n        "+e._s(e.$t("versionHistory.button.loadMore"))+"\n      ")])],1)]):e._e()],2)};function i(e,t,i,s,n,r,o,a){var c,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=i,d._compiled=!0),s&&(d.functional=!0),r&&(d._scopeId="data-v-"+r),o?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},d._ssrRegister=c):n&&(c=a?function(){n.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:n),c)if(d.functional){d._injectStyles=c;var l=d.render;d.render=function(e,t){return c.call(t),l(e,t)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,c):[c]}return{exports:e,options:d}}t._withStripped=!0;const s=i({props:{versions:{type:Array,default:()=>null},canManage:{type:Boolean,default:()=>!1},showLoadMore:{type:Boolean,default:()=>!1},isLoading:{type:Boolean,default:()=>!1},enableEditDescription:{type:Boolean,default:()=>!1},disableRestoreVersion:{type:Boolean,default:()=>!1}},watch:{isLoading(){this.isLoading?this.$refs.versionHistoryDrawer.startLoading():this.$refs.versionHistoryDrawer.endLoading()}},methods:{open(){this.$refs.versionHistoryDrawer.open()},closed(){this.$emit("drawer-closed")},loadMore(){this.$emit("load-more")},openVersion(e){this.$emit("open-version",e)},updateVersionDescription(e,t){this.$emit("version-update-description",e,t)},restoreVersion(e){this.$emit("restore-version",e)}}},t,[],!1,null,null,null).exports;var n=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"author-date-wrapper d-flex justify-space-between"},[t("div",{staticClass:"version-author"},[t("v-chip",{staticClass:"ma-0 px-2 font-weight-bold",attrs:{color:"primary","x-small":"",label:""}},[e._v("\n        V"+e._s(e.versionObject.versionNumber)+"\n      ")]),e._v(" "),t("span",{staticClass:"font-weight-bold text-truncate"},[e._v(e._s(e.versionObject.authorFullName))])],1),e._v(" "),t("div",{staticClass:"version-update-date"},[t("date-format",{staticClass:"text-light-color text-truncate caption",attrs:{value:e.versionDate,format:e.dateTimeFormat}})],1)]),e._v(" "),t("div",{staticClass:"mb-1 description-restore-wrapper d-flex justify-space-between pt-2"},[e.enableEditDescription?t("div",{staticClass:"flex item-version-description"},[!e.versionObject.summary&&e.descriptionInputHidden?t("a",{staticClass:"descriptionContent position-relative dark-grey-color",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.showInput.apply(null,arguments)}}},[e._v("\n        "+e._s(e.$t("versionHistory.description.add"))+"\n      ")]):e._e(),e._v(" "),e.isUpdatingDescription?t("v-progress-circular",{attrs:{size:20,color:"primary",indeterminate:""}}):e.descriptionInputHidden?t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:i,attrs:s}){return[t("p",e._g(e._b({staticClass:"descriptionContent pa-0 text-truncate position-relative dark-grey-color",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.showInput.apply(null,arguments)}}},"p",s,!1),i),[e._v("\n            "+e._s(e.versionObject.summary)+"\n          ")])]}}],null,!1,439840838)},[e._v(" "),t("div",{staticClass:"caption tooltip-version text-break"},[e._v("\n          "+e._s(e.versionObject.summary)+"\n        ")])]):e._e(),e._v(" "),e.canManage?t("v-text-field",{directives:[{name:"show",rawName:"v-show",value:!e.descriptionInputHidden&&!e.isUpdatingDescription,expression:"!descriptionInputHidden && !isUpdatingDescription"}],ref:"NewDescriptionInput",staticClass:"description pa-0 dark-grey-color",attrs:{placeholder:e.$t("versionHistory.description.placeholder"),outlined:"",dense:"",autofocus:""},on:{click:function(e){e.stopPropagation(),e.preventDefault()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateDescription.apply(null,arguments)}},model:{value:e.newDescription,callback:function(t){e.newDescription=t},expression:"newDescription"}},[t("div",{staticClass:"d-flex mt-1",attrs:{slot:"append"},slot:"append"},[t("v-btn",{staticClass:"mt-n1 me-n2 pb-1",attrs:{icon:"",small:"",disabled:e.descriptionMaxLengthReached},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.updateDescription.apply(null,arguments)}}},[t("v-icon",{staticClass:"px-1 ma-0",class:e.descriptionMaxLengthReached?"not-allowed":"clickable",attrs:{color:e.descriptionMaxLengthReached?"grey--text":"primary",small:""}},[e._v("\n              fa-check\n            ")])],1),e._v(" "),t("v-btn",{staticClass:"mt-n1 me-n2 pb-1",attrs:{small:"",icon:""}},[t("v-icon",{staticClass:"clickable px-0 ma-0",attrs:{color:"red",small:""},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.resetInput.apply(null,arguments)}}},[e._v("\n              fa-times\n            ")])],1)],1)]):e._e()],1):e._e(),e._v(" "),e.versionObject.current||!e.canManage||e.disableRestoreVersion?e._e():t("div",{directives:[{name:"show",rawName:"v-show",value:e.descriptionInputHidden,expression:"descriptionInputHidden"}],staticClass:"item-version-restore"},[t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:i,attrs:s}){return[t("v-btn",e._g(e._b({attrs:{icon:"",loading:e.isRestoringVersion,small:"",color:"primary"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.restoreVersion.apply(null,arguments)}}},"v-btn",s,!1),i),[t("v-icon",{staticClass:"primary--text clickable pa-0 mt-1",attrs:{size:"22"}},[e._v("\n              mdi-restart\n            ")])],1)]}}],null,!1,3680735955)},[e._v(" "),t("span",{staticClass:"caption"},[e._v(e._s(e.$t("versionHistory.label.restore")))])])],1)])])};n._withStripped=!0;const r={"version-history-drawer":s,"version-card":i({props:{version:{type:Object,default:()=>({})},enableEditDescription:{type:Boolean,default:()=>!1},disableRestoreVersion:{type:Boolean,default:()=>!1},canManage:{type:Boolean,default:()=>!1}},data:()=>({dateTimeFormat:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"},MAX_DESCRIPTION_LENGTH:500,descriptionInputHidden:!0,newDescription:"",versionObject:{},isUpdatingDescription:!1,isRestoringVersion:!1}),created(){this.$root.$on("version-restored",this.handleVersionRestore),this.$root.$on("version-restore-error",this.handleVersionRestoreError),this.$root.$on("version-description-updated",this.handleDescriptionUpdated),this.$root.$on("version-description-update-error",this.handleDescriptionUpdateError),this.versionObject=Object.assign({},this.version)},beforeDestroy(){this.$root.$off("version-restored",this.handleVersionRestore),this.$root.$off("version-restore-error",this.handleVersionRestoreError),this.$root.$off("version-description-updated",this.handleDescriptionUpdated),this.$root.$off("version-description-update-error",this.handleDescriptionUpdateError)},computed:{versionDate(){return this.versionObject?.updatedDate?.time||this.versionObject?.createdDate?.time},descriptionMaxLengthReached(){return this.newDescription&&this.newDescription.length>this.MAX_DESCRIPTION_LENGTH}},methods:{handleVersionRestore(e){this.versionObject.current=this.versionObject.id===e.id,this.isRestoringVersion=!1},handleVersionRestoreError(){this.isRestoringVersion=!1},handleDescriptionUpdated(e){e.id===this.version.id&&(this.versionObject.summary=e.summary,this.isUpdatingDescription=!1,this.descriptionInputHidden=!0)},handleDescriptionUpdateError(e){e.id===this.version.id&&(this.isUpdatingDescription=!1,this.descriptionInputHidden=!1)},resetInput(){this.descriptionInputHidden=!0},updateDescription(){this.descriptionMaxLengthReached||(this.isUpdatingDescription=!0,this.$emit("version-update-description",this.versionObject,this.newDescription))},showInput(){this.newDescription=this.versionObject.summary,this.descriptionInputHidden=!this.descriptionInputHidden},restoreVersion(){this.isRestoringVersion=!0,this.$emit("restore-version",this.versionObject)}}},n,[],!1,null,null,null).exports};for(const e in r)Vue.component(e,r[e]);if(extensionRegistry){const e=extensionRegistry.loadComponents("VersionHistoryDrawer");e&&e.length>0&&e.forEach((e=>{Vue.component(e.componentName,e.componentOptions)}))}return e})()));