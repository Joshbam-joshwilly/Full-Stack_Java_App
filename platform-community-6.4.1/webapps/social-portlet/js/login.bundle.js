define((()=>(()=>{"use strict";var e={d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{init:()=>k});var r=function(){var e=this,t=e._self._c;return t("portal-login-template",{attrs:{params:e.params,"branding-image":"",center:""}},[t("portal-login-main",{attrs:{params:e.params}})],1)};function o(e,t,r,o,i,s,a,n){var l,p="function"==typeof e?e.options:e;if(t&&(p.render=t,p.staticRenderFns=r,p._compiled=!0),o&&(p.functional=!0),s&&(p._scopeId="data-v-"+s),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},p._ssrRegister=l):i&&(l=n?function(){i.call(this,(p.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(p.functional){p._injectStyles=l;var d=p.render;p.render=function(e,t){return l.call(t),d(e,t)}}else{var m=p.beforeCreate;p.beforeCreate=m?[].concat(m,l):[l]}return{exports:e,options:p}}r._withStripped=!0;const i=o({props:{params:{type:Object,default:null}},created(){document.title=this.$t("UILoginForm.label.login")},mounted(){this.$root.$applicationLoaded()}},r,[],!1,null,null,null).exports;var s=function(){var e=this,t=e._self._c;return t("v-card",{staticClass:"mx-auto",attrs:{width:"350px","max-width":"100%",flat:""}},[e.registerEnabled?t("div",{staticClass:"center my-3"},[e._v("\n    "+e._s(e.$t("UILoginForm.label.registerNewAccount"))+"\n    "),t("a",{staticClass:"text-decoration-underline",attrs:{title:e.$t("UILoginForm.button.registerNewAccount"),href:"/portal/register"}},[e._v("\n      "+e._s(e.$t("UILoginForm.button.registerNewAccount"))+"\n    ")])]):e._e(),e._v(" "),t("portal-login-main-top-extensions",{attrs:{params:e.params,rememberme:e.rememberme}}),e._v(" "),t("portal-login-providers",{attrs:{params:e.params,rememberme:e.rememberme}}),e._v(" "),t("form",{ref:"form",staticClass:"d-flex ma-0 flex-column",attrs:{name:"form",action:"/portal/login",method:"post",autocomplete:"off"},on:{submit:function(t){return e.validateForm()}}},[e.initialUri?t("input",{attrs:{type:"hidden",name:"initialURI"},domProps:{value:e.initialUri}}):e._e(),e._v(" "),t("div",{staticClass:"pa-0"},[t("v-row",{staticClass:"ma-0 pa-0"},[t("v-text-field",{staticClass:"login-username border-box-sizing",attrs:{id:"username",title:e.$t("portal.login.Username"),placeholder:e.$t("portal.login.Username"),readonly:e.disabled,autofocus:!e.disabled&&"autofocus","prepend-inner-icon":"fas fa-user ms-n2 grey--text text--lighten-1",name:"username","aria-required":"true",type:"text",tabindex:"0",required:"required",outlined:"",dense:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),e._v(" "),t("v-row",{staticClass:"ma-0 pa-0"},[t("v-text-field",{staticClass:"login-password border-box-sizing",attrs:{id:"password",title:e.$t("portal.login.Password"),placeholder:e.$t("portal.login.Password"),type:e.passwordType,"append-icon":e.showPassword?"fas fa-eye-slash subtitle-1 mt-0":"fas fa-eye subtitle-1 mt-0",readonly:e.disabled,"prepend-inner-icon":"fas fa-lock ms-n2 grey--text text--lighten-1",name:"password",required:"required",outlined:"",dense:""},on:{"click:append":e.toggleShow},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),t("v-row",{staticClass:"d-flex flex-column flex-sm-row ma-0 py-0 px-3 px-sm-0",attrs:{flat:""}},[t("v-checkbox",{staticClass:"mx-0 my-3 my-sm-0",attrs:{id:"rememberme",label:e.$t("portal.login.RememberOnComputer"),value:e.rememberme,name:"rememberme","on-icon":"fas fa-check-square",dense:""},model:{value:e.rememberme,callback:function(t){e.rememberme=t},expression:"rememberme"}}),e._v(" "),t("v-spacer"),e._v(" "),t("a",{staticClass:"text-decoration-underline d-flex",attrs:{href:e.forgotPasswordPath,title:e.$t("portal.login.forgotPassword")}},[t("span",{staticClass:"v-label theme--light pb-2px my-auto"},[e._v("\n            "+e._s(e.$t("portal.login.forgotPassword"))+"\n          ")])])],1),e._v(" "),t("v-row",{staticClass:"mx-0 mt-8 pa-0 loginButton"},[t("v-btn",{staticClass:"mx-auto login-button text-none",attrs:{id:"loginButton","aria-label":e.$t("portal.login.Signin"),type:e.disabled?"button":"submit",loading:e.loading,width:"222","max-width":"100%",color:"primary",elevation:"0"}},[e._v("\n          "+e._s(e.$t("portal.login.Signin"))+"\n        ")])],1)],1)]),e._v(" "),t("portal-login-main-bottom-extensions",{attrs:{params:e.params,rememberme:e.rememberme}})],1)};s._withStripped=!0;const a=o({props:{params:{type:Object,default:null}},data:()=>({rememberme:!0,loading:!1,username:"",showPassword:!1}),computed:{passwordType(){return this.showPassword?"text":"password"},disabled(){return this.params?.disabled},initialUri(){return this.params?.initialUri},forgotPasswordPath(){return this.params?.forgotPasswordPath},registerEnabled(){return this.params?.registerEnabled},errorCode(){return this.params?.errorCode},errorMessage(){return this.errorCode&&this.$te(`UILoginForm.label.${this.errorCode}`)&&this.$t(`UILoginForm.label.${this.errorCode}`)||this.errorCode},extensionParams(){return{params:this.params,rememberme:this.rememberme}}},mounted(){this.disabled||this.setupUserName()},methods:{setupUserName(){const e=new URLSearchParams(window.location.search);e.has("username")?this.username=e.get("username"):e.has("email")&&(this.username=e.get("email"))},toggleShow(){this.showPassword=!this.showPassword},validateForm(){return this.loading=this.$refs.form.reportValidity(),window.setTimeout((()=>this.loading=!1),1e4),!this.disabled}}},s,[],!1,null,null,null).exports;var n=function(){var e=this,t=e._self._c;return t("extension-registry-components",{attrs:{params:e.extensionParams,name:"LoginHeader",type:"login-header","parent-element":"div",element:"div"},scopedSlots:e._u([{key:"separator",fn:function(){return[t("portal-login-separator",{staticClass:"my-5"})]},proxy:!0},{key:"footer",fn:function(){return[t("portal-login-separator",{staticClass:"mt-5"})]},proxy:!0}])})};n._withStripped=!0;const l=o({props:{params:{type:Object,default:null},rememberme:{type:Boolean,default:!1}},computed:{extensionParams(){return{params:this.params,rememberme:this.rememberme}}}},n,[],!1,null,null,null).exports;var p=function(){var e=this,t=e._self._c;return t("extension-registry-components",{attrs:{params:e.extensionParams,name:"LoginFooter",type:"login-footer","parent-element":"div",element:"div"},scopedSlots:e._u([{key:"separator",fn:function(){return[t("portal-login-separator",{staticClass:"my-5"})]},proxy:!0},{key:"header",fn:function(){return[t("portal-login-separator",{staticClass:"my-5"})]},proxy:!0}])})};p._withStripped=!0;const d=o({props:{params:{type:Object,default:null},rememberme:{type:Boolean,default:!1}},computed:{extensionParams(){return{params:this.params,rememberme:this.rememberme}}}},p,[],!1,null,null,null).exports;var m=function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex"},[t("v-divider",{staticClass:"my-auto secondary login-separator"}),e._v(" "),t("span",{staticClass:"mx-3 text-uppercase"},[e._v("\n    "+e._s(e.$t("UILoginForm.label.or"))+"\n  ")]),e._v(" "),t("v-divider",{staticClass:"my-auto secondary login-separator"})],1)};m._withStripped=!0;const u=o({},m,[],!1,null,null,null).exports;var c=function(){var e=this,t=e._self._c;return t("v-card",{attrs:{id:"login-extensions",flat:""}},[e.providers.length?[t("v-card",{staticClass:"d-flex mx-auto mt-5",attrs:{width:e.mainProvidersWidth,flat:""}},[e._l(e.mainProviders,(function(r,o){return t(r.vueComponentName||"portal-login-provider-link",{key:r.key,tag:"component",staticClass:"mx-auto",class:0===o?"flex-grow-0":"flex-grow-1 text-end",attrs:{provider:r,rememberme:e.rememberme,params:e.params,"display-text":1===e.providers.length}})})),e._v(" "),e.displayMoreMenu?t("portal-login-providers-menu",{key:"providerMenu",staticClass:"flex-grow-1 text-end mx-auto",attrs:{providers:e.menuProviders,params:e.params,rememberme:e.rememberme}}):e._e()],2),e._v(" "),t("portal-login-separator",{staticClass:"mt-5"})]:e._e()],2)};c._withStripped=!0;const v=o({props:{params:{type:Object,default:null},rememberme:{type:Boolean,default:!1}},data:()=>({providers:[],extensionName:"LoginProvider",extensionType:"login-provider"}),computed:{oAuthEnabled(){return this.params?.oAuthEnabled},oAuthProviderTypes(){return this.params?.oAuthProviderTypes||[]},oAuthProviders(){return this.oAuthEnabled&&this.params?.oAuthProviderTypes?.map((e=>({key:e,url:this.params[`oAuthInitURL-${e}`],rank:0})))||[]},mainProviders(){return this.providers.length>4?this.providers.slice(0,3):this.providers},menuProviders(){return this.providers.length>4?this.providers.slice(3):[]},displayMoreMenu(){return this.menuProviders.length>0},mainProvidersWidth(){return 2===this.mainProviders.length&&82*this.mainProviders.length||""}},created(){this.refreshProviders(),document.addEventListener(`extension-${this.extensionName}-${this.extensionType}-updated`,this.refreshProviders)},methods:{refreshProviders(){const e=this.oAuthProviders.slice(),t=extensionRegistry.loadExtensions(this.extensionName,this.extensionType);t?.length&&t.forEach((t=>{t.isEnabled&&t.isEnabled(this.params)&&e.push(t)})),this.providers=e.sort(((e,t)=>(t.rank||0)-(e.rank||0)))}}},c,[],!1,null,null,null).exports;var h=function(){var e=this,t=e._self._c;return t("v-card",{attrs:{id:"login-providers-menu",flat:""}},[t("v-menu",{attrs:{"offset-x":"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:r,attrs:o}){return[t("v-btn",e._g(e._b({staticClass:"pa-4",attrs:{title:e.$t("UILoginForm.label.moreProviders"),"aria-label":e.$t("UILoginForm.label.moreProviders"),"min-width":"auto",color:"primary",large:"",outlined:""}},"v-btn",o,!1),r),[t("v-icon",{attrs:{size:"20"}},[e._v("fas fa-ellipsis-h")])],1)]}}])},[e._v(" "),t("v-list",{attrs:{dense:""}},e._l(e.providers,(function(r){return t(r.vueComponentName||"portal-login-provider-menu-link",{key:r.key,tag:"component",staticClass:"mx-auto",attrs:{provider:r,rememberme:e.rememberme,params:e.params,"display-text":"","is-menu":""}})})),1)],1)],1)};h._withStripped=!0;const g=o({props:{params:{type:Object,default:null},providers:{type:Array,default:null},rememberme:{type:Boolean,default:!1}}},h,[],!1,null,null,null).exports;var f=function(){var e=this,t=e._self._c;return t("div",[t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:r,attrs:o}){return[t("v-btn",e._g(e._b({staticClass:"pa-4 text-none",attrs:{id:e.id,href:e.link,target:e.targetLink,"aria-label":e.providerButtonLabel,"min-width":"auto",color:"primary",outlined:"",large:""},on:{click:e.clickOnProviderButton}},"v-btn",o,!1),r),[e.providerImage?t("v-img",{class:e.displayText&&"me-2",attrs:{src:e.providerImage,height:"25","max-width":"25",eager:""}}):t("v-icon",{class:e.providerIcon}),e._v(" "),e.displayText?t("span",{staticClass:"text-truncate"},[e._v(e._s(e.providerButtonLabel))]):e._e()],1)]}}])},[e._v(" "),t("span",[e._v(e._s(e.providerButtonLabel))])])],1)};f._withStripped=!0;const b=o({props:{provider:{type:Object,default:null},params:{type:Object,default:null},displayText:{type:Boolean,default:!1},rememberme:{type:Boolean,default:!1}},data:()=>({defaultProviders:["facebook","openid","linkedin","twitter","google"]}),computed:{providerKeyLowerCase(){return this.provider?.key?.toLowerCase()},providerKeyCapitalize(){return`${this.providerKeyLowerCase.charAt(0).toUpperCase()}${this.providerKeyLowerCase.substring(1)}`},id(){return`login-${this.providerKeyLowerCase}`},link(){const e=this.provider?.url;return e&&e.startsWith("/")&&this.rememberme&&`${e}&_rememberme=true`||e},targetLink(){return this.link&&this.link.startsWith("/")?"_self":"_blank"},providerButtonLabel(){const e=this.$te(`UILoginForm.label.provider.${this.providerKeyLowerCase}`)?this.$t(`UILoginForm.label.provider.${this.providerKeyLowerCase}`):this.providerKeyCapitalize;return this.$t("UILoginForm.label.singInWith",{0:e})},providerIcon(){return this.provider?.icon},providerImage(){const e=this.provider?.image;return!e&&this.defaultProviders.indexOf(this.providerKeyLowerCase)>=0?`/eXoSkin/skin/images/themes/default/platform/portlets/extensions/${this.providerKeyLowerCase}.png`:e}},methods:{clickOnProviderButton(){this.$emit("submit")}}},f,[],!1,null,null,null).exports;var y=function(){var e=this,t=e._self._c;return t("v-list-item",{attrs:{id:e.id,href:e.link,target:e.targetLink,"min-width":"auto",rel:"nofollow noreferrer noopener",color:"primary",outlined:"",dense:""},on:{click:e.clickOnProviderButton}},[t("v-list-item-icon",{staticClass:"me-2"},[e.providerImage?t("v-img",{staticClass:"my-auto me-2",attrs:{src:e.providerImage,height:"16","max-width":"16",eager:""}}):t("v-icon",{class:e.providerIcon})],1),e._v(" "),t("v-list-item-content",[t("v-list-item-title",{staticClass:"text-truncate"},[e._v(e._s(e.providerButtonLabel))])],1)],1)};y._withStripped=!0;const x={"portal-login":i,"portal-login-main":a,"portal-login-main-top-extensions":l,"portal-login-main-bottom-extensions":d,"portal-login-providers":v,"portal-login-providers-menu":g,"portal-login-provider-link":b,"portal-login-provider-menu-link":o({props:{provider:{type:Object,default:null},params:{type:Object,default:null},rememberme:{type:Boolean,default:!1}},data:()=>({defaultProviders:["facebook","openid","linkedin","twitter","google"]}),computed:{providerKeyLowerCase(){return this.provider?.key?.toLowerCase()},providerKeyCapitalize(){return`${this.providerKeyLowerCase.charAt(0).toUpperCase()}${this.providerKeyLowerCase.substring(1)}`},id(){return`login-${this.providerKeyLowerCase}`},link(){const e=this.provider?.url;return e&&e.startsWith("/")&&this.rememberme&&`${e}&_rememberme=true`||e},targetLink(){return this.link&&this.link.startsWith("/")?"_self":"_blank"},providerButtonLabel(){const e=this.$te(`UILoginForm.label.provider.${this.providerKeyLowerCase}`)?this.$t(`UILoginForm.label.provider.${this.providerKeyLowerCase}`):this.providerKeyCapitalize;return this.$t("UILoginForm.label.singInWith",{0:e})},providerIcon(){return this.provider?.icon},providerImage(){const e=this.provider?.image;return!e&&this.defaultProviders.indexOf(this.providerKeyLowerCase)>=0?`/eXoSkin/skin/images/themes/default/platform/portlets/extensions/${this.providerKeyLowerCase}.png`:e}},methods:{clickOnProviderButton(){this.$emit("submit")}}},y,[],!1,null,null,null).exports,"portal-login-separator":u};for(const e in x)Vue.component(e,x[e]);const _=extensionRegistry.loadComponents("Login");_&&_.length>0&&_.forEach((e=>{Vue.component(e.componentName,e.componentOptions)}));const w="loginApplication",C="undefined"!=typeof eXo?eXo.env.portal.language:"en",$=[`${eXo.env.portal.context}/${eXo.env.portal.rest}/i18n/bundle/locale.portlet.Login-${C}.json`,`${eXo.env.portal.context}/${eXo.env.portal.rest}/i18n/bundle/locale.portal.login-${C}.json`];function k(e){exoi18n.loadLanguageAsync(C,$).then((t=>{Vue.createApp({data:{params:e},template:`<portal-login id="${w}" :params="params" />`,vuetify:Vue.prototype.vuetifyOptions,i18n:t},`#${w}`,"Login")})),Object.keys(window.requirejs?.s?.contexts?._?.registry).filter((e=>e.includes("LoginExtension"))).forEach((e=>{window.require([e],(e=>e.init&&e.init()))}))}return t})()));