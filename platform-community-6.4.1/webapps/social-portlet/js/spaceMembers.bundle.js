define((()=>(()=>{"use strict";var e={d:(t,i)=>{for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{init:()=>u});var i=function(){var e=this,t=e._self._c;return t("v-app",{staticClass:"transparent",attrs:{flat:""}},[t("space-members-toolbar",{attrs:{keyword:e.keyword,filter:e.filter,"people-count":e.peopleCount,"is-manager":e.isManager},on:{"keyword-changed":function(t){e.keyword=t},"filter-changed":function(t){e.filter=t},"invite-users":function(t){return e.$refs.spaceInvitationDrawer.open()},refresh:e.refreshInvited}}),e._v(" "),e.space?t("alert-space-members",{attrs:{"space-display-name":e.space.displayName}}):e._e(),e._v(" "),t("people-card-list",{ref:"spaceMembers",attrs:{keyword:e.keyword,filter:e.filter,"loading-people":e.loadingPeople,"space-id":e.spaceId,"people-count":e.peopleCount,"is-manager":e.isManager},on:{loaded:e.peopleLoaded}}),e._v(" "),t("space-invitation-drawer",{ref:"spaceInvitationDrawer",attrs:{"is-external-feature-enabled":e.isExternalFeatureEnabled},on:{refresh:e.refreshInvited}})],1)};function s(e,t,i,s,a,r,n,l){var o,p="function"==typeof e?e.options:e;if(t&&(p.render=t,p.staticRenderFns=i,p._compiled=!0),s&&(p.functional=!0),r&&(p._scopeId="data-v-"+r),n?(o=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},p._ssrRegister=o):a&&(o=l?function(){a.call(this,(p.functional?this.parent:this).$root.$options.shadowRoot)}:a),o)if(p.functional){p._injectStyles=o;var c=p.render;p.render=function(e,t){return o.call(t),c(e,t)}}else{var d=p.beforeCreate;p.beforeCreate=d?[].concat(d,o):[o]}return{exports:e,options:p}}i._withStripped=!0;const a=s({props:{isManager:{type:Boolean,default:!1},spaceId:{type:Number,default:0},filter:{type:String,default:null},isExternalFeatureEnabled:{type:Boolean,default:!0}},data:()=>({keyword:null,peopleCount:0,loadingPeople:!1,space:null,publisherRolePromotionFeatureEnabled:eXo.env.portal.PublisherRolePromotionFeatureEnabled}),created(){this.$spaceService.getSpaceById(eXo.env.portal.spaceId).then((e=>{this.space=e})).finally((()=>this.$root.$applicationLoaded())),this.isManager&&(extensionRegistry.registerExtension("space-member-extension","action",{id:"spaceMembers-removeMember",title:this.$t("peopleList.button.removeMember"),icon:"uiIconTrash",order:0,enabled:e=>("member"===this.filter||"manager"===this.filter||"redactor"===this.filter||"publisher"===this.filter)&&e.isMember&&!e.isGroupBound,click:e=>{this.$spaceService.removeMember(eXo.env.portal.spaceName,e.username).then((()=>this.$refs.spaceMembers.searchPeople()))}}),extensionRegistry.registerExtension("space-member-extension","action",{id:"spaceMembers-removeManager",title:this.$t("peopleList.button.removeManager"),icon:"uiIconMemberAdmin",order:1,enabled:e=>e.isManager&&("member"===this.filter||"manager"===this.filter||"redactor"===this.filter||"publisher"===this.filter),click:e=>{this.$spaceService.removeManager(eXo.env.portal.spaceName,e.username).then((()=>this.$refs.spaceMembers.searchPeople()))}}),extensionRegistry.registerExtension("space-member-extension","action",{id:"spaceMembers-promoteManager",title:this.$t("peopleList.button.promoteManager"),icon:"uiIconMemberAdmin",order:1,enabled:e=>e.enabled&&!e.deleted&&("member"===this.filter||"manager"===this.filter||"redactor"===this.filter||"publisher"===this.filter)&&!e.isManager,click:e=>{this.$spaceService.promoteManager(eXo.env.portal.spaceDisplayName,e.username).then((()=>this.$refs.spaceMembers.searchPeople()))}}),extensionRegistry.registerExtension("space-member-extension","action",{id:"spaceMembers-setAsRedactor",title:this.$t("peopleList.button.setAsRedactor"),icon:"uiIconEditMembership",order:1,enabled:e=>e.enabled&&!e.deleted&&("member"===this.filter||"manager"===this.filter||"redactor"===this.filter||"publisher"===this.filter)&&!e.isSpaceRedactor,click:e=>{this.$spaceService.setAsRedactor(eXo.env.portal.spaceDisplayName,e.username).then((()=>this.$refs.spaceMembers.searchPeople()))}}),extensionRegistry.registerExtension("space-member-extension","action",{id:"spaceMembers-removeRedactor",title:this.$t("peopleList.button.removeRedactor"),icon:"uiIconEditMembership",order:1,enabled:e=>e.isSpaceRedactor&&("member"===this.filter||"manager"===this.filter||"redactor"===this.filter||"publisher"===this.filter),click:e=>{this.$spaceService.removeRedactor(eXo.env.portal.spaceName,e.username).then((()=>this.$refs.spaceMembers.searchPeople()))}}),extensionRegistry.registerExtension("space-member-extension","action",{id:"spaceMembers-promotePublisher",title:this.$t("peopleList.button.promotePublisher"),icon:"fa fa-paper-plane",order:1,enabled:e=>this.publisherRolePromotionFeatureEnabled&&e.enabled&&!e.deleted&&("member"===this.filter||"manager"===this.filter||"redactor"===this.filter||"publisher"===this.filter)&&!e.isSpacePublisher,click:e=>{this.$spaceService.promotePublisher(eXo.env.portal.spaceDisplayName,e.username).then((()=>this.$refs.spaceMembers.searchPeople()))}}),extensionRegistry.registerExtension("space-member-extension","action",{id:"spaceMembers-removePublisher",title:this.$t("peopleList.button.removePublisher"),icon:"fa fa-paper-plane",order:1,enabled:e=>this.publisherRolePromotionFeatureEnabled&&e.isSpacePublisher&&("member"===this.filter||"manager"===this.filter||"redactor"===this.filter||"publisher"===this.filter),click:e=>{this.$spaceService.removePublisher(eXo.env.portal.spaceName,e.username).then((()=>this.$refs.spaceMembers.searchPeople()))}}),extensionRegistry.registerExtension("space-member-extension","action",{id:"spaceMembers-cancelInvitation",title:this.$t("peopleList.button.cancelInvitation"),icon:"uiIconTrash",order:1,enabled:e=>"invited"===this.filter&&e.isInvited,click:e=>{this.$spaceService.cancelInvitation(eXo.env.portal.spaceDisplayName,e.username).then((()=>this.$refs.spaceMembers.searchPeople()))}}),extensionRegistry.registerExtension("space-member-extension","action",{id:"spaceMembers-acceptPending",title:this.$t("peopleList.button.acceptPending"),icon:"uiIconUserCheck",order:1,enabled:e=>e.enabled&&!e.deleted&&"pending"===this.filter&&e.isPending,click:e=>{this.$spaceService.acceptUserRequest(eXo.env.portal.spaceDisplayName,e.username).then((()=>this.$refs.spaceMembers.searchPeople()))}}),extensionRegistry.registerExtension("space-member-extension","action",{id:"spaceMembers-refusePending",title:this.$t("peopleList.button.refusePending"),icon:"uiIconTrash",order:1,enabled:e=>"pending"===this.filter&&e.isPending,click:e=>{this.$spaceService.refuseUserRequest(eXo.env.portal.spaceDisplayName,e.username).then((()=>this.$refs.spaceMembers.searchPeople()))}}),document.dispatchEvent(new CustomEvent("space-member-extension-updated")))},methods:{refreshInvited(){"invited"!==this.filter&&"member"!==this.filter||this.$refs.spaceMembers.searchPeople()},peopleLoaded(e){this.peopleCount=e}}},i,[],!1,null,null,null).exports;var r=function(){var e=this,t=e._self._c;return t("v-toolbar",{attrs:{id:"peopleListToolbar",flat:""}},[e.isManager?t("v-toolbar-title",[t("v-btn",{staticClass:"btn pe-2 ps-0 me-4 inviteUserToSpaceButton",on:{click:function(t){return e.$emit("invite-users")}}},[t("i",{staticClass:"uiIconInviteUser ms-2 me-1"}),e._v(" "),t("span",{staticClass:"d-none d-sm-inline"},[e._v("\n        "+e._s(e.$t("peopleList.button.inviteUsers"))+"\n      ")])])],1):e._e(),e._v(" "),t("div",{staticClass:"showingPeopleText text-sub-title d-none d-sm-flex"},[e._v("\n    "+e._s(e.$t("peopleList.label.peopleCount",{0:e.peopleCount}))+"\n  ")]),e._v(" "),t("v-spacer",{staticClass:"d-none d-sm-flex"}),e._v(" "),t("v-scale-transition",[t("v-text-field",{staticClass:"inputPeopleFilter pa-0 me-3 my-auto",attrs:{placeholder:e.$t("peopleList.label.filterPeople"),"prepend-inner-icon":"fa-filter"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),t("v-scale-transition",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.filter,expression:"filter"}],staticClass:"selectPeopleFilter my-auto me-2 subtitle-1 ignore-vuetify-classes d-none d-sm-inline",on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.filter=t.target.multiple?i:i[0]}}},e._l(e.peopleFilters,(function(i){return t("option",{key:i.value,domProps:{value:i.value}},[e._v("\n        "+e._s(i.text)+"\n      ")])})),0)]),e._v(" "),t("v-icon",{staticClass:"d-sm-none",on:{click:e.openBottomMenu}},[e._v("\n    fa-filter\n  ")]),e._v(" "),t("v-bottom-sheet",{staticClass:"pa-0",model:{value:e.bottomMenu,callback:function(t){e.bottomMenu=t},expression:"bottomMenu"}},[t("v-sheet",{staticClass:"text-center",attrs:{height:e.bottomNavigationHeight}},[t("v-toolbar",{staticClass:"border-box-sizing",attrs:{color:"primary",dark:""}},[t("v-btn",{attrs:{text:""},on:{click:function(t){e.bottomMenu=!1}}},[e._v("\n          "+e._s(e.$t("peopleList.label.cancel"))+"\n        ")]),e._v(" "),t("v-spacer"),e._v(" "),t("v-toolbar-title",[t("v-icon",[e._v("fa-filter")]),e._v("\n          "+e._s(e.$t("peopleList.label.filter"))+"\n        ")],1),e._v(" "),t("v-spacer"),e._v(" "),t("v-btn",{attrs:{text:""},on:{click:e.changeFilterSelection}},[e._v("\n          "+e._s(e.$t("peopleList.label.confirm"))+"\n        ")])],1),e._v(" "),t("v-list",e._l(e.peopleFilters,(function(i){return t("v-list-item",{key:i,on:{click:function(t){e.filterToChange=i.value}}},[t("v-list-item-title",{staticClass:"align-center d-flex"},[e.filterToChange===i.value?t("v-icon",[e._v("fa-check")]):t("span",{staticClass:"me-6"}),e._v(" "),t("v-spacer"),e._v(" "),t("div",[e._v("\n              "+e._s(i.text)+"\n            ")]),e._v(" "),t("v-spacer"),e._v(" "),t("span",{staticClass:"me-6"})],1)],1)})),1)],1)],1)],1)};r._withStripped=!0;const n=s({props:{keyword:{type:String,default:null},filter:{type:String,default:null},peopleCount:{type:String,default:null},isManager:{type:Boolean,default:!1}},data:()=>({filterToChange:null,bottomMenu:!1,publisherRolePromotionFeatureEnabled:eXo.env.portal.PublisherRolePromotionFeatureEnabled,startSearchAfterInMilliseconds:300,endTypingKeywordTimeout:50,startTypingKeywordTimeout:0,typing:!1}),computed:{bottomNavigationHeight(){return this.isManager?"255px":"169px"},peopleFilters(){return this.isManager?this.publisherRolePromotionFeatureEnabled?[{text:this.$t("peopleList.label.filter.member"),value:"member"},{text:this.$t("peopleList.label.filter.manager"),value:"manager"},{text:this.$t("peopleList.label.filter.redactor"),value:"redactor"},{text:this.$t("peopleList.label.filter.publisher"),value:"publisher"},{text:this.$t("peopleList.label.filter.invited"),value:"invited"},{text:this.$t("peopleList.label.filter.pending"),value:"pending"}]:[{text:this.$t("peopleList.label.filter.member"),value:"member"},{text:this.$t("peopleList.label.filter.manager"),value:"manager"},{text:this.$t("peopleList.label.filter.redactor"),value:"redactor"},{text:this.$t("peopleList.label.filter.invited"),value:"invited"},{text:this.$t("peopleList.label.filter.pending"),value:"pending"}]:this.publisherRolePromotionFeatureEnabled?[{text:this.$t("peopleList.label.filter.member"),value:"member"},{text:this.$t("peopleList.label.filter.redactor"),value:"redactor"},{text:this.$t("peopleList.label.filter.publisher"),value:"publisher"},{text:this.$t("peopleList.label.filter.manager"),value:"manager"}]:[{text:this.$t("peopleList.label.filter.member"),value:"member"},{text:this.$t("peopleList.label.filter.redactor"),value:"redactor"},{text:this.$t("peopleList.label.filter.manager"),value:"manager"}]}},watch:{keyword(){this.startTypingKeywordTimeout=Date.now()+this.startSearchAfterInMilliseconds,this.typing||(this.typing=!0,this.waitForEndTyping())},filter(){this.$emit("filter-changed",this.filter)}},methods:{openBottomMenu(){this.filterToChange=this.filter,this.bottomMenu=!0},changeFilterSelection(){this.bottomMenu=!1,this.filter=this.filterToChange},waitForEndTyping(){window.setTimeout((()=>{Date.now()>this.startTypingKeywordTimeout?(this.typing=!1,this.$emit("keyword-changed",this.keyword)):this.waitForEndTyping()}),this.endTypingKeywordTimeout)}}},r,[],!1,null,null,null).exports;var l=function(){var e=this,t=e._self._c;return t("exo-drawer",{ref:"spaceInvitationDrawer",staticClass:"spaceInvitationDrawer",attrs:{right:""}},[t("template",{slot:"title"},[e._v("\n    "+e._s(e.$t("peopleList.title.usersToInvite"))+"\n  ")]),e._v(" "),t("template",{slot:"content"},[e.invitationSent?t("v-alert",{staticClass:"ma-4 pa-3 successfulInvitation",attrs:{outlined:"",text:""}},[e._v("\n      "+e._s(e.$t("peopleList.label.successfulInvitation",{0:e.invitedUserFullName}))+"\n    ")]):t("form",{ref:"form3",attrs:{disabled:e.savingSpace||e.spaceSaved},on:{keypress:function(t){return e.checkExternalInvitation(t)}}},[t("exo-identity-suggester",{ref:"autoFocusInput3",staticClass:"ma-4",attrs:{labels:e.suggesterLabels,disabled:e.savingSpace||e.spaceSaved,"search-options":{spaceURL:e.spacePrettyName},items:e.users,name:"inviteMembers","type-of-relations":"user_to_invite","include-users":"","include-spaces":"",multiple:""},model:{value:e.invitedMembers,callback:function(t){e.invitedMembers=t},expression:"invitedMembers"}}),e._v(" "),e.error?t("v-alert",{attrs:{type:"error"}},[e._v("\n        "+e._s(e.error)+"\n      ")]):e._e()],1),e._v(" "),t("v-list",{staticClass:"mx-4 rounded externalList",attrs:{subheader:""}},[e.alreadyExistAlert?t("v-alert",{staticClass:"mb-0 pa-2 text-center alreadyExistAlert",attrs:{outlined:"",text:""},domProps:{innerHTML:e._s(e.alreadyExistAlert)}}):e._e(),e._v(" "),e.alreadyInvitedAlert?t("v-alert",{staticClass:"mb-0 pa-2 text-center alreadyExistAlert",attrs:{outlined:"",text:""},domProps:{innerHTML:e._s(e.alreadyInvitedAlert)}}):e._e(),e._v(" "),e._l(e.externalInvitedUsers,(function(i){return t("v-list-item",{key:i},[t("v-badge",{staticClass:"externalBadge pa-0",attrs:{bottom:"",color:"white",bordered:"","offset-x":"33","offset-y":"26"}},[t("span",{attrs:{slot:"badge"},slot:"badge"},[t("i",{staticClass:"uiIconSocUserProfile"}),t("v-icon",{staticClass:"helpIcon"},[e._v("mdi-help")])],1),e._v(" "),t("v-list-item-avatar",{staticClass:"ms-0"},[t("v-img",{attrs:{src:e.defaultAvatar}})],1)],1),e._v(" "),t("v-list-item-content",[t("v-list-item-title",{staticClass:"externalUserEmail",domProps:{textContent:e._s(i)}}),e._v(" "),t("v-list-item-subtitle",{staticClass:"subEmail"},[e._v(e._s(e.$t("peopleList.label.pending")))])],1),e._v(" "),t("v-btn",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:e.$t("peopleList.label.clickToDecline"),expression:"$t('peopleList.label.clickToDecline')",modifiers:{bottom:!0,body:!0}}],attrs:{icon:""},on:{click:function(t){return e.removeExternalInvitation(i)}}},[t("v-icon",[e._v("\n            mdi-close-circle\n          ")])],1)],1)}))],2),e._v(" "),e.externalInvitationsSent.length>0?t("v-list",{staticClass:"mx-4 mt-0 rounded externalList",attrs:{subheader:""}},e._l(e.externalInvitationsSent,(function(i){return t("v-list-item",{key:i},[t("v-badge",{staticClass:"externalBadge pa-0",attrs:{bottom:"",bordered:"",color:"white","offset-x":"33","offset-y":"26"}},[t("span",{attrs:{slot:"badge"},slot:"badge"},[t("i",{staticClass:"uiIconSocUserProfile"}),t("v-icon",{staticClass:"helpIcon",attrs:{color:"white"}},[e._v("mdi-help")])],1),e._v(" "),t("v-list-item-avatar",{staticClass:"ms-0"},[t("v-img",{attrs:{src:e.defaultAvatar}})],1)],1),e._v(" "),t("v-list-item-content",[t("v-list-item-title",{staticClass:"externalUserEmail",domProps:{textContent:e._s(i.userEmail)}}),e._v(" "),i.expired?t("v-list-item-subtitle",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:e.$t("peopleList.label.invitationExpiredToolTip"),expression:"$t('peopleList.label.invitationExpiredToolTip')",modifiers:{bottom:!0,body:!0}}],staticClass:"subExpired"},[e._v("\n            "+e._s(e.$t("peopleList.label.invitationExpired"))+"\n          ")]):t("v-list-item-subtitle",{staticClass:"subEmail"},[e._v(e._s(e.$t("peopleList.label.invitationSent")))])],1),e._v(" "),t("v-btn",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:e.$t("peopleList.label.clickToDecline"),expression:"$t('peopleList.label.clickToDecline')",modifiers:{bottom:!0,body:!0}}],attrs:{icon:""},on:{click:function(t){return e.declineInvitation(i)}}},[t("v-icon",[e._v("\n            mdi-close-circle\n          ")])],1)],1)})),1):e._e()],1),e._v(" "),t("template",{slot:"footer"},[t("div",{staticClass:"d-flex"},[t("v-spacer"),e._v(" "),t("v-btn",{staticClass:"btn me-2",attrs:{disabled:e.savingSpace||e.spaceSaved},on:{click:e.cancel}},[e._v("\n        "+e._s(e.$t("peopleList.label.cancel"))+"\n      ")]),e._v(" "),t("v-btn",{staticClass:"btn btn-primary",attrs:{loading:e.savingSpace,disabled:e.saveButtonDisabled},on:{click:e.inviteUsers}},[e._v("\n        "+e._s(e.$t("peopleList.button.inviteUsers"))+"\n      ")])],1)])],2)};l._withStripped=!0;const o=s({props:{isExternalFeatureEnabled:{type:Boolean,default:!0}},data:()=>({users:[],savingSpace:!1,spaceSaved:!1,error:null,spacePrettyName:eXo.env.portal.spaceName,invitedMembers:[],includeExternalUser:!1,externalInvitedUsers:[],invitationSent:!1,alreadyExistAlert:"",alreadyInvitedAlert:"",externalInvitationsSent:[]}),computed:{saveButtonDisabled(){return this.savingSpace||this.spaceSaved||!this.invitedMembers||!this.invitedMembers.length&&!this.includeExternalUser},suggesterLabels(){return{placeholder:this.$t("peopleList.label.inviteMembers"),noDataLabel:this.$t("peopleList.label.noDataLabel")}},defaultAvatar:()=>`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/social/users/default-image/avatar`,invitedUser(){return 1===this.invitedMembers.length&&this.invitedMembers[0]&&this.invitedMembers[0].profile},invitedUserFullName(){return this.invitedUser&&this.invitedUser.fullName||this.$t("peopleList.label.users")}},watch:{savingSpace(){this.savingSpace?this.$refs.spaceInvitationDrawer.startLoading():this.$refs.spaceInvitationDrawer.endLoading()}},methods:{open(){this.savingSpace=!1,this.spaceSaved=!1,this.includeExternalUser=!1,this.error=null,this.spacePrettyName=eXo.env.portal.spaceName,this.invitedMembers=[],this.externalInvitedUsers=[],this.$refs.spaceInvitationDrawer.open(),this.$spaceService.findSpaceExternalInvitationsBySpaceId(eXo.env.portal.spaceId).then((e=>{this.externalInvitationsSent=e}))},cancel(){this.$refs.spaceInvitationDrawer.close()},inviteUsers(e){e&&(e.preventDefault(),e.stopPropagation()),this.spaceSaved||this.savingSpace||(this.error=null,this.savingSpace=!0,this.$spaceService.updateSpace({id:eXo.env.portal.spaceId,invitedMembers:this.invitedMembers,externalInvitedUsers:this.externalInvitedUsers}).then((()=>{this.spaceSaved=!0,this.$emit("refresh"),this.externalInvitedUsers=[],this.invitationSent=!0,window.setTimeout((()=>{this.$refs.spaceInvitationDrawer.close(),this.invitationSent=!1}),3e3)})).catch((e=>{console.warn("Error updating space ",this.invitedMembers,e),this.error=this.$t("peopleList.error.errorWhenSavingSpace")})).finally((()=>this.savingSpace=!1)))},checkExternalInvitation(e){const t=this;$("form").on("focusout",(function(e){setTimeout((function(){e.delegateTarget.contains(document.activeElement)||t.getExternalEmail()}),1)})),"Enter"==e.key&&(e.preventDefault(),this.getExternalEmail()),"32"==e.keyCode&&this.getExternalEmail()},getExternalEmail(){const e=this.$refs.autoFocusInput3.searchTerm,t=null!==e?e.split(" "):"",i=t[t.length-1];/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,24}))$/.test(i)&&this.$userService.getUserByEmail(i).then((e=>{"null"!==e.id?(this.$spaceService.isSpaceMember(eXo.env.portal.spaceId,e.remoteId).then((t=>{"true"===t.isMember?($(`#${this.$refs.autoFocusInput3.id} input`)[0].blur(),this.alreadyExistAlert=`<span style="font-style: italic;">${i}</span> ${this.$t("peopleList.label.alreadyMember")}`,setTimeout((()=>this.alreadyExistAlert=""),3e3)):(this.users.push(e),-1===this.invitedMembers.findIndex((t=>t.remoteId===e.remoteId))&&setTimeout((()=>this.invitedMembers.push(e)),0))})),this.$refs.autoFocusInput3.searchTerm=null):this.isExternalFeatureEnabled&&(this.includeExternalUser=!0,this.externalInvitationsSent.find((e=>e.userEmail===i))?($(`#${this.$refs.autoFocusInput3.id} input`)[0].blur(),this.alreadyInvitedAlert=this.$t("peopleList.label.alreadyInvited"),setTimeout((()=>this.alreadyInvitedAlert=""),3e3)):-1===this.externalInvitedUsers.indexOf(i)&&this.externalInvitedUsers.push(i),this.$refs.autoFocusInput3.searchTerm=null)}))},removeExternalInvitation(e){const t=this.externalInvitedUsers.indexOf(e);t>-1&&this.externalInvitedUsers.splice(t,1)},declineInvitation(e){this.externalInvitationsSent.splice(this.externalInvitationsSent.indexOf(e),1),this.$spaceService.declineExternalInvitation(eXo.env.portal.spaceId,e.invitationId)}}},l,[],!1,null,null,null).exports;var p=function(){var e=this,t=e._self._c;return t("v-alert",{attrs:{type:e.alertType,dismissible:"",icon:"warning"===e.alertType?"mdi-alert-circle":""},model:{value:e.displayAlert,callback:function(t){e.displayAlert=t},expression:"displayAlert"}},[t("span",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:e.alertMessage,expression:"alertMessage"}],staticClass:"mt-8"})])};p._withStripped=!0;const c={"space-members":a,"space-members-toolbar":n,"space-invitation-drawer":o,"alert-space-members":s({props:{spaceDisplayName:{type:String,default:null}},data:()=>({displayAlert:!1,alertMessage:null,alertType:null}),created(){const e=new URL(location.href).searchParams,t=e.get("feedbackMessage");if(t&&"SpaceRequestAlreadyMember"===t){const i=e.get("userName");this.$identityService.getIdentityByProviderIdAndRemoteId("organization",i).then((e=>{const i=e.profile.fullname;this.alertType="warning",this.alertMessage=this.$t(`Notification.feedback.message.${t}`,{0:i,1:this.spaceDisplayName}),this.displayAlert=!0}))}}},p,[],!1,null,null,null).exports};for(const e in c)Vue.component(e,c[e]);if(extensionRegistry){const e=extensionRegistry.loadComponents("SpaceMembers");e&&e.length>0&&e.forEach((e=>{Vue.component(e.componentName,e.componentOptions)}))}document.dispatchEvent(new CustomEvent("displayTopBarLoading"));const d=eXo&&eXo.env.portal.language||"en",v=`${eXo.env.portal.context}/${eXo.env.portal.rest}/i18n/bundle/locale.portlet.social.PeopleListApplication-${d}.json`,m="peopleListApplication";function u(e,t,i){exoi18n.loadLanguageAsync(d,v).then((s=>{Vue.createApp({mounted(){document.dispatchEvent(new CustomEvent("hideTopBarLoading"))},template:`<space-members\n                  id="${m}"\n                  :is-manager="${t}"\n                  :is-external-feature-enabled="${i}"\n                  filter="${e||"member"}"\n                  space-id="${eXo.env.portal.spaceId}" />`,i18n:s,vuetify:Vue.prototype.vuetifyOptions},`#${m}`,"Space Members")}))}return t})()));