define((()=>(()=>{"use strict";var t={d:(e,s)=>{for(var a in s)t.o(s,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:s[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{init:()=>D});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-mask uiPopupWrapper"},[e("div",{staticClass:"uiPopup modal-content",class:t.modalClass},[e("div",{staticClass:"popupHeader"},[e("span",{staticClass:"PopupTitle popupTitle"},[t._v(t._s(t.title))]),t._v(" "),t.displayClose?e("a",{staticClass:"uiIconClose pull-right",on:{click:t.closeModal}}):e("v-btn",{staticClass:"closeBindingModal",attrs:{icon:""},on:{click:t.closeModal}},[e("v-icon",{staticClass:"closeIcon",attrs:{large:"",color:"#5f708a"}},[t._v("\n          close\n        ")])],1)],1),t._v(" "),e("div",{staticClass:"PopupContent popupContent"},[t._t("default")],2)])])};function a(t,e,s,a,i,n,o,r){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=s,l._compiled=!0),a&&(l.functional=!0),n&&(l._scopeId="data-v-"+n),o?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=c):i&&(c=r?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var p=l.render;l.render=function(t,e){return c.call(e),p(t,e)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:t,options:l}}s._withStripped=!0;const i=a({props:{displayClose:{type:Boolean,default:!0},title:{type:String,default:""},modalClass:{type:String,default:""}},methods:{closeModal(){this.$emit("modal-closed")}}},s,[],!1,null,null,null).exports;var n=function(){var t=this;return(0,t._self._c)("exo-confirm-dialog",{ref:"confirmDialog",attrs:{message:t.$t(t.confirmMessageKey),title:t.$t(t.confirmTitleKey),"ok-label":t.$t(t.confirmOkKey),"cancel-label":t.$t(t.confirmCancelKey)},on:{ok:function(e){t.clickCallback&&t.clickCallback()},"dialog-opened":function(e){t.dialogOpened=!0},"dialog-closed":function(e){t.dialogOpened=!1}}})};n._withStripped=!0;const o=a({data:()=>({confirmMessageKey:null,confirmTitleKey:null,confirmOkKey:null,confirmCancelKey:null,clickCallback:null,dialogOpened:!1}),watch:{dialogOpened(){this.dialogOpened?this.$root.$emit("spaces-administration-retore-home-layout-confirm-opened"):this.$root.$emit("spaces-administration-retore-home-layout-confirm-closed")}},created(){this.$root.$on("spaces-administration-retore-home-layout-confirm",(t=>{this.confirmTitleKey=t.title,this.confirmMessageKey=t.message,this.confirmOkKey=t.ok,this.confirmCancelKey=t.cancel,this.clickCallback=t.callback,this.$refs.confirmDialog.open()}))}},n,[],!1,null,null,null).exports;var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"manageSpaces"},[e("div",{staticClass:"uiSearchInput"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"showInputSearch",attrs:{placeholder:t.$t("social.spaces.administration.manageSpaces.search"),type:"text"},domProps:{value:t.searchText},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchSpaces()},input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),t._v(" "),e("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.Search,expression:"Search",modifiers:{bottom:!0,body:!0}}],staticClass:"advancedSearch",attrs:{href:"#"}},[e("i",{staticClass:"uiIconPLF24x24Search",on:{click:function(e){return t.searchSpaces()}}})])]),t._v(" "),e("table",{staticClass:"uiGrid table table-hover table-striped"},[e("tr",[e("th",[t._v("\n        "+t._s(t.$t("social.spaces.administration.manageSpaces.space"))+"\n      ")]),t._v(" "),e("th",[t._v("\n        "+t._s(t.$t("social.spaces.administration.manageSpaces.description"))+"\n      ")]),t._v(" "),e("th",[t._v("\n        "+t._s(t.$t("social.spaces.administration.manageSpaces.visibility"))+"\n      ")]),t._v(" "),e("th",[t._v("\n        "+t._s(t.$t("social.spaces.administration.manageSpaces.registration"))+"\n      ")]),t._v(" "),e("th",[e("span",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.manageSpaces.users.tooltip"),expression:"$t('social.spaces.administration.manageSpaces.users.tooltip')",modifiers:{bottom:!0,body:!0}}]},[t._v("\n          "+t._s(t.$t("social.spaces.administration.manageSpaces.users"))+"\n        ")])]),t._v(" "),e("th",[t._v("\n        "+t._s(t.$t("social.spaces.administration.manageSpaces.actions"))+"\n      ")])]),t._v(" "),0===t.spaces.length?e("tr",[e("td",{staticClass:"empty center",attrs:{colspan:"12"}},[t._v(" "+t._s(t.$t("social.spaces.administration.manageSpaces.noSpaces"))+" ")])]):t._e(),t._v(" "),t._l(t.spaces,(function(s,a){return e("tr",{key:s.id},[e("td",[null!=s.avatarUrl?e("img",{staticClass:"avatar",attrs:{src:s.avatarUrl}}):e("img",{staticClass:"avatar",attrs:{src:t.avatar}}),t._v("  "+t._s(s.displayName)+"\n      ")]),t._v(" "),e("td",{domProps:{innerHTML:t._s(s.description)}}),t._v(" "),e("td",{staticClass:"center"},[t._v(" "+t._s(t.$t("social.spaces.administration.manageSpaces.visibility."+s.visibility))+" ")]),t._v(" "),e("td",{staticClass:"center"},[t._v(" "+t._s(t.$t("social.spaces.administration.manageSpaces.registration."+s.subscription))+" ")]),t._v(" "),e("td",{staticClass:"center"},[t._v(" "+t._s(s.totalBoundUsers)+"/"+t._s(s.membersCount)+" ")]),t._v(" "),e("td",{staticClass:"center actionContainer"},[t.canBindGroupsAndSpaces?e("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.manageSpaces.actions.bind"),expression:"$t('social.spaces.administration.manageSpaces.actions.bind')",modifiers:{bottom:!0,body:!0}}],staticClass:"actionIcon",on:{click:function(e){return t.openSpaceBindingDrawer(s,a)}}},[e("i",{staticClass:"uiIconSpaceBinding uiIconGroup",class:{bound:s.hasBindings}})]):t._e(),t._v(" "),e("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.manageSpaces.actions.edit"),expression:"$t('social.spaces.administration.manageSpaces.actions.edit')",modifiers:{bottom:!0,body:!0}}],staticClass:"actionIcon",attrs:{href:t.getSpaceLinkSetting(s.displayName,s.groupId),target:"_blank"}},[e("i",{staticClass:"uiIconEdit uiIconLightGray"})]),t._v(" "),t.resetSpaceHomeLayoutEnabled?e("v-btn",{attrs:{title:t.$t("social.spaces.administration.manageSpaces.actions.resetHomeLayout"),loading:t.restoringHomeLayout===s.id,icon:""},on:{click:function(e){return t.openRestoreLayoutConfirm(s)}}},[e("v-icon",{attrs:{color:"primary",size:"18"}},[t._v("fas fa-undo")])],1):t._e(),t._v(" "),e("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.manageSpaces.actions.delete"),expression:"$t('social.spaces.administration.manageSpaces.actions.delete')",modifiers:{bottom:!0,body:!0}}],staticClass:"actionIcon",on:{click:function(e){return t.deleteSpaceById(s.id,a)}}},[e("i",{staticClass:"uiIconDeleteUser uiIconLightGray"})])],1)])}))],2),t._v(" "),t.totalPages>1?e("div",{staticClass:"pagination uiPageIterator d-flex"},[e("ul",{staticClass:"ms-auto"},[e("li",{class:{disabled:1===t.currentPage}},[e("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.manageSpaces.pagination.previous"),expression:"$t('social.spaces.administration.manageSpaces.pagination.previous')",modifiers:{bottom:!0,body:!0}}],attrs:{href:"#"},on:{click:function(e){return t.getSpacesPerPage(t.currentPage-1)}}},[e("i",{staticClass:"uiIconPrevArrow"})])]),t._v(" "),t.isInFirstPage?e("li",[e("a",{attrs:{href:"#"},on:{click:function(e){return t.getSpacesPerPage(1)}}},[t._v(t._s(1))])]):t._e(),t._v(" "),t.isInFirstPage?e("li",[t._m(0)]):t._e(),t._v(" "),t._l(t.pages,(function(s,a){return e("li",{key:a,class:{active:t.currentPage===s.name}},[e("a",{attrs:{href:"#"},on:{click:function(e){return t.getSpacesPerPage(s.name)}}},[t._v(t._s(s.name))])])})),t._v(" "),t.isInLastPage?e("li",[t._m(1)]):t._e(),t._v(" "),t.isInLastPage?e("li",[e("a",{attrs:{href:"#"},on:{click:function(e){return t.getSpacesPerPage(t.totalPages)}}},[t._v(t._s(t.totalPages))])]):t._e(),t._v(" "),e("li",{class:[t.currentPage===t.totalPages?"disabled":""]},[e("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.manageSpaces.pagination.next"),expression:"$t('social.spaces.administration.manageSpaces.pagination.next')",modifiers:{bottom:!0,body:!0}}],attrs:{href:"#"},on:{click:function(e){return t.getSpacesPerPage(t.currentPage+1)}}},[e("i",{staticClass:"uiIconNextArrow"})])])],2)]):t._e(),t._v(" "),e("exo-spaces-administration-modal",{directives:[{name:"show",rawName:"v-show",value:t.showConfirmMessageModal,expression:"showConfirmMessageModal"}],attrs:{title:t.$t("social.spaces.administration.delete.spaces.confirm.title")},on:{"modal-closed":t.closeModal}},[e("p",[t._v(t._s(t.$t("social.spaces.administration.delete.spaces.confirm")))]),t._v(" "),e("div",{staticClass:"uiAction uiActionBorder"},[e("div",{staticClass:"btn btn-primary",on:{click:t.confirmDelete}},[t._v(t._s(t.$t("social.spaces.administration.delete.spaces.button.delete")))]),t._v(" "),e("div",{staticClass:"btn",on:{click:t.closeModal}},[t._v(t._s(t.$t("social.spaces.administration.delete.spaces.button.cancel")))])])]),t._v(" "),t.resetSpaceHomeLayoutEnabled?e("spaces-administration-home-layout-confirm"):t._e(),t._v(" "),e("v-navigation-drawer",{attrs:{id:"GroupBindingDrawer",absolute:"",right:"",stateless:"",temporary:"",width:"500","max-width":"100vw"},model:{value:t.showGroupBindingForm,callback:function(e){t.showGroupBindingForm=e},expression:"showGroupBindingForm"}},[e("exo-group-binding-drawer",{key:t.groupBindingDrawerKey,attrs:{"group-space-bindings":t.groupSpaceBindings,"bound-groups-loading":t.bindingsLoading,"space-to-bind":t.spaceToBind},on:{close:t.closeGroupBindingDrawer,openBindingModal:t.openBindingModal,openRemoveBindingModal:t.openRemoveBindingModal}})],1),t._v(" "),e("exo-spaces-administration-modal",{directives:[{name:"show",rawName:"v-show",value:t.showConfirmMessageBindingModal,expression:"showConfirmMessageBindingModal"}],staticClass:"bindingModal",attrs:{title:t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.confirmation.title"),"display-close":!1},on:{"modal-closed":t.closeBindingModal}},[e("p",[t._v(t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.confirmation",{0:t.spaceName})))]),t._v(" "),e("div",{staticClass:"uiAction uiActionBorder"},[e("div",{staticClass:"btn btn-primary",on:{click:t.confirmBinding}},[t._v(t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.confirmation.confirm")))]),t._v(" "),e("div",{staticClass:"btn",on:{click:t.closeBindingModal}},[t._v(t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.cancel")))])])]),t._v(" "),e("exo-spaces-administration-modal",{directives:[{name:"show",rawName:"v-show",value:t.showConfirmMessageRemoveBindingModal,expression:"showConfirmMessageRemoveBindingModal"}],staticClass:"bindingModal",attrs:{title:t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.confirmation.title"),"display-close":!1},on:{"modal-closed":t.closeRemoveBindingModal}},[e("p",[t._v(t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.removeBinding.confirmation",{0:t.groupPrettyName})))]),t._v(" "),e("div",{staticClass:"uiAction uiActionBorder"},[e("div",{staticClass:"btn btn-primary",on:{click:t.confirmRemoveBinding}},[t._v(t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.removeBinding.confirm")))]),t._v(" "),e("div",{staticClass:"btn",on:{click:t.closeRemoveBindingModal}},[t._v(t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.cancel")))])])])],1)};function c(t){return fetch(`${Vue.prototype.$spacesConstants.GROUP_API}?q=${t}`,{credentials:"include"}).then((t=>t.json()))}function l(t){return fetch(`${Vue.prototype.$spacesConstants.SPACES_ADMINISTRATION_API}/permissions/${t}`,{headers:{"Content-Type":"application/json"},credentials:"include",method:"GET"}).then((t=>200===t.status?t.json():t.text()))}function p(t,e){return fetch(`${Vue.prototype.$spacesConstants.SPACES_ADMINISTRATION_API}/permissions/${t}`,{headers:{"Content-Type":"application/json"},credentials:"include",method:"PUT",body:JSON.stringify(e)})}r._withStripped=!0;const d=a({props:{canBindGroupsAndSpaces:{type:Boolean,default:!1}},data(){return{showGroupBindingForm:!1,showConfirmMessageModal:!1,restoringHomeLayout:null,resetSpaceHomeLayoutEnabled:eXo.env.portal.SpaceHomeLayoutResetEnabled,spaces:[],spaceName:"",spaceToBind:null,spaceToBindIndex:null,spaceToDeleteId:null,spaceToDeleteIndex:null,totalPages:1,currentPage:1,searchText:"",maxVisiblePagesButtons:3,maxVisibleButtons:5,groupBindingDrawerKey:0,showConfirmMessageBindingModal:!1,showConfirmMessageRemoveBindingModal:!1,groupsToBind:[],groupSpaceBindings:[],bindingsLoading:!0,binding:{},groupPrettyName:"",avatar:this.$spacesConstants&&this.$spacesConstants.DEFAULT_SPACE_AVATAR}},computed:{startPage(){return 1===this.currentPage?1:this.currentPage===this.totalPages&&this.totalPages>this.maxVisibleButtons?this.totalPages-this.maxVisiblePagesButtons+1<0?1:this.totalPages-this.maxVisiblePagesButtons+1:this.totalPages>this.maxVisibleButtons?this.totalPages-this.currentPage<this.maxVisibleButtons&&this.totalPages-this.currentPage>=this.maxVisiblePagesButtons?this.totalPages-this.maxVisibleButtons+1:this.totalPages-this.currentPage<this.maxVisiblePagesButtons-1?this.currentPage-1:this.currentPage:1},endPage(){return this.totalPages-this.startPage<=this.maxVisibleButtons-1?this.totalPages:Math.min(this.startPage+this.maxVisiblePagesButtons-1,this.totalPages)},pages(){const t=[];for(let e=this.startPage;e<=this.endPage;e+=1)t.push({name:e});return t},isInFirstPage(){return this.totalPages>this.maxVisibleButtons&&this.totalPages-this.currentPage<this.maxVisiblePagesButtons},isInLastPage(){return this.totalPages-this.currentPage>=this.maxVisibleButtons}},created(){this.initSpaces().finally((()=>this.$root.$applicationLoaded()))},methods:{initSpaces(){return fetch(`${Vue.prototype.$spacesConstants.SOCIAL_SPACE_API}?sort=date&order=desc&limit=${Vue.prototype.$spacesConstants.SPACES_PER_PAGE}&returnSize=true&expand=membersCount`,{credentials:"include"}).then((t=>t.json())).then((t=>{this.spaces=t.spaces,this.totalPages=Math.ceil(t.size/this.$spacesConstants.SPACES_PER_PAGE)}))},getSpacesPerPage(t){var e;(e=(t-1)*this.$spacesConstants.SPACES_PER_PAGE,fetch(`${Vue.prototype.$spacesConstants.SOCIAL_SPACE_API}?offset=${e}&sort=date&order=desc&limit=${Vue.prototype.$spacesConstants.SPACES_PER_PAGE}&returnSize=true&expand=membersCount`,{credentials:"include"}).then((t=>t.json()))).then((e=>{this.spaces=e.spaces,this.currentPage=t}))},deleteSpaceById(t,e){this.showConfirmMessageModal=!0,this.spaceToDeleteId=t,this.spaceToDeleteIndex=e},confirmDelete(){var t;(t=this.spaceToDeleteId,fetch(`/rest/v1/social/spaces/${t}`,{credentials:"include",method:"delete"})).then((()=>{this.spaces.splice(this.spaceToDeleteIndex,1)})),this.showConfirmMessageModal=!1},getSpaceLinkSetting:(t,e)=>function(t,e){if(t&&e){const s=t.toLowerCase().split(" ").join("_"),a=e.toLowerCase().split("/"),i=a[a.length-1];return`${Vue.prototype.$spacesConstants.PORTAL}${Vue.prototype.$spacesConstants.PROFILE_SPACE_LINK}${i}/${s}/settings`}return null}(t,e),searchSpaces(){var t;(t=this.searchText,fetch(`${Vue.prototype.$spacesConstants.SOCIAL_SPACE_API}?q=${t}&sort=date&order=desc&limit=${Vue.prototype.$spacesConstants.SPACES_PER_PAGE}&returnSize=true&expand=membersCount`,{credentials:"include"}).then((t=>t.json()))).then((t=>{this.spaces=t.spaces,this.totalPages=Math.ceil(t.size/this.$spacesConstants.SPACES_PER_PAGE)}))},closeModal(){this.showConfirmMessageModal=!1},openSpaceBindingDrawer(t,e){var s;this.spaceToBind=t,this.spaceName=t.displayName,this.spaceToBindIndex=e,this.showGroupBindingForm=!0,t.hasBindings?(s=t.id,fetch(`${Vue.prototype.$spacesConstants.SPACE_GROUP_BINDING_API}/${s}`,{credentials:"include"}).then((t=>t.json()))).then((t=>{this.groupSpaceBindings=t.groupSpaceBindings})).finally((()=>this.bindingsLoading=!1)):this.bindingsLoading=!1},closeGroupBindingDrawer(){this.showGroupBindingForm=!1,this.groupSpaceBindings=[],this.forceRerender()},openBindingModal(t){this.groupsToBind=t,this.showConfirmMessageBindingModal=!0},openRemoveBindingModal(t){this.binding=t,this.groupPrettyName=this.renderGroupName(t.group),this.showConfirmMessageRemoveBindingModal=!0},closeBindingModal(){this.showConfirmMessageBindingModal=!1},closeRemoveBindingModal(){this.showConfirmMessageRemoveBindingModal=!1},confirmBinding(){var t,e;(t=this.spaceToBind.id,e=this.groupsToBind,fetch(`${Vue.prototype.$spacesConstants.SPACE_GROUP_BINDING_API}/saveGroupsSpaceBindings/${t}`,{headers:{"Content-Type":"application/json"},credentials:"include",method:"POST",body:JSON.stringify(e)})).finally((()=>this.goToBindingReports())),this.showConfirmMessageBindingModal=!1},confirmRemoveBinding(){var t;(t=this.binding.id,fetch(`${Vue.prototype.$spacesConstants.SPACE_GROUP_BINDING_API}/removeGroupSpaceBinding/${t}`,{credentials:"include",method:"delete"})).finally((()=>this.goToBindingReports())),this.showConfirmMessageRemoveBindingModal=!1},goToBindingReports(){this.showGroupBindingForm=!1,this.$emit("bindingReports"),this.navigateTo("g/:platform:users/spacesAdministration#bindingReports"),this.forceRerender()},navigateTo(t){location.href=`${eXo.env.portal.context}/${t}`},renderGroupName(t){let e=t.slice(t.lastIndexOf("/")+1,t.length);return e=e.charAt(0).toUpperCase()+e.slice(1),`${e} (${t})`},forceRerender(){this.groupBindingDrawerKey+=1},openRestoreLayoutConfirm(t){this.$root.$emit("close-alert-message"),this.$root.$emit("spaces-administration-retore-home-layout-confirm",{title:"social.spaces.administration.restore.spaceHomeLayout.confirm.title",message:"social.spaces.administration.restore.spaceHomeLayout.confirm.message",ok:"social.spaces.administration.restore.spaceHomeLayout.button.confirm",cancel:"social.spaces.administration.restore.spaceHomeLayout.button.cancel",callback:()=>this.restoreLayoutConfirm(t.id)})},restoreLayoutConfirm(t){return this.$root.$emit("close-alert-message"),this.restoringHomeLayout=t,this.$spaceService.restoreSpaceHomeLayout(t).then((()=>this.$root.$emit("alert-message",this.$t("social.spaces.administration.restore.spaceHomeLayout.confimed"),"success"))).catch((()=>this.$root.$emit("alert-message",this.$t("social.spaces.administration.restore.spaceHomeLayout.error"),"error"))).finally((()=>this.restoringHomeLayout=null))}}},r,[function(){var t=this._self._c;return t("a",[t("span",[this._v("...")])])},function(){var t=this._self._c;return t("a",[t("span",[this._v("...")])])}],!1,null,null,null).exports;var m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"spacesPermissions"},[e("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"4"}},[e("v-list",{staticClass:"pt-0"},[e("v-list-item",{staticClass:"ps-0"},[e("v-list-item-content",{staticClass:"pt-0"},[e("v-list-item-title",{staticClass:"mb-0 title"},[e("v-row",{staticClass:"col-12",attrs:{"no-gutters":""}},[e("v-col",{staticClass:"col-8 pb-0 pt-5"},[e("h4",{staticClass:"font-weight-bold ma-0"},[t._v(t._s(t.$t("social.spaces.administration.permissions.inviteNewExternal")))])]),t._v(" "),e("v-col",{staticClass:"col-4"},[t.externalFeatureStatusLoaded?e("v-switch",{staticClass:"float-right mt-3",attrs:{dense:""},on:{change:function(e){return t.saveExternalFeatureStatus(t.externalFeatureEnabled)}},model:{value:t.externalFeatureEnabled,callback:function(e){t.externalFeatureEnabled=e},expression:"externalFeatureEnabled"}}):t._e()],1)],1)],1),t._v(" "),e("v-list-item-subtitle",{staticClass:"text-sub-title font-italic"},[t._v("\n            "+t._s(t.$t("social.spaces.administration.permissions.enableDisableExternal"))+"\n          ")])],1)],1)],1)],1),t._v(" "),e("table",{staticClass:"uiGrid table table-hover table-striped"},[e("tr",[e("th",[t._v("\n        "+t._s(t.$t("social.spaces.administration.permissions"))+"\n      ")]),t._v(" "),e("th",[t._v("\n        "+t._s(t.$t("social.spaces.administration.permissions.groups"))+"\n      ")]),t._v(" "),e("th",{staticClass:"actions"},[t._v("\n        "+t._s(t.$t("social.spaces.administration.permissions.actions"))+"\n      ")])]),t._v(" "),e("tr",[e("td",[e("h5",{staticClass:"title"},[t._v(t._s(t.$t("social.spaces.administration.permissions.createSpace")))]),t._v(" "),e("h5",[t._v(t._s(t.$t("social.spaces.administration.permissions.descriptionCreateSpace")))])]),t._v(" "),e("td",[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.spacesCreatorsEditMode,expression:"!spacesCreatorsEditMode"}]},[t.creators.length>0?e("div",t._l(t.creators,(function(s){return e("div",{key:s},[e("h5",[t._v(t._s(s))])])})),0):t._e(),t._v(" "),0===t.creators.length&&t.displayNoAssignmentCreators?e("h5",[t._v(t._s(t.$t("social.spaces.administration.permissions.noAssignment")))]):t._e()]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.spacesCreatorsEditMode,expression:"spacesCreatorsEditMode"}],staticClass:"inputUser"},[e("input",{attrs:{id:"add-creators-suggester",type:"text"}})])]),t._v(" "),t.spacesCreatorsEditMode?t._e():e("td",{staticClass:"center actionContainer"},[e("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.permissions.actions.edit"),expression:"$t('social.spaces.administration.permissions.actions.edit')",modifiers:{bottom:!0,body:!0}}],staticClass:"actionIcon",on:{click:function(e){return t.editCreateSpace()}}},[e("i",{staticClass:"uiIconEdit uiIconLightGray"})])]),t._v(" "),t.spacesCreatorsEditMode?e("td",{staticClass:"center actionContainer"},[e("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.permissions.actions.save"),expression:"$t('social.spaces.administration.permissions.actions.save')",modifiers:{bottom:!0,body:!0}}],staticClass:"actionIcon",on:{click:function(e){return t.savePermissionsCreateSpace()}}},[e("i",{staticClass:"uiIconSave uiIconLightGray"})]),t._v(" "),e("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.permissions.actions.cancel"),expression:"$t('social.spaces.administration.permissions.actions.cancel')",modifiers:{bottom:!0,body:!0}}],staticClass:"actionIcon",on:{click:function(e){return t.editCreateSpace()}}},[e("i",{staticClass:"uiIconClose uiIconLightGray"})])]):t._e()]),t._v(" "),e("tr",[e("td",[e("h5",{staticClass:"title"},[t._v(t._s(t.$t("social.spaces.administration.permissions.manageSpaces")))]),t._v(" "),e("h5",[t._v(t._s(t.$t("social.spaces.administration.permissions.descriptionManageSpaces")))])]),t._v(" "),e("td",[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.spacesAdministratorsEditMode,expression:"!spacesAdministratorsEditMode"}]},[t.administrators.length>0?e("div",t._l(t.administrators,(function(s){return e("div",{key:s},[e("h5",[t._v(t._s(s))])])})),0):t._e(),t._v(" "),0===t.administrators.length&&t.displayNoAssignmentAdministrators?e("h5",[t._v(t._s(t.$t("social.spaces.administration.permissions.noAssignment")))]):t._e()]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.spacesAdministratorsEditMode,expression:"spacesAdministratorsEditMode"}],staticClass:"inputUser"},[e("input",{attrs:{id:"add-administrators-suggester",type:"text"}})])]),t._v(" "),t.spacesAdministratorsEditMode?t._e():e("td",{staticClass:"center actionContainer"},[e("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.permissions.actions.edit"),expression:"$t('social.spaces.administration.permissions.actions.edit')",modifiers:{bottom:!0,body:!0}}],staticClass:"actionIcon",on:{click:function(e){return t.editManageSpace()}}},[e("i",{staticClass:"uiIconEdit uiIconLightGray"})])]),t._v(" "),t.spacesAdministratorsEditMode?e("td",{staticClass:"center actionContainer"},[e("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.permissions.actions.save"),expression:"$t('social.spaces.administration.permissions.actions.save')",modifiers:{bottom:!0,body:!0}}],staticClass:"actionIcon",on:{click:function(e){return t.savePermissionsSpacesAdministrators()}}},[e("i",{staticClass:"uiIconSave uiIconLightGray"})]),t._v(" "),e("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.permissions.actions.cancel"),expression:"$t('social.spaces.administration.permissions.actions.cancel')",modifiers:{bottom:!0,body:!0}}],staticClass:"actionIcon",on:{click:function(e){return t.editManageSpace()}}},[e("i",{staticClass:"uiIconClose uiIconLightGray"})])]):t._e()])])],1)};m._withStripped=!0;const u=a({data:()=>({creators:[],administrators:[],spacesCreatorsEditMode:!1,spacesAdministratorsEditMode:!1,displayNoAssignmentCreators:!1,displayNoAssignmentAdministrators:!1,externalFeatureEnabled:null,externalFeatureStatusLoaded:!1}),created(){this.getSettingValueCreateSpace(),this.getSettingValueSpacesAdministrators(),this.getExternalFeatureStatus()},methods:{initSuggesterSpacesCreators(){const t=$("#add-creators-suggester");if(t&&t.length&&t.suggester){const e=this,s={type:"tag",plugins:["remove_button","restore_on_backspace"],create:!1,createOnBlur:!1,highlight:!1,openOnFocus:!1,sourceProviders:["exo:spacesAdministration"],valueField:"text",labelField:"text",searchField:["text"],closeAfterSelect:!0,dropdownParent:"body",hideSelected:!0,renderMenuItem:(t,s)=>e.renderMenuItem(t,s),renderItem:t=>`<div class="item">${t.text}</div>`,onItemAdd(t){e.addSuggestedItemCreate(t)},onItemRemove(t){e.removeSuggestedItemCreators(t)},sortField:[{field:"order"},{field:"$score"}],providers:{"exo:spacesAdministration":e.findGroups}};if(t.suggester(s),$("#add-creators-suggester")[0].selectize.clear(),this.creators&&null!==this.creators)for(const e of this.creators)t[0].selectize.addOption({text:e}),t[0].selectize.addItem(e)}},addSuggestedItemCreate(t){if($("#add-creators-suggester")&&$("#add-creators-suggester").length&&$("#add-creators-suggester")[0].selectize){const e=$("#add-creators-suggester")[0].selectize;t=e.options[t]}this.creators.find((e=>e===t.text))||this.creators.push(t.text)},removeSuggestedItemCreators(t){const e=$("#add-creators-suggester");for(let s=this.creators.length-1;s>=0;s--)this.creators[s]===t&&(this.creators.splice(s,1),e[0].selectize.removeOption(t),e[0].selectize.removeItem(t))},savePermissionsCreateSpace(){$(".tooltip.fade.bottom.in").remove(),this.creators&&p("spacesCreators",this.creators.map((t=>{const e=t.split(":");return{membershipType:e[0],group:e[1]}}))),this.spacesCreatorsEditMode=!1},getSettingValueCreateSpace(){l("spacesCreators").then((t=>{if(t){this.creators=[];for(const e of t.memberships){const t=`${e.membershipType}:${e.group}`;this.creators.push(t)}}this.displayNoAssignmentCreators=!0,this.initSuggesterSpacesCreators()}))},initSuggesterSpacesAdministrators(){const t=$("#add-administrators-suggester");if(t&&t.length&&t.suggester){const e=this,s={type:"tag",plugins:["remove_button","restore_on_backspace"],create:!1,createOnBlur:!1,highlight:!1,openOnFocus:!1,sourceProviders:["exo:spacesAdministration"],valueField:"text",labelField:"text",searchField:["text"],closeAfterSelect:!0,dropdownParent:"body",hideSelected:!0,renderMenuItem:(t,s)=>e.renderMenuItem(t,s),renderItem:t=>`<div class="item">${t.text}</div>`,onItemAdd(t){e.addSuggestedItem(t)},onItemRemove(t){e.removeSuggestedItemAdinistrators(t)},sortField:[{field:"order"},{field:"$score"}],providers:{"exo:spacesAdministration":e.findGroups}};if(t.suggester(s),$("#add-administrators-suggester")[0].selectize.clear(),this.administrators&&null!==this.administrators)for(const e of this.administrators)t[0].selectize.addOption({text:e}),t[0].selectize.addItem(e)}},findGroups(t,e){if(!t.length)return e();c(t).then((t=>{const s=[];for(const e of t.entities)s.push({avatarUrl:null,text:`*:${e.id}`,value:`*:${e.id}`,type:"group"});e(s)}))},renderMenuItem:(t,e)=>`\n        <div class="item">${e(t.value)}</div>\n      `,addSuggestedItem(t){if($("#add-administrators-suggester")&&$("#add-administrators-suggester").length&&$("#add-administrators-suggester")[0].selectize){const e=$("#add-administrators-suggester")[0].selectize;t=e.options[t]}this.administrators.find((e=>e===t.text))||this.administrators.push(t.text)},removeSuggestedItemAdinistrators(t){const e=$("#add-administrators-suggester");for(let s=this.administrators.length-1;s>=0;s--)this.administrators[s]===t&&(this.administrators.splice(s,1),e[0].selectize.removeOption(t),e[0].selectize.removeItem(t))},savePermissionsSpacesAdministrators(){$(".tooltip.fade.bottom.in").remove(),this.administrators&&p("spacesAdministrators",this.administrators.map((t=>{const e=t.split(":");return{membershipType:e[0],group:e[1]}}))),this.spacesAdministratorsEditMode=!1},getSettingValueSpacesAdministrators(){l("spacesAdministrators").then((t=>{if(t){this.administrators=[];for(const e of t.memberships){const t=`${e.membershipType}:${e.group}`;this.administrators.push(t)}}this.displayNoAssignmentAdministrators=!0,this.initSuggesterSpacesAdministrators()}))},editCreateSpace(){$(".tooltip.fade.bottom.in").remove(),this.spacesCreatorsEditMode?this.spacesCreatorsEditMode=!1:this.spacesCreatorsEditMode=!0,this.getSettingValueCreateSpace()},editManageSpace(){$(".tooltip.fade.bottom.in").remove(),this.spacesAdministratorsEditMode?this.spacesAdministratorsEditMode=!1:this.spacesAdministratorsEditMode=!0,this.getSettingValueSpacesAdministrators()},saveExternalFeatureStatus(t){!function(t){fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/management/featureservice/changeFeatureActivation?featureName=externalUsers&isActive=${t}`,{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}})}(t)},getExternalFeatureStatus(){fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/management/featureservice/isActiveFeature?featureName=externalUsers`,{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((t=>{if(t&&t.ok)return t.json();throw new Error("Error when getting External Feature settings")})).then((t=>{this.externalFeatureEnabled=t.value,this.externalFeatureStatusLoaded=!0}))}}},m,[],!1,null,null,null).exports;var h=function(){var t=this,e=t._self._c;return e("v-app",{staticClass:"spacesAdministration",attrs:{flat:""}},[e("main",[e("v-layout",[e("v-flex",[e("v-tabs",{attrs:{"slider-size":"4"},model:{value:t.selectedTab,callback:function(e){t.selectedTab=e},expression:"selectedTab"}},[e("v-tab",{key:"manage",attrs:{href:"#manage"}},[t._v("\n            "+t._s(t.$t("social.spaces.administration.manageSpaces"))+"\n          ")]),t._v(" "),t.canChangePermissions?e("v-tab",{key:"permissions",attrs:{href:"#permissions"}},[t._v("\n            "+t._s(t.$t("social.spaces.administration.permissions"))+"\n          ")]):t._e(),t._v(" "),e("v-tab",{key:"spaceApplications",attrs:{href:"#spaceApplications"}},[t._v("\n            "+t._s(t.$t("social.spaces.applications"))+"\n          ")]),t._v(" "),e("v-tab",{key:"spaceTemplates",attrs:{href:"#spaceTemplates"}},[t._v("\n            "+t._s(t.$t("social.spaces.templates"))+"\n          ")]),t._v(" "),t.canChangePermissions?e("v-tab",{key:"bindingReports",attrs:{href:"#bindingReports"}},[t._v("\n            "+t._s(t.$t("social.spaces.administration.bindingReports"))+"\n          ")]):t._e()],1),t._v(" "),e("v-tabs-items",{staticClass:"mt-2",model:{value:t.selectedTab,callback:function(e){t.selectedTab=e},expression:"selectedTab"}},[e("v-tab-item",{staticClass:"px-4 py-2",attrs:{id:"manage",value:"manage"}},[e("exo-spaces-administration-manage-spaces",{attrs:{"can-bind-groups-and-spaces":t.canChangePermissions},on:{bindingReports:function(e){t.activeTab=5}}})],1),t._v(" "),t.canChangePermissions?e("v-tab-item",{staticClass:"px-4 py-2",attrs:{id:"permissions",value:"permissions"}},[e("exo-spaces-administration-manage-permissions")],1):t._e(),t._v(" "),e("v-tab-item",{staticClass:"px-4 py-2",attrs:{id:"spaceApplications",value:"spaceApplications"}},[e("exo-space-applications",{attrs:{"applications-by-category":t.applicationsByCategory}})],1),t._v(" "),e("v-tab-item",{attrs:{id:"spaceTemplates",value:"spaceTemplates"}},[e("exo-space-templates-spaces")],1),t._v(" "),t.canChangePermissions?e("v-tab-item",{staticClass:"px-4 py-2",attrs:{id:"bindingReports",value:"bindingReports"}},[e("exo-spaces-administration-binding-reports")],1):t._e()],1)],1)],1)],1)])};h._withStripped=!0;const g=a({props:{applicationsByCategory:{type:Array,default:()=>[]}},data:()=>({selectedTab:"applications",activeTab:1,canChangePermissions:!1}),computed:{showManageSpaces(){return this.activeTab&&1===this.activeTab},showPermissions(){return this.canChangePermissions&&this.activeTab&&2===this.activeTab},showSpaceApplications(){return 3===this.activeTab},showSpaceTemplates(){return 4===this.activeTab},showBindingReports(){return this.canChangePermissions&&this.activeTab&&5===this.activeTab&&this.canChangePermissions}},created(){var t;(t=eXo.env.portal.userName,fetch(`${Vue.prototype.$spacesConstants.USER_API}/${t}`,{credentials:"include"}).then((t=>t.json()))).then((t=>{t&&t.platformAdministrator&&(this.canChangePermissions=t.platformAdministrator)}))},mounted(){const t=window.location.hash;this.activeTab="#bindingReports"===t?5:"#permissions"===t?2:1}},h,[],!1,null,null,null).exports;var v=function(){var t=this,e=t._self._c;return e("div",[e("v-flex",{directives:[{name:"show",rawName:"v-show",value:!t.showSelectGroupsTree,expression:"!showSelectGroupsTree"}],attrs:{id:"GroupBindingForm"}},[e("v-card-title",{staticClass:"title"},[e("v-layout",{staticClass:"pa-2",attrs:{row:""}},[e("v-flex",[e("span",[t._v("\n            "+t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.title"))+"\n          ")])]),t._v(" "),e("v-flex",{attrs:{xs1:""}},[e("v-btn",{staticClass:"rightIcon",attrs:{icon:""},on:{click:t.closeDrawer}},[e("v-icon",{staticClass:"closeIcon",attrs:{large:""}},[t._v("\n              close\n            ")])],1)],1)],1)],1),t._v(" "),e("div",{staticClass:"content"},[e("v-layout",{staticClass:"mt-4 ps-2",attrs:{wrap:""}},[e("v-flex",{attrs:{"align-center":"",xs1:""}},[t.spaceToBind&&null!=t.spaceToBind.avatarUrl?e("img",{staticClass:"avatar",attrs:{src:t.spaceToBind.avatarUrl}}):e("img",{staticClass:"avatar",attrs:{src:t.avatar}})]),t._v(" "),e("v-flex",{staticClass:"spaceName",attrs:{"pt-1":""}},[e("span",[t._v(" "+t._s(t.spaceToBind?t.spaceToBind.displayName:"")+" ")])])],1),t._v(" "),e("v-layout",{staticClass:"pt-5 ps-3 mb-4",attrs:{wrap:""}},[e("v-flex",{attrs:{xs9:""}},[e("exo-group-suggester",{attrs:{options:t.suggesterOptions,"source-providers":[t.findGroups],"bound-groups":t.groupSpaceBindings,"second-drawer-selected-groups":t.secondDrawerSelectedGroups,placeholder:t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.textField.placeHolder")},model:{value:t.groups,callback:function(e){t.groups=e},expression:"groups"}})],1),t._v(" "),e("v-flex",{attrs:{xs1:""}}),t._v(" "),e("v-flex",{attrs:{xs1:""}},[e("v-btn",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.selectList"),expression:"$t('social.spaces.administration.manageSpaces.spaceBindingForm.selectList')",modifiers:{bottom:!0,body:!0}}],staticClass:"rightIcon",attrs:{icon:""},on:{click:t.goToSelectGroups}},[e("i",{staticClass:"uiIconSpaceBinding uiIconGroup"})])],1)],1),t._v(" "),e("v-layout",{directives:[{name:"show",rawName:"v-show",value:t.boundGroupsLoading,expression:"boundGroupsLoading"}],attrs:{column:""}},[e("v-flex",{attrs:{"ps-4":""}},[e("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"heading"}})],1),t._v(" "),e("v-spacer"),t._v(" "),e("v-flex",{attrs:{"pt-4":"","ps-4":"","pe-8":""}},[e("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"paragraph@3"}})],1)],1),t._v(" "),t.groupSpaceBindings.length>0&&!t.boundGroupsLoading?e("v-layout",{attrs:{column:""}},[e("v-flex",[e("span",{staticClass:"subtitle-1"},[t._v("\n            "+t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.boundGroups"))+"\n          ")])]),t._v(" "),e("v-flex",{staticClass:"boundGroups",attrs:{"mt-2":""}},[e("v-list",{attrs:{flat:"",subheader:"",dense:""}},[e("v-list-item-group",t._l(t.groupSpaceBindings,(function(s,a){return e("div",{key:a},[e("v-list-item",[e("v-list-item-content",[t._v("\n                    "+t._s(t.renderGroupName(s.group))+"\n                  ")]),t._v(" "),e("v-list-item-action",{staticClass:"delete"},[e("v-btn",{staticClass:"rightIcon",attrs:{small:"",icon:""},on:{click:function(e){return t.$emit("openRemoveBindingModal",s)}}},[e("i",{staticClass:"uiIconDeleteUser uiIconLightGray"})])],1)],1)],1)})),0)],1)],1)],1):t._e()],1),t._v(" "),e("v-card-actions",{staticClass:"drawerActions",attrs:{absolute:""}},[e("v-layout",[e("v-flex",{staticClass:"xs6"}),t._v(" "),e("button",{staticClass:"btn ms-2",attrs:{type:"button"},on:{click:t.cancelBinding}},[t._v("\n          "+t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.cancel"))+"\n        ")]),t._v(" "),e("button",{staticClass:"btn btn-primary ms-6",attrs:{disabled:!t.isAllowToSave,type:"button"},on:{click:function(e){return t.$emit("openBindingModal",t.groups)}}},[t._v("\n          "+t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.apply"))+"\n        ")])],1)],1)],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showSelectGroupsTree,expression:"showSelectGroupsTree"}]},[e("exo-group-binding-second-level-drawer",{attrs:{"already-selected":t.groups,"group-space-bindings":t.groupSpaceBindings},on:{selectionSaved:t.selectionSaved,back:t.back,close:t.closeDrawer}})],1)],1)};v._withStripped=!0;const _=a({props:{spaceToBind:{type:String,default:null},groupSpaceBindings:{type:Array,default:null},boundGroupsLoading:{type:Boolean,default:!0}},data(){const t=this;return{textAreaValue:"",groups:[],showSelectGroupsTree:!1,avatar:this.$spacesConstants&&this.$spacesConstants.DEFAULT_SPACE_AVATAR,secondDrawerSelectedGroups:[],suggesterOptions:{type:"tag",plugins:["remove_button","restore_on_backspace"],create:!1,createOnBlur:!1,highlight:!1,openOnFocus:!1,valueField:"value",labelField:"text",searchField:["text"],closeAfterSelect:!1,dropdownParent:"body",hideSelected:!0,renderMenuItem:(e,s)=>t.renderMenuItem(e,s),sortField:[{field:"order"},{field:"$score"}]}}},computed:{isAllowToSave(){return this.groups&&this.groups.length>0}},methods:{findGroups(t,e){if(!t.length)return e();c(t).then((t=>{const s=[],a=this.groupSpaceBindings.map((t=>t.group));for(const e of t.entities)e.id.startsWith("/spaces")||a.includes(e.id)||s.push({avatarUrl:null,text:e.label,value:e.id,type:"group"});e(s)}))},renderMenuItem:(t,e)=>`\n        <div class="item" title="${e(t.value)}" rel="tooltip" data-placement="bottom">${e(t.value)}</div>\n      `,goToSelectGroups(){this.showSelectGroupsTree=!0},back(){this.showSelectGroupsTree=!this.showSelectGroupsTree},closeDrawer(){this.showSelectGroupsTree=!1,this.$emit("close")},cancelBinding(){this.groups=[],this.$emit("close"),this.showSelectGroupsTree=!1},renderGroupName(t){let e=t.slice(t.lastIndexOf("/")+1,t.length);return e=e.charAt(0).toUpperCase()+e.slice(1),`${e} (${t})`},selectionSaved(t){this.secondDrawerSelectedGroups=t;const e=t.map((t=>t.id));this.showSelectGroupsTree=!1,this.groups=[],this.groups.push(...e)}}},v,[],!1,null,null,null).exports;var f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"secondDrawer"},[e("v-card-title",{staticClass:"title"},[e("v-layout",{directives:[{name:"show",rawName:"v-show",value:!t.searchMode,expression:"!searchMode"}],attrs:{"pa-2":"","justify-center":"","align-baseline":"",wrap:"",row:""}},[e("v-flex",{attrs:{"align-self-end":"",xs1:""}},[e("v-btn",{staticClass:"leftIcon",attrs:{icon:""},on:{click:function(e){return t.$emit("back")}}},[e("v-icon",{attrs:{small:""}},[t._v("arrow_back")])],1)],1),t._v(" "),e("v-flex",[e("span",{staticClass:"subtitle-1"},[t._v("\n          "+t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.selectGroups"))+"\n        ")])]),t._v(" "),e("v-flex",{attrs:{xs1:""}},[e("v-btn",{attrs:{icon:""},on:{click:function(e){t.searchMode=!0}}},[e("v-icon",{staticClass:"closeIcon"},[t._v("search")])],1)],1),t._v(" "),e("v-flex",{attrs:{xs1:"","me-2":""}},[e("v-btn",{staticClass:"rightIcon",attrs:{icon:""},on:{click:t.closeDrawer}},[e("v-icon",{staticClass:"closeIcon",attrs:{large:""}},[t._v("\n            close\n          ")])],1)],1)],1),t._v(" "),e("v-layout",{directives:[{name:"show",rawName:"v-show",value:t.searchMode,expression:"searchMode"}],attrs:{"pa-2":"","justify-center":"","align-baseline":"",wrap:"",row:""}},[e("v-flex",{attrs:{"align-self-end":"",xs1:""}},[e("v-btn",{staticClass:"leftIcon",attrs:{icon:""},on:{click:function(e){t.searchMode=!1}}},[e("v-icon",{attrs:{small:""}},[t._v("arrow_back")])],1)],1),t._v(" "),e("v-flex",{attrs:{"ps-4":""}},[e("v-text-field",{staticClass:"treeGroupSearch",attrs:{placeholder:t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.selectGroups.search"),"single-line":"",clearable:"",solo:"",flat:"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1),t._v(" "),e("v-layout",{staticClass:"content",attrs:{"pt-4":"","ps-2":""}},[e("v-flex",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]},[e("v-flex",{attrs:{"pt-4":"","ps-4":"","pe-8":""}},[e("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"paragraph@3"}})],1)],1),t._v(" "),e("v-treeview",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&!t.searching,expression:"!loading && !searching"}],attrs:{id:"treeDisplayMode",items:t.items,open:t.openedNodes,active:t.selection,"selection-type":"independent","item-disabled":"bound","expand-icon":"mdi-chevron-down",dense:"",shaped:"",hoverable:"",selectable:"","open-on-click":"","return-object":""},model:{value:t.selection,callback:function(e){t.selection=e},expression:"selection"}}),t._v(" "),e("v-treeview",{directives:[{name:"show",rawName:"v-show",value:t.searching,expression:"searching"}],attrs:{id:"treeSearchMode",items:t.items,search:t.search,open:t.openItems,active:t.active,"selection-type":"independent","item-disabled":"bound","expand-icon":"mdi-chevron-down",dense:"",shaped:"",hoverable:"",selectable:"",activatable:"","multiple-active":"","open-on-click":"","return-object":""},model:{value:t.selection,callback:function(e){t.selection=e},expression:"selection"}})],1)],1),t._v(" "),e("v-card-actions",{staticClass:"drawerActions",attrs:{absolute:""}},[e("v-layout",[e("v-flex",{staticClass:"xs6"}),t._v(" "),e("button",{staticClass:"btn ms-2",attrs:{type:"button"},on:{click:t.cancelSelection}},[t._v("\n        "+t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.cancel"))+"\n      ")]),t._v(" "),e("button",{staticClass:"btn btn-primary ms-6",attrs:{disabled:!t.isAllowToSave,type:"button"},on:{click:t.saveSelection}},[t._v("\n        "+t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.save"))+"\n      ")])],1)],1)],1)};f._withStripped=!0;const b=a({props:{alreadySelected:{type:Array,default:()=>[]},groupSpaceBindings:{type:Array,default:null}},data:()=>({loading:!0,searchMode:!1,selection:[],items:[],search:null,allItems:[],openedNodes:[],openItems:[],active:[],confirmedSelection:[]}),computed:{isAllowToSave(){const t=[],e=this.confirmedSelection.map((t=>t.id)),s=this.selection.map((t=>t.id));return s.forEach((s=>{e.includes(s)||t.push(s)})),e.forEach((e=>{s.includes(e)||t.push(e)})),t.length-this.groupSpaceBindings.length>0},searching(){return this.search}},watch:{alreadySelected(){const t=this.alreadySelected.map((t=>({id:t,name:t})));if(0===this.confirmedSelection.length)this.confirmedSelection.push(...t),this.selection.push(...t);else{const e=[],s=[],a=this.confirmedSelection.map((t=>t.id));a.forEach((t=>{this.alreadySelected.includes(t)||e.push(t)})),this.alreadySelected.forEach((t=>{a.includes(t)||s.push(t)})),e.forEach((t=>{this.selection=this.selection.filter((e=>e.id!==t))})),s.forEach((t=>{this.selection.push({id:t,name:t})})),this.confirmedSelection=[],this.confirmedSelection.push(...t)}},search(){this.search?(this.active=this.allItems.filter((t=>t.name.toLowerCase().match(this.search.toLowerCase()))),this.active.length>0&&(this.openItems=this.getItemsToOpen())):(this.active=[],this.openItems=[])},groupSpaceBindings(){this.selection=[],this.openedNodes=[];const t=this.getBoundItems();this.selection.push(...t)}},mounted(){this.getRootChildGroups()},methods:{getRootChildGroups(){fetch(`${Vue.prototype.$spacesConstants.SPACE_GROUP_BINDING_API}/getGroupsTree`,{credentials:"include"}).then((t=>t.json())).then((t=>{this.items=t.childGroups})).finally((()=>{this.loading=!1,this.getAllGroups()}))},getAllGroups(){let t=[],e=[];this.allItems.push(...this.items),t.push(...this.items);do{e.push(...this.getChildNodes(t)),t=[],t.push(...e),e=[]}while(t.length>0)},getItemsToOpen(){const t=[];this.active.forEach((e=>{let s,a=e;for(let e=a.id.split("/").length-1-1;e>0;e--)s=this.getItem(a.parentId),t.includes(s.id)||t.push(s.id),a=s}));const e=[];return t.forEach((t=>{e.push(this.getItem(t))})),e},getItem(t){return this.allItems.filter((e=>e.id===t))[0]},getBoundItems(){const t=[];return this.groupSpaceBindings&&this.groupSpaceBindings.length>0&&this.groupSpaceBindings.map((t=>t.group)).forEach((e=>{const s=this.getItem(e);s.bound=!0,t.push(s)})),t},closeDrawer(){this.selection=[],this.search="",this.$emit("close")},cancelSelection(){const t=this.groupSpaceBindings.length-1,e=this.selection.length-this.groupSpaceBindings.length;e>0?this.selection.splice(t+1,e):this.$emit("back")},saveSelection(){const t=[];t.push(...this.selection);const e=this.groupSpaceBindings.length-1;t.splice(0,e+1),this.openItems=[],this.active=[],this.search="",this.searchMode=!1,this.$emit("selectionSaved",t)},getChildNodes(t){const e=[];return t.forEach((t=>{const s=t.children;e.push(...s),this.allItems.push(...s)})),e}}},f,[],!1,null,null,null).exports;var C=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bindingReports"},[t.loading?e("div",[e("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"table-heading,table-tbody"}})],1):e("div",[e("div",{staticClass:"reportsFilterSearch"},[e("v-layout",{attrs:{"justify-end":"",row:""}},[e("v-flex",{attrs:{xs2:""}},[e("v-text-field",{attrs:{placeholder:t.$t("social.spaces.administration.binding.reports.search"),"prepend-inner-icon":"search","single-line":"",flat:"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),e("v-flex",{staticClass:"filter",attrs:{"ms-2":"","me-4":"",xs2:""}},[e("div",{staticClass:"btn-group"},[e("button",{staticClass:"btn dropdown-toggle",attrs:{"data-toggle":"dropdown"}},[t._v("\n              "+t._s(t.action)+"\n              "),e("i",{staticClass:"uiIconMiniArrowDown uiIconLightGray"}),e("span")]),t._v(" "),e("ul",{staticClass:"dropdown-menu"},[e("li",[e("a",{attrs:{href:"#"},on:{click:function(e){t.action=t.operationTypes[0]}}},[t._v(" "+t._s(t.operationTypes[0])+" ")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#"},on:{click:function(e){t.action=t.operationTypes[1]}}},[t._v(" "+t._s(t.operationTypes[1])+" ")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#"},on:{click:function(e){t.action=t.operationTypes[2]}}},[t._v(" "+t._s(t.operationTypes[2])+" ")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#"},on:{click:function(e){t.action=t.operationTypes[3]}}},[t._v(" "+t._s(t.operationTypes[3])+" ")])])])])])],1)],1),t._v(" "),e("v-data-table",{attrs:{headers:t.headers,items:t.operations,search:t.search,"footer-props":{itemsPerPageText:`${t.$t("social.spaces.administration.binding.reports.table.footer.rows.per.page")}:`},"disable-sort":""},scopedSlots:t._u([{key:"item",fn:function(s){return[e("tr",[e("td",{staticClass:"text-md-start"},[null!=s.item.space.avatarUrl?e("img",{staticClass:"avatar",attrs:{src:s.item.space.avatarUrl}}):e("img",{staticClass:"avatar",attrs:{src:t.avatar}}),t._v("\n            "+t._s(s.item.space.displayName)+"\n          ")]),t._v(" "),e("td",{staticClass:"text-md-center nameGroupBinding",attrs:{title:s.item.group.name,rel:"tooltip","data-placement":"bottom"}},[t._v("\n            "+t._s(s.item.group.name)+"\n          ")]),t._v(" "),e("td",{staticClass:"text-md-center"},[e("date-format",{attrs:{value:s.item.startDate,format:t.dateFormat}})],1),t._v(" "),e("td",{staticClass:"text-md-center"},["null"!==s.item.endDate?e("div",[e("date-format",{attrs:{value:s.item.endDate,format:t.dateFormat}})],1):e("div",{staticClass:"inProgress"},[e("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}),t._v(" "),e("span",[t._v("In progress")])],1)]),t._v(" "),e("td",{staticClass:"text-md-center"},[t._v(t._s(t.getOperationType(s.item.operationType)))]),t._v(" "),e("td",{staticClass:"text-md-center"},[t._v(t._s(s.item.addedUsers))]),t._v(" "),e("td",{staticClass:"text-md-center"},[t._v(t._s(s.item.removedUsers))]),t._v(" "),e("td",{staticClass:"text-md-center"},[e("v-btn",{staticClass:"rightIcon",attrs:{icon:""},on:{click:function(e){return t.uploadCSVFile(s.item.space.id,s.item.operationType,s.item.group.id,s.item.bindingId)}}},[e("v-icon",{staticClass:"uploadFile",attrs:{medium:""}},[t._v("\n                mdi-download\n              ")])],1)],1)])]}}])})],1)])};C._withStripped=!0;const y=a({data(){return{loading:!0,avatar:this.$spacesConstants&&this.$spacesConstants.DEFAULT_SPACE_AVATAR,search:"",action:`${this.$t("social.spaces.administration.binding.reports.filter.all.bindings")}`,operationTypes:[`${this.$t("social.spaces.administration.binding.reports.filter.all.bindings")}`,`${this.$t("social.spaces.administration.binding.reports.filter.add")}`,`${this.$t("social.spaces.administration.binding.reports.filter.remove")}`,`${this.$t("social.spaces.administration.binding.reports.filter.synchronize")}`],operations:[],dateFormat:{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}}},computed:{headers(){return[{text:`${this.$t("social.spaces.administration.manageSpaces.space")}`,align:"center",value:"space.displayName"},{text:`${this.$t("social.spaces.administration.binding.reports.table.title.group")}`,align:"center",filterable:!1},{text:`${this.$t("social.spaces.administration.binding.reports.table.title.start.date")}`,align:"center",filterable:!1},{text:`${this.$t("social.spaces.administration.binding.reports.table.title.end.date")}`,align:"center",filterable:!1},{text:`${this.$t("social.spaces.administration.binding.reports.table.title.operation.type")}`,align:"center",filterable:!0,value:"operationType",filter:t=>this.action===`${this.$t("social.spaces.administration.binding.reports.filter.all.bindings")}`||this.getOperationType(t).toLowerCase()===this.action.toLowerCase()},{text:`${this.$t("social.spaces.administration.binding.reports.table.title.added.users")}`,align:"center",filterable:!1},{text:`${this.$t("social.spaces.administration.binding.reports.table.title.removed.users")}`,align:"center",filterable:!1},{text:`${this.$t("social.spaces.administration.binding.reports.table.title.File")}`,align:"center",filterable:!1}]}},created(){fetch(`${Vue.prototype.$spacesConstants.SPACE_GROUP_BINDING_API}/getBindingReportOperations`,{credentials:"include"}).then((t=>t.json())).then((t=>{this.operations=t.groupSpaceBindingReportOperations})).finally((()=>this.loading=!1))},methods:{uploadCSVFile(t,e,s,a){!function(t,e,s,a){window.open(`${Vue.prototype.$spacesConstants.SPACE_GROUP_BINDING_API}/getExport?spaceId=${t}&action=${e}&group=${s}&groupBindingId=${a}`,"_blank")}(t,e,s,a)},getOperationType(t){const e=t.toLowerCase();return`${this.$t(`social.spaces.administration.binding.reports.filter.${e}`)}`}}},C,[],!1,null,null,null).exports;var x=function(){var t=this,e=t._self._c;return e("div",{staticClass:"spaceTemplates"},[e("table",{staticClass:"uiGrid table table-hover table-striped text-break"},[e("tr",{staticClass:"text-no-wrap"},[e("th",{attrs:{width:"14%"}},[t._v("\n        "+t._s(t.$t("social.spaces.templates.template"))+"\n      ")]),t._v(" "),e("th",{attrs:{width:"24%"}},[t._v("\n        "+t._s(t.$t("social.spaces.templates.description"))+"\n      ")]),t._v(" "),e("th",{attrs:{width:"5%"}},[t._v("\n        "+t._s(t.$t("social.spaces.templates.hidden"))+"\n      ")]),t._v(" "),e("th",{attrs:{width:"10%"}},[t._v("\n        "+t._s(t.$t("social.spaces.templates.registration"))+"\n      ")]),t._v(" "),e("th",{attrs:{width:"25%"}},[t._v("\n        "+t._s(t.$t("social.spaces.templates.applications"))+"\n      ")]),t._v(" "),e("th",{attrs:{width:"20%"}},[t._v("\n        "+t._s(t.$t("social.spaces.templates.permissions"))+"\n      ")]),t._v(" "),e("th",{attrs:{width:"2%"}},[t._v("\n        "+t._s(t.$t("social.spaces.templates.banner"))+"\n      ")])]),t._v(" "),0===t.templates.length?e("tr",[e("td",{staticClass:"empty center",attrs:{colspan:"12"}},[t._v(" "+t._s(t.$t("social.spaces.templates.noTemplates"))+" ")])]):t._l(t.templates,(function(s){return e("exo-space-template",{key:s.name,attrs:{template:s},on:{"display-banner":t.displayBanner}})}))],2),t._v(" "),e("v-dialog",{model:{value:t.preview,callback:function(e){t.preview=e},expression:"preview"}},[e("v-img",{attrs:{src:t.bannerImage}})],1)],1)};x._withStripped=!0;var S=function(){var t=this,e=t._self._c;return e("tr",[e("td",[t._v(t._s(t.$t(`social.spaces.templates.name.${t.template.name}`)))]),t._v(" "),e("td",[t._v(t._s(t.$t(`social.spaces.templates.description.${t.template.name}`)))]),t._v(" "),e("td",{staticClass:"center"},["hidden"===t.template.visibility?e("span",[t._v(t._s(t.$t("social.spaces.templates.yes")))]):e("span",[t._v(t._s(t.$t("social.spaces.templates.no")))])]),t._v(" "),e("td",{staticClass:"center"},[t._v(t._s(t.template.registration))]),t._v(" "),e("td",[e("span",[t._v(t._s(t.applications))])]),t._v(" "),e("td",[t._v(t._s(t.template.permissionsLabels))]),t._v(" "),e("td",{staticClass:"center"},[e("a",{on:{click:function(e){return t.$emit("display-banner",t.bannerImage)}}},[e("i",{staticClass:"uiIconWatch"})])])])};S._withStripped=!0;const w=a({props:{template:{type:Object,default:()=>({})}},computed:{applications(){let t=`${this.$t(`${this.template.spaceHomeApplication.portletName}.label.name`)}, `;const e=this.template.spaceApplicationList.length;for(let s=0;s<e-1;s++)t+=`${this.$t(`${this.template.spaceApplicationList[s].portletName}.label.name`)}, `;return t+=this.$t(`${this.template.spaceApplicationList[e-1].portletName}.label.name`),t},bannerImage(){return`${this.$spacesConstants.SPACES_TEMPLATES_API}/${this.template.name}/banner`}},methods:{showBannerImage(){eXo.commons.MaskLayerControl.showPicture(this.bannerImage)}}},S,[],!1,null,null,null).exports,A={components:{"exo-space-template":w},data:()=>({templates:[],bannerImage:"",preview:!1}),created(){this.initTemplates()},methods:{initTemplates(){(function(){const t=window&&window.eXo&&window.eXo.env&&window.eXo.env.portal&&window.eXo.env.portal.language||"en";return fetch(`${Vue.prototype.$spacesConstants.SPACES_TEMPLATES_API}/templates?lang=${t}`,{credentials:"include"}).then((t=>t.json()))})().then((t=>{this.templates=t}))},displayBanner(t){this.bannerImage=t,this.preview=!0}}},I=a(A,x,[],!1,null,null,null).exports;var P=function(){var t=this,e=t._self._c;return e("v-card",{attrs:{flat:""}},[e("v-container",{staticClass:"border-box-sizing"},[e("v-row",{attrs:{dense:""}},[t._l(t.applications,(function(s){return e("v-col",{key:s.id,staticClass:"SpaceApplicationCard my-1 mx-auto mx-sm-1"},[e("exo-space-application-card",{attrs:{application:s,"use-menu":""},on:{remove:function(e){return t.remove(s)}}})],1)})),t._v(" "),e("v-col",{staticClass:"SpaceApplicationCard dashed-border my-1 mx-auto mx-sm-1"},[e("v-btn",{staticClass:"primary--text",attrs:{width:"100%",height:"100%",text:""},on:{click:t.openDrawer}},[e("v-icon",[t._v("mdi-plus")])],1)],1)],2)],1),t._v(" "),e("exo-space-add-application-drawer",{ref:"spaceSettingAddApplicationDrawer",attrs:{"installed-applications":t.applications,"applications-by-category":t.applicationsByCategory},on:{refresh:t.refresh}})],1)};P._withStripped=!0;const B=a({props:{applicationsByCategory:{type:Array,default:()=>[]}},data:()=>({applications:[],saving:!1}),created(){this.refresh()},methods:{refresh(){return this.$spaceService.getSpaceApplicationsChoices().then((t=>this.applications=t))},remove(t){this.$spaceService.removeSpacesApplication(t.id).then(this.refresh)},openDrawer(){this.$refs.spaceSettingAddApplicationDrawer.open()}}},P,[],!1,null,null,null).exports;var T=function(){var t=this,e=t._self._c;return e("v-card",{attrs:{id:t.applicationId,flat:""}},[e("div",{staticClass:"d-flex flex-no-wrap"},[e("v-avatar",{staticClass:"SpaceApplicationCardImage mx-1 my-auto",attrs:{size:"45",tile:""}},[e("i",{class:t.applicationIcon})]),t._v(" "),e("div",{staticClass:"flex-grow-1 SpaceApplicationCardBody text-truncate"},[e("div",{staticClass:"text-truncate subtitle-1 px-1 pt-4 text-color SpaceApplicationCardTitle",attrs:{title:t.applicationName}},[t._v("\n        "+t._s(t.applicationName)+"\n      ")]),t._v(" "),e("v-card-subtitle",{staticClass:"text-truncate subtitle-2 px-1 pt-0 text-sub-title SpaceApplicationCardDescription",attrs:{title:t.applicationDescription}},[t._v("\n        "+t._s(t.applicationDescription||t.applicationName)+"\n      ")])],1),t._v(" "),e("div",{staticClass:"SpaceApplicationCardAction"},[t.useMenu?e("v-btn",{staticClass:"primary--text",class:t.skeleton&&"skeleton-background skeleton-text",attrs:{disabled:t.skeleton,icon:"",text:""},on:{click:function(e){t.displayActionMenu=!0}}},[e("v-icon",{attrs:{size:"16"}},[t._v("mdi-dots-vertical")])],1):e("v-btn",{staticClass:"primary--text",attrs:{text:"",height:"100%",width:"100%px"},on:{click:function(e){return t.$emit("add")}}},[e("v-icon",{attrs:{size:"36"}},[t._v("mdi-plus")])],1),t._v(" "),t.skeleton?t._e():e("v-menu",{ref:"actionMenu",attrs:{attach:`#${t.applicationId}`,transition:"slide-x-reverse-transition","offset-y":"",right:"","close-on-click":"","close-on-content-click":""},model:{value:t.displayActionMenu,callback:function(e){t.displayActionMenu=e},expression:"displayActionMenu"}},[e("v-list",{staticClass:"pa-0",attrs:{dense:""}},[e("v-list-item",{on:{click:function(e){return t.$emit("remove")}}},[e("v-list-item-title",[t._v("\n              "+t._s(t.$t("social.spaces.administration.manageSpaces.applications.remove"))+"\n            ")])],1)],1)],1)],1)],1)])};T._withStripped=!0;const k=a({props:{useMenu:{type:Boolean,default:!1},application:{type:String,default:null}},data:()=>({displayActionMenu:!1}),computed:{applicationId(){return this.application&&this.application.contentId&&this.application.contentId.split("/")[1]},applicationName(){return this.application&&(this.application.displayName||this.application.applicationName)},applicationDescription(){return this.application&&this.application.description},applicationIcon(){return this.applicationId?`uiIconApp${this.applicationId.charAt(0).toUpperCase()}${this.applicationId.substring(1)} uiIconDefaultApp`:""}},mounted(){this.useMenu&&$(document).on("click",(t=>{t.target&&!$(t.target).parents(`#${this.applicationId}`).length&&(this.displayActionMenu=!1)}))}},T,[],!1,null,null,null).exports;var M=function(){var t=this,e=t._self._c;return t.filteredApplications&&t.filteredApplications.length?e("v-expansion-panel",{staticClass:"border-color border-radius mt-4"},[e("v-expansion-panel-header",[t._v("\n    "+t._s(t.categoryName)+"\n  ")]),t._v(" "),t.expanded?e("v-divider"):t._e(),t._v(" "),e("v-expansion-panel-content",t._l(t.filteredApplications,(function(s){return e("div",{key:s.id,staticClass:"d-flex flex-no-wrap justify-space-between border-radius border-color SpaceApplicationCard SpaceApplicationCardEmbedded"},[e("exo-space-application-card",{staticClass:"flex-grow-1",attrs:{application:s},on:{add:function(e){return t.$emit("addApplication",s)}}})],1)})),0)],1):t._e()};M._withStripped=!0;const E=a({props:{expanded:{type:Boolean,default:!1},category:{type:Object,default:null},installedApplications:{type:Array,default:()=>[]}},computed:{filteredApplications(){return this.category&&this.category.applications&&this.category.applications.length?this.category.applications.slice().filter((t=>!this.installedApplications.find((e=>e.id===t.applicationName)))):[]},categoryName(){return this.category&&this.category.name}}},M,[],!1,null,null,null).exports;var N=function(){var t=this,e=t._self._c;return e("exo-drawer",{ref:"spaceApplicationInstallerDrawer",staticClass:"spaceApplicationInstallerDrawer",attrs:{right:""}},[e("template",{slot:"title"},[t._v("\n    "+t._s(t.$t("social.spaces.administration.manageSpaces.applications"))+"\n  ")]),t._v(" "),e("template",{slot:"content"},[e("v-expansion-panels",{staticClass:"px-4",attrs:{accordion:"",flat:"",focusable:""},model:{value:t.expanded,callback:function(e){t.expanded=e},expression:"expanded"}},t._l(t.applicationsByCategory,(function(s,a){return e("exo-space-application-category-card",{key:s.id,attrs:{category:s,expanded:t.expanded===a,"installed-applications":t.installedApplications},on:{addApplication:t.addApplication}})})),1)],1)],2)};N._withStripped=!0;const G={"exo-spaces-administration-manage-spaces":d,"exo-spaces-administration-manage-permissions":u,"exo-spaces-administration-spaces":g,"exo-spaces-administration-modal":i,"spaces-administration-home-layout-confirm":o,"exo-group-binding-drawer":_,"exo-group-binding-second-level-drawer":b,"exo-spaces-administration-binding-reports":y,"exo-space-template":w,"exo-space-templates-spaces":I,"exo-space-applications":B,"exo-space-application-card":k,"exo-space-application-category-card":E,"exo-space-add-application-drawer":a({props:{applicationsByCategory:{type:Array,default:()=>[]},installedApplications:{type:Array,default:()=>[]}},data:()=>({expanded:0,savingSpace:!1}),watch:{savingSpace(){this.savingSpace?this.$refs.spaceApplicationInstallerDrawer.startLoading():this.$refs.spaceApplicationInstallerDrawer.endLoading()}},methods:{open(){this.savingSpace=!1,this.$refs.spaceApplicationInstallerDrawer.open()},cancel(){this.$refs.spaceApplicationInstallerDrawer.close()},addApplication(t){this.savingSpace||(this.savingSpace=!0,this.$spaceService.addSpacesApplication(t).then((()=>{this.$emit("refresh"),window.setTimeout((()=>{this.$refs.spaceApplicationInstallerDrawer.close()}),200)})).catch((t=>{console.warn("Error adding spaces application ",t)})).finally((()=>this.savingSpace=!1)))}}},N,[],!1,null,null,null).exports};for(const t in G)Vue.component(t,G[t]);const L="undefined"!=typeof eXo?eXo.env.portal.language:"en",F=[`${eXo.env.portal.context}/${eXo.env.portal.rest}/i18n/bundle/locale.portlet.social.SpacesAdministrationPortlet-${L}.json`,`${eXo.env.portal.context}/${eXo.env.portal.rest}/i18n/bundle/locale.portal.webui-${L}.json`];if(Vue.directive("exo-tooltip",(function(t,e){const s=$(t),a=Object.keys(e.modifiers)[0],i=Object.keys(e.modifiers)[1];s.attr("data-original-title",e.value),a&&s.attr("data-placement",a),i&&s.attr("data-container",i),s.tooltip()})),extensionRegistry){const t=extensionRegistry.loadComponents("SpacesAdministration");t&&t.length>0&&t.forEach((t=>{Vue.component(t.componentName,t.componentOptions)}))}const R="spacesAdministration";function D(t){exoi18n.loadLanguageAsync(L,F).then((e=>{const s=document.createElement("div");s.id=R,Vue.createApp({data:{applicationsByCategory:t},template:`<exo-spaces-administration-spaces v-cacheable id="${R}" :applications-by-category="applicationsByCategory"></exo-spaces-administration-spaces>`,i18n:e,vuetify:Vue.prototype.vuetifyOptions},s,"Spaces Administration")}))}return e})()));