define((()=>(()=>{"use strict";var t={d:(e,a)=>{for(var i in a)t.o(a,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:a[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{init:()=>y});var a=function(){var t=this,e=t._self._c;return t.displayed?e("v-app",{staticClass:"transparent",attrs:{id:"SpaceSettings",flat:""}},[e("space-setting-general",{staticClass:"mb-6",attrs:{"space-id":t.spaceId}}),t._v(" "),e("space-setting-applications",{staticClass:"mb-6",attrs:{"space-id":t.spaceId}}),t._v(" "),[e("extension-registry-components",{staticClass:"mb-6",attrs:{params:t.spaceSettingParam,name:"SpaceSettings",type:"space-settings-components","parent-element":"div",element:"div","element-class":"mb-6"}})]],2):t._e()};function i(t,e,a,i,s,n,r,p){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=a,c._compiled=!0),i&&(c.functional=!0),n&&(c._scopeId="data-v-"+n),r?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=l):s&&(l=p?function(){s.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(c.functional){c._injectStyles=l;var o=c.render;c.render=function(t,e){return l.call(e),o(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:c}}a._withStripped=!0;const s=i({data:()=>({spaceId:eXo.env.portal.spaceId,displayed:!0})},a,[],!1,null,null,null).exports;var n=function(){var t=this,e=t._self._c;return t.displayed?e("div",[e("v-card",{staticClass:"border-radius",attrs:{flat:""}},[e("v-list",{attrs:{"two-line":""}},[e("v-list-item",[e("v-list-item-content",[e("v-list-item-title",{staticClass:"title text-color"},[t._v("\n            "+t._s(t.$t("SpaceSettings.general"))+"\n          ")])],1),t._v(" "),e("v-list-item-action",[e("v-btn",{attrs:{small:"",icon:""},on:{click:t.openDrawer}},[e("i",{staticClass:"uiIconEdit uiIconLightBlue pb-2"})])],1)],1)],1),t._v(" "),e("space-setting-form-drawer",{ref:"spaceFormDrawer",attrs:{"max-upload-size":t.maxUploadSize}})],1)],1):t._e()};n._withStripped=!0;const r=i({props:{spaceId:{type:String,default:null},maxUploadSize:{type:Number,default:2}},data:()=>({id:`Settings${parseInt(1e4*Math.random()).toString().toString()}`,displayed:!0}),created(){document.addEventListener("hideSettingsApps",(t=>{t&&t.detail&&this.id!==t.detail&&(this.displayed=!1)})),document.addEventListener("showSettingsApps",(()=>this.displayed=!0))},methods:{openDrawer(){this.$refs.spaceFormDrawer.open(this.spaceId)}}},n,[],!1,null,null,null).exports;var p=function(){var t=this,e=t._self._c;return e("div",[e("exo-drawer",{ref:"spaceFormDrawer",staticClass:"spaceFormDrawer",attrs:{right:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[e("template",{slot:"title"},[t._v("\n      "+t._s(t.$t("SpaceSettings.general"))+"\n    ")]),t._v(" "),t.drawer?e("template",{slot:"content"},[e("form",{ref:"form",staticClass:"ma-4 d-flex row",attrs:{disabled:t.savingSpace||t.spaceSaved},on:{submit:t.saveSpace}},[e("div",{staticClass:"width-full d-flex"},[e("space-setting-avatar",{ref:"spaceAvatar",staticClass:"mx-auto mb-6 mt-2",attrs:{"avatar-url":`${t.space.avatarUrl}&size=165x165`,"avatar-data":t.avatarData,hover:""},on:{edit:function(e){return t.$refs.imageCropDrawer.open()}}})],1),t._v(" "),e("v-label",{attrs:{for:"name"}},[t._v("\n          "+t._s(t.$t("SpaceSettings.label.name"))+"\n        ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.space.displayName,expression:"space.displayName"}],staticClass:"input-block-level ignore-vuetify-classes my-3",attrs:{placeholder:t.$t("SpaceSettings.label.displayName"),type:"text",name:"name",maxlength:"200",autofocus:"",required:""},domProps:{value:t.space.displayName},on:{input:function(e){e.target.composing||t.$set(t.space,"displayName",e.target.value)}}}),t._v(" "),e("v-label",{attrs:{for:"description"}},[t._v("\n          "+t._s(t.$t("SpaceSettings.label.description"))+"\n        ")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.space.description,expression:"space.description"}],staticClass:"input-block-level ignore-vuetify-classes my-3",attrs:{placeholder:t.$t("SpaceSettings.label.description"),name:"description",rows:"20",maxlength:"2000",noresize:""},domProps:{value:t.space.description},on:{input:function(e){e.target.composing||t.$set(t.space,"description",e.target.value)}}}),t._v(" "),e("v-label",{attrs:{for:"spaceTemplate"}},[t._v("\n          "+t._s(t.$t("SpaceSettings.label.spaceTemplate"))+"\n        ")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.template,expression:"template"}],staticClass:"input-block-level ignore-vuetify-classes my-3",attrs:{name:"spaceTemplate",disabled:"",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.template=e.target.multiple?a:a[0]}}},t._l(t.templates,(function(a){return e("option",{key:a.name,domProps:{value:a.name}},[t._v("\n            "+t._s(a.resolvedLabel||a.name)+"\n          ")])})),0),t._v(" "),e("div",{staticClass:"caption font-italic font-weight-light ps-1 muted"},[t._v(t._s(t.spaceTemplate&&t.spaceTemplate.resolvedDescription||""))]),t._v(" "),e("div",{staticClass:"d-flex flex-wrap pt-2"},[e("label",{staticClass:"v-label theme--light my-auto float-left",attrs:{for:"hidden"}},[t._v("\n            "+t._s(t.$t("SpaceSettings.label.hidden"))+"\n          ")]),t._v(" "),e("v-switch",{staticClass:"float-left my-0 ms-4",attrs:{"true-value":"hidden","false-value":"private"},model:{value:t.space.visibility,callback:function(e){t.$set(t.space,"visibility",e)},expression:"space.visibility"}})],1),t._v(" "),e("div",{staticClass:"caption font-italic font-weight-light ps-1 muted mb-2 mt-1"},[t._v("\n          "+t._s(t.$t(`SpaceSettings.description.${t.space.visibility||"hidden"}`))+"\n        ")]),t._v(" "),e("div",{staticClass:"d-flex flex-wrap pt-2"},[e("label",{staticClass:"v-label theme--light",attrs:{for:"hidden"}},[t._v("\n            "+t._s(t.$t("SpaceSettings.label.registration"))+"\n          ")]),t._v(" "),e("v-radio-group",{staticClass:"mt-2 ms-2",attrs:{mandatory:"",row:"",inset:""},model:{value:t.space.subscription,callback:function(e){t.$set(t.space,"subscription",e)},expression:"space.subscription"}},[e("v-radio",{staticClass:"my-0",attrs:{label:t.$t("SpaceSettings.label.open"),value:"open"}}),t._v(" "),e("v-radio",{staticClass:"my-0",attrs:{label:t.$t("SpaceSettings.label.validation"),value:"validation"}}),t._v(" "),e("v-radio",{staticClass:"my-0",attrs:{label:t.$t("SpaceSettings.label.closed"),value:"closed"}})],1)],1),t._v(" "),e("div",{staticClass:"caption font-italic font-weight-light ps-1 muted"},[t._v(t._s(t.$t(`SpaceSettings.description.${t.space.subscription||"open"}`)))]),t._v(" "),t.error?e("v-alert",{attrs:{type:"error"}},[t._v("\n          "+t._s(t.error)+"\n        ")]):t._e()],1)]):t._e(),t._v(" "),e("template",{slot:"footer"},[e("div",{staticClass:"d-flex"},[e("v-spacer"),t._v(" "),e("v-btn",{staticClass:"btn me-2",attrs:{disabled:t.savingSpace||t.spaceSaved},on:{click:t.cancel}},[[t._v("\n            "+t._s(t.$t("SpaceSettings.button.cancel"))+"\n          ")]],2),t._v(" "),e("v-btn",{staticClass:"btn btn-primary",attrs:{loading:t.savingSpace,disabled:t.saveButtonDisabled},on:{click:t.saveSpace}},[t.spaceSaved?e("v-icon",[t._v("mdi-check-all")]):[t._v("\n            "+t._s(t.$t("SpaceSettings.button.updateSpace"))+"\n          ")]],2)],1)])],2),t._v(" "),t.drawer?e("image-crop-drawer",{ref:"imageCropDrawer",attrs:{"crop-options":t.cropOptions,"max-file-size":t.maxUploadSizeInBytes,src:t.avatarData||`${t.space.avatarUrl}&size=0`,"max-image-width":"350","drawer-title":"UIChangeAvatarContainer.label.ChangeAvatar",rounded:""},on:{data:function(e){t.avatarData=e}},model:{value:t.space.avatarId,callback:function(e){t.$set(t.space,"avatarId",e)},expression:"space.avatarId"}}):t._e()],1)};p._withStripped=!0;const l=i({props:{maxUploadSize:{type:Number,default:()=>0}},data:()=>({drawer:!1,savingSpace:!1,spaceSaved:!1,space:{},spaceToUpdate:{},error:null,template:null,spaceTemplate:null,templates:[],avatarData:null,cropOptions:{aspectRatio:1,viewMode:1}}),computed:{saveButtonDisabled(){return this.savingSpace||this.spaceSaved||!this.space.id},maxUploadSizeInBytes(){return 1024*Number(this.maxUploadSize)*1024}},watch:{savingSpace(){this.savingSpace?this.$refs.spaceFormDrawer.startLoading():this.$refs.spaceFormDrawer.endLoading()}},mounted(){this.$spaceService.getSpaceTemplates().then((t=>(this.templates=t||[],this.spaceTemplate=this.templates.length&&this.templates[0]||null,this.template=this.spaceTemplate&&this.spaceTemplate.name,this.$nextTick())))},methods:{open(t){this.savingSpace=!1,this.spaceSaved=!1,this.spaceSaved=!1,this.error=null,this.template=null,this.spaceTemplate=null,this.avatarData=null,this.$refs.spaceAvatar&&this.$refs.spaceAvatar.reset(),this.space={},this.$spaceService.getSpaceById(t).then(this.editSpace)},editSpace(t){(t=t.detail&&t.detail.data||t)&&t.id?(this.spaceToUpdate=t,this.space=Object.assign({},t),this.template=this.space.template,this.$refs.spaceFormDrawer.open()):console.warn("space does not have an id ",t," ignore user action")},cancel(){this.$refs.spaceFormDrawer.close()},handleImageUploadError(t){t&&(String(t).indexOf(this.$uploadService.avatarExcceedsLimitError)>=0?this.error=this.$t("SpaceSettings.label.avatarExcceededAllowedSize",{0:this.maxUploadSize}):this.error=String(t),window.setTimeout((()=>{this.error=null}),5e3))},saveSpace(t){t&&(t.preventDefault(),t.stopPropagation()),this.spaceSaved||this.savingSpace||(this.error=null,this.savingSpace=!0,this.$spaceService.updateSpace({id:this.space.id,displayName:this.space.displayName,description:this.space.description,visibility:this.space.visibility,subscription:this.space.subscription,avatarId:this.space.avatarId}).then((t=>{Object.assign(this.spaceToUpdate,t,{managers:this.spaceToUpdate.managers}),this.spaceSaved=!0,document.dispatchEvent(new CustomEvent("spaceDetailUpdated",{detail:this.spaceToUpdate})),window.setTimeout((()=>{this.$refs.spaceFormDrawer.close()}),200),window.location.href=`${eXo.env.portal.context}/g/${t.groupId.replace(/\//g,":")}/${t.prettyName}/settings`})).catch((t=>{console.warn("Error updating space ",this.space,t),String(t).indexOf("SPACE_ALREADY_EXIST")>=0?this.error=this.$t("SpaceSettings.error.spaceWithSameNameExists"):String(t).indexOf("INVALID_SPACE_NAME")>=0?this.error=this.$t("spacesList.error.InvalidSpaceName"):this.error=this.$t("SpaceSettings.error.unknownErrorWhenSavingSpace")})).finally((()=>this.savingSpace=!1)))}}},p,[],!1,null,null,null).exports;var c=function(){var t=this,e=t._self._c;return e("v-avatar",{staticClass:"spaceAvatar",class:t.hover&&"spaceAvatarHoverEdit",attrs:{size:t.size}},[e("v-img",{attrs:{src:t.avatarData||t.avatarUrl||"",role:"presentation"}}),t._v(" "),e("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.hover,expression:"hover"}],ref:"avatarInput",staticClass:"changeAvatarButton mb-1",attrs:{id:"SpaceBannerEditButton",icon:"",dark:""},on:{click:function(e){return t.$emit("edit")}}},[e("v-icon",{attrs:{size:"18"}},[t._v("fas fa-camera")])],1)],1)};c._withStripped=!0;const o=i({props:{avatarUrl:{type:Object,default:null},avatarData:{type:Array,default:null},hover:{type:Boolean,default:!1},size:{type:Number,default:()=>165}}},c,[],!1,null,null,null).exports;var d=function(){var t=this,e=t._self._c;return t.displayed?e("div",[t.displayDetails?e("space-setting-applications-window",{attrs:{"space-id":t.spaceId,applications:t.applications},on:{back:t.closeDetail,refresh:t.refresh}}):e("v-card",{staticClass:"border-radius",attrs:{flat:""}},[e("v-list",[e("v-list-item",[e("v-list-item-content",[e("v-list-item-title",{staticClass:"title text-color"},[t._v("\n            "+t._s(t.$t("SpaceSettings.applications"))+"\n          ")])],1),t._v(" "),e("v-list-item-action",[e("v-btn",{attrs:{small:"",icon:""},on:{click:t.openDetail}},[e("v-icon",{staticClass:"text-sub-title",attrs:{size:"24"}},[t._v("\n              "+t._s(t.$vuetify.rtl?"fa-caret-left":"fa-caret-right")+"\n            ")])],1)],1)],1)],1)],1)],1):t._e()};d._withStripped=!0;const v=i({props:{spaceId:{type:Number,default:0}},data:()=>({id:`SpaceApplications${parseInt(1e4*Math.random()).toString().toString()}`,applications:null,displayed:!0,displayDetails:!1}),created(){document.addEventListener("hideSettingsApps",(t=>{t&&t.detail&&this.id!==t.detail&&(this.displayed=!1)})),document.addEventListener("showSettingsApps",(()=>this.displayed=!0))},methods:{refresh(){document.dispatchEvent(new CustomEvent("refreshSpaceNavigations")),this.$spaceService.getSpaceApplications(this.spaceId).then((t=>{this.applications=t}))},openDetail(){this.$spaceService.getSpaceApplications(this.spaceId).then((t=>{this.applications=t,document.dispatchEvent(new CustomEvent("hideSettingsApps",{detail:this.id})),this.displayDetails=!0}))},closeDetail(){this.displayDetails=!1,document.dispatchEvent(new CustomEvent("showSettingsApps"))}}},d,[],!1,null,null,null).exports;var u=function(){var t=this,e=t._self._c;return e("v-card",{attrs:{flat:""}},[e("exo-confirm-dialog",{ref:"deleteApplicationDialog",attrs:{message:t.deleteApplicationMessage,title:t.$t("SpaceSettings.title.deleteApplicationConfirm"),"ok-label":t.$t("SpaceSettings.label.yes"),"cancel-label":t.$t("SpaceSettings.label.no")},on:{ok:function(e){return t.removeConfirm()}}}),t._v(" "),e("v-toolbar",{staticClass:"border-box-sizing",attrs:{flat:""}},[e("v-btn",{staticClass:"mx-1",attrs:{icon:"",height:"36",width:"36"},on:{click:function(e){return t.$emit("back")}}},[e("v-icon",{attrs:{size:"20"}},[t._v("\n        "+t._s(t.$vuetify.rtl?"mdi-arrow-right":"mdi-arrow-left")+"\n      ")])],1),t._v(" "),e("v-toolbar-title",{staticClass:"ps-0"},[t._v("\n      "+t._s(t.$t("SpaceSettings.applications"))+"\n    ")]),t._v(" "),e("v-spacer")],1),t._v(" "),e("v-container",{staticClass:"border-box-sizing"},[e("v-row",{attrs:{dense:""}},[t._l(t.applications,(function(a,i){return e("v-col",{key:a.id,staticClass:"SpaceApplicationCard my-1 mx-auto mx-sm-1"},[e("space-setting-application-card",{attrs:{application:a,"space-id":t.spaceId,index:i,length:t.applications.length},on:{moveAfter:function(e){return t.moveAfter(a)},moveBefore:function(e){return t.moveBefore(a)},remove:function(e){return t.remove(a)}}})],1)})),t._v(" "),e("v-col",{staticClass:"SpaceApplicationCard dashed-border my-1 mx-auto mx-sm-1"},[e("v-btn",{staticClass:"primary--text",attrs:{width:"100%",height:"100%",text:""},on:{click:t.openDrawer}},[e("v-icon",[t._v("mdi-plus")])],1)],1)],2)],1),t._v(" "),e("space-setting-add-application-drawer",{ref:"spaceSettingAddApplicationDrawer",attrs:{"space-id":t.spaceId,"installed-applications":t.applications},on:{refresh:function(e){return t.$emit("refresh")}}})],1)};u._withStripped=!0;const m=i({props:{spaceId:{type:String,default:null},applications:{type:Array,default:()=>[]}},data:()=>({deleteApplicationMessage:null,selectedApplication:null,saving:!1}),methods:{moveAfter(t){this.$spaceService.moveApplicationDown(this.spaceId,t.id).then((()=>this.$emit("refresh")))},moveBefore(t){this.$spaceService.moveApplicationUp(this.spaceId,t.id).then((()=>this.$emit("refresh")))},remove(t){this.selectedApplication=t,this.deleteApplicationMessage=this.$t("SpaceSettings.deleApplicationConfirm",{0:t.displayName}),this.$refs.deleteApplicationDialog.open()},removeConfirm(){this.$spaceService.removeApplication(this.spaceId,this.selectedApplication.id).then((()=>this.$emit("refresh")))},openDrawer(){this.$refs.spaceSettingAddApplicationDrawer.open()}}},u,[],!1,null,null,null).exports;var h=function(){var t=this,e=t._self._c;return e("v-card",{attrs:{id:t.applicationId,flat:""}},[e("div",{staticClass:"d-flex flex-no-wrap"},[e("v-avatar",{staticClass:"SpaceApplicationCardImage mx-1 my-auto",attrs:{size:"45",tile:""}},[e("i",{class:t.applicationIcon})]),t._v(" "),e("div",{staticClass:"flex-grow-1 SpaceApplicationCardBody text-truncate"},[e("div",{staticClass:"text-truncate subtitle-1 px-1 pt-4 text-color SpaceApplicationCardTitle",attrs:{title:t.applicationName}},[t._v("\n        "+t._s(t.applicationName)+"\n      ")]),t._v(" "),e("v-card-subtitle",{staticClass:"text-truncate subtitle-2 px-1 pt-0 text-sub-title SpaceApplicationCardDescription",attrs:{title:t.applicationDescription}},[t._v("\n        "+t._s(t.applicationDescription||t.applicationName)+"\n      ")])],1),t._v(" "),e("div",{staticClass:"SpaceApplicationCardAction"},[t.spaceId?e("v-btn",{staticClass:"primary--text",attrs:{icon:"",text:""},on:{click:function(e){t.displayActionMenu=!0}}},[e("v-icon",{attrs:{size:"16"}},[t._v("mdi-dots-vertical")])],1):e("v-btn",{staticClass:"primary--text",attrs:{text:"",height:"100%",width:"100%px"},on:{click:function(e){return t.$emit("add")}}},[e("v-icon",{attrs:{size:"36"}},[t._v("mdi-plus")])],1),t._v(" "),e("v-menu",{ref:"actionMenu",attrs:{attach:`#${t.applicationId}`,transition:"slide-x-reverse-transition","offset-y":"",right:"","close-on-click":"","close-on-content-click":""},model:{value:t.displayActionMenu,callback:function(e){t.displayActionMenu=e},expression:"displayActionMenu"}},[e("v-list",{staticClass:"pa-0",attrs:{dense:""}},[t.applicationRemovable?e("v-list-item",{on:{click:function(e){return t.$emit("remove")}}},[e("v-list-item-title",[t._v("\n              "+t._s(t.$t("SpaceSettings.button.remove"))+"\n            ")])],1):t._e(),t._v(" "),t.firstApplication?t._e():e("v-list-item",{on:{click:function(e){return t.$emit("moveBefore")}}},[e("v-list-item-title",[t._v("\n              "+t._s(t.$t("SpaceSettings.button.moveBefore"))+"\n            ")])],1),t._v(" "),t.lastApplication?t._e():e("v-list-item",{on:{click:function(e){return t.$emit("moveAfter")}}},[e("v-list-item-title",[t._v("\n              "+t._s(t.$t("SpaceSettings.button.moveAfter"))+"\n            ")])],1)],1)],1)],1)],1)])};h._withStripped=!0;const f=i({props:{spaceId:{type:Object,default:null},application:{type:String,default:null},index:{type:Number,default:0},length:{type:Number,default:0}},data:()=>({displayActionMenu:!1}),computed:{firstApplication(){return 0===this.index},lastApplication(){return this.index===this.length-1},applicationRemovable(){return this.application&&this.application.id&&this.application.removable&&"true"===String(this.application.removable)},applicationId(){return this.application&&this.application.id},applicationName(){return this.application&&this.$t(`SpaceSettings.application.${/\s/.test(this.application.displayName)?this.application.displayName.replace(/ /g,".").toLowerCase():this.application.displayName.toLowerCase()}.title`)},applicationDescription(){return this.application&&this.$t(`SpaceSettings.application.${/\s/.test(this.application.displayName)?this.application.displayName.replace(/ /g,".").toLowerCase():this.application.displayName.toLowerCase()}.description`)},applicationIcon(){return this.application&&this.application.id?`uiIconApp${this.application.id.charAt(0).toUpperCase()}${this.application.id.substring(1)} uiIconDefaultApp`:""}},mounted(){this.spaceId&&$(document).on("click",(t=>{t.target&&!$(t.target).parents(`#${this.applicationId}`).length&&(this.displayActionMenu=!1)}))}},h,[],!1,null,null,null).exports;var g=function(){var t=this,e=t._self._c;return e("exo-drawer",{ref:"spaceApplicationInstallerDrawer",staticClass:"spaceApplicationInstallerDrawer",attrs:{right:""}},[e("template",{slot:"title"},[t._v("\n    "+t._s(t.$t("SpaceSettings.title.addApplication"))+"\n  ")]),t._v(" "),e("template",{slot:"content"},t._l(t.filteredApplications,(function(a){return e("div",{key:a.id,staticClass:"d-flex flex-no-wrap justify-space-between border-radius border-color ma-3"},[e("space-setting-application-card",{staticClass:"flex-grow-1",attrs:{application:a},on:{add:function(e){return t.addApplication(a)}}})],1)})),0)],2)};g._withStripped=!0;const S={"space-settings":s,"space-setting-general":r,"space-setting-avatar":o,"space-setting-form-drawer":l,"space-setting-applications":v,"space-setting-applications-window":m,"space-setting-application-card":f,"space-setting-add-application-drawer":i({props:{spaceId:{type:String,default:null},installedApplications:{type:Array,default:()=>[]}},data:()=>({savingSpace:!1,applications:[]}),computed:{filteredApplications(){return this.applications&&this.applications.length?this.applications.filter((t=>!this.installedApplications.find((e=>e.contentId===t.contentId)))):[]}},watch:{savingSpace(){this.savingSpace?this.$refs.spaceApplicationInstallerDrawer.startLoading():this.$refs.spaceApplicationInstallerDrawer.endLoading()}},created(){this.$spaceService.getSpaceApplicationsChoices().then((t=>this.applications=t))},methods:{open(){this.savingSpace=!1,this.$refs.spaceApplicationInstallerDrawer.open()},cancel(){this.$refs.spaceApplicationInstallerDrawer.close()},addApplication(t){this.savingSpace||(this.savingSpace=!0,this.$spaceService.addApplication(this.spaceId,t.contentId.split("/")[1]).then((()=>{this.$emit("refresh"),window.setTimeout((()=>{this.$refs.spaceApplicationInstallerDrawer.close()}),200)})).catch((t=>{console.warn("Error adding application to space ",t)})).finally((()=>this.savingSpace=!1)))}}},g,[],!1,null,null,null).exports};for(const t in S)Vue.component(t,S[t]);if(extensionRegistry){const t=extensionRegistry.loadComponents("SpaceSettings");t&&t.length>0&&t.forEach((t=>{Vue.component(t.componentName,t.componentOptions)}))}document.dispatchEvent(new CustomEvent("displayTopBarLoading"));const _=eXo&&eXo.env.portal.language||"en",b=`${eXo.env.portal.context}/${eXo.env.portal.rest}/i18n/bundle/locale.portlet.Portlets-${_}.json`;function y(){exoi18n.loadLanguageAsync(_,b).then((t=>{Vue.createApp({mounted(){document.dispatchEvent(new CustomEvent("hideTopBarLoading"))},template:"<space-settings />",i18n:t,vuetify:Vue.prototype.vuetifyOptions},"#SpaceSettings","Space Settings")}))}return e})()));