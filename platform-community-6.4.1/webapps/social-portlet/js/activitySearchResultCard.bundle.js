define((()=>(()=>{"use strict";var t={d:(e,i)=>{for(var r in i)t.o(i,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{formatSearchResult:()=>c});var i=function(){var t=this,e=t._self._c;return e("v-card",{staticClass:"d-flex flex-column border-radius box-shadow",attrs:{flat:"","min-height":"227"}},[t.poster?e("v-card-text",{staticClass:"px-2 pt-2 pb-0"},[e("exo-user-avatar",{attrs:{identity:t.poster,popover:""}},[e("template",{slot:"subTitle"},[e("date-format",{attrs:{value:t.postedTime}})],1),t._v(" "),e("template",{slot:"actions"},[e("activity-favorite-action",{staticClass:"ms-3",attrs:{activity:t.result,absolute:"",top:"0",right:"0"},on:{removed:function(e){return t.$emit("refresh-favorite")}}})],1)],2)],1):t._e(),t._v(" "),e("div",{staticClass:"mx-auto flex-grow-1 px-3 py-0"},[e("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.excerptHtml,expression:"excerptHtml"}],ref:"excerptNode",staticClass:"text-wrap text-break caption text-truncate-4",attrs:{title:t.excerptText}})]),t._v(" "),e("v-list",{staticClass:"light-grey-background flex-grow-0 border-top-color no-border-radius pa-0"},[e("v-list-item",{staticClass:"px-0 pt-1 pb-2",attrs:{href:t.link}},[e("v-list-item-icon",{staticClass:"mx-0 my-auto"},[e("span",{staticClass:"tertiary--text ps-1 pe-2 display-1",class:t.activityIcon})]),t._v(" "),e("v-list-item-content",[e("v-list-item-title",{attrs:{title:t.activityReactions}},[t._v("\n          "+t._s(t.activityReactions)+"\n        ")]),t._v(" "),e("v-list-item-subtitle",[t._v("\n          "+t._s(t.activityStreamOwner)+"\n        ")])],1)],1)],1)],1)};function r(t,e,i,r,s,a,o,n){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=i,l._compiled=!0),r&&(l.functional=!0),a&&(l._scopeId="data-v-"+a),o?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=c):s&&(c=n?function(){s.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:s),c)if(l.functional){l._injectStyles=c;var p=l.render;l.render=function(t,e){return c.call(e),p(t,e)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:t,options:l}}i._withStripped=!0;const s=r({props:{term:{type:String,default:null},result:{type:Object,default:null}},data:()=>({maxEllipsisHeight:90,lineHeight:22,profileActionExtensions:[]}),computed:{isComment(){return this.result&&this.result.comment},activity(){return this.isComment&&this.result.comment||this.result},poster(){return this.activity&&this.activity.poster.profile},body(){return this.activity&&this.activity.body},posterFullname(){return this.poster&&this.poster.fullname},posterUsername(){return this.poster&&this.poster.username},posterIsExternal(){return this.poster&&(this.poster.isExternal||this.poster.external)},streamOwner(){return this.activity&&this.activity.streamOwner.space||this.activity.streamOwner.profile},spaceDisplayName(){return this.streamOwner&&this.streamOwner.displayName},excerpts(){return this.activity&&this.activity.excerpts||this.activity.title&&[this.activity.title]||this.activity.body&&[this.activity.body]},excerptHtml(){return this.excerpts&&this.excerpts.join("<br />...")||this.body||""},excerptText(){return $("<div />").html(this.excerptHtml).text()},activityType(){return this.result?this.result.comment&&this.result.comment.type||this.result.type:""},activityIcon(){if(!this.result)return"";let t=this.activityType&&this.activityType.replace(":","_")||"";return t=`uiIcon${t.charAt(0).toUpperCase()}${t.substring(1)}`,`uiIconActivity ${t}`},activityLikes(){if(!this.result)return"";const t=this.result.likesCount||0;return this.$t("Search.activity.likesCount",{0:t})},activityComments(){const t=this.result.commentsCount||0;return this.$t("Search.activity.commentsCount",{0:t})},activityReactions(){return`${this.activityLikes}, ${this.activityComments}`},activityStreamOwner(){return this.result&&(this.result.streamOwner.profile&&this.result.streamOwner.profile.fullname||this.result.streamOwner.space&&this.result.streamOwner.space.displayName)||""},postedTime(){return this.result?this.result.comment&&this.result.comment.postedTime||this.result.postedTime:""},link(){return this.isComment?`/${eXo.env.portal.containerName}/${eXo.env.portal.portalName}/activity?id=${this.result.id}#comment-comment${this.result.comment.id}`:`/${eXo.env.portal.containerName}/${eXo.env.portal.portalName}/activity?id=${this.activity.id}`}},created(){this.profileActionExtensions=extensionRegistry.loadExtensions("profile-extension","action")||[]}},i,[],!1,null,null,null).exports;var a=function(){var t=this,e=t._self._c;return t.isActivityShared?t._e():e("favorite-button",{attrs:{id:t.metadataObjectId,type:t.metadataObjectType,"space-id":t.spaceId,favorite:t.isFavorite,absolute:t.absolute,top:t.top,right:t.right,"template-params":t.templateParams,"type-label":t.extensionName},on:{removed:t.removed,"remove-error":t.removeError,added:t.added,"add-error":t.addError}})};a._withStripped=!0;const o=r({props:{activity:{type:Object,default:null},activityTypeExtension:{type:String,default:null},isActivityShared:{type:Boolean,default:!1},absolute:{type:Boolean,default:!1},top:{type:Number,default:()=>0},right:{type:Number,default:()=>0}},data:()=>({isFavorite:!1}),computed:{activityId(){return this.activity&&this.activity.id},spaceId(){return this.activity&&this.activity.activityStream&&this.activity.activityStream.space&&this.activity.activityStream.space.id},templateParams(){return this.activity&&this.activity.templateParams},extensionName(){return this.activityTypeExtension&&this.activityTypeExtension.name},metadataObjectId(){return this.activity?.templateParams?.metadataObjectId||this.activityId},metadataObjectType(){return this.activity?.templateParams?.metadataObjectType||"activity"}},created(){this.isFavorite=this.activity&&this.activity.metadatas&&this.activity.metadatas.favorites&&this.activity.metadatas.favorites.length},methods:{removed(){this.displayAlert(this.$t("Favorite.tooltip.SuccessfullyDeletedFavorite",{0:this.$t("activity.label")})),this.$emit("removed"),document.dispatchEvent(new CustomEvent("activity-favorite-removed",{detail:this.activity}))},removeError(){this.displayAlert(this.$t("Favorite.tooltip.ErrorDeletingFavorite",{0:this.$t("activity.label")}),"error")},added(){this.displayAlert(this.$t("Favorite.tooltip.SuccessfullyAddedAsFavorite",{0:this.$t("activity.label")})),this.$emit("added")},addError(){this.displayAlert(this.$t("Favorite.tooltip.ErrorAddingAsFavorite",{0:this.$t("activity.label")}),"error")},displayAlert(t,e){document.dispatchEvent(new CustomEvent("notification-alert",{detail:{message:t,type:e||"success"}}))}}},a,[],!1,null,null,null).exports,n={"activity-search-result-card":s};n["activity-favorite-action"]=o;for(const t in n)Vue.component(t,n[t]);if(extensionRegistry){const t=extensionRegistry.loadComponents("SearchActivityCard");t&&t.length>0&&t.forEach((t=>{Vue.component(t.componentName,t.componentOptions)}))}function c(t){return t}return e})()));