define((()=>(()=>{"use strict";var t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{init:()=>L});var s=function(){var t=this,e=t._self._c;return e("v-app",[e("v-main",[e("v-card",{staticClass:"px-4 py-6 mb-12 mb-sm-0",attrs:{color:"white",flat:""}},[e("profile-settings-header",{attrs:{filter:t.filter}}),t._v(" "),e("profile-settings-table",{attrs:{settings:t.filteredSettings}}),t._v(" "),e("profile-setting-form-drawer",{attrs:{settings:t.settings,languages:t.languages}}),t._v(" "),e("v-alert",{attrs:{icon:"warning"===t.type?"mdi-alert-circle":"",type:t.type,dismissible:""},model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[t._v("\n        "+t._s(t.message)+"\n      ")])],1)],1)],1)};function i(t,e,s,i,n,a,l,r){var o,p="function"==typeof t?t.options:t;if(e&&(p.render=e,p.staticRenderFns=s,p._compiled=!0),i&&(p.functional=!0),a&&(p._scopeId="data-v-"+a),l?(o=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(l)},p._ssrRegister=o):n&&(o=r?function(){n.call(this,(p.functional?this.parent:this).$root.$options.shadowRoot)}:n),o)if(p.functional){p._injectStyles=o;var d=p.render;p.render=function(t,e){return o.call(e),d(t,e)}}else{var c=p.beforeCreate;p.beforeCreate=c?[].concat(c,o):[o]}return{exports:t,options:p}}s._withStripped=!0;const n=i({props:{languages:{type:Array,default:null}},data:()=>({alert:!1,type:"",message:"",settings:[],filter:"Active"}),created(){this.$root.$on("update-setting",this.editSetting),this.$root.$on("create-setting",this.createSetting),this.$root.$on("update-labels",this.updateLabels),this.$root.$on("create-labels",this.createLabels),this.$root.$on("delete-labels",this.deleteLabels),this.$root.$on("move-up-setting",this.moveUpSetting),this.$root.$on("move-down-setting",this.moveDownSetting),this.$root.$on("settings-set-filter",this.setFilter),this.$root.$on("cancel-edit-add",this.displayNoChangeWarning),this.languages=this.languages.sort(((t,e)=>t.value.localeCompare(e.value))),this.getSettings()},computed:{isMobile(){return"sm"===this.$vuetify.breakpoint.name||"xs"===this.$vuetify.breakpoint.name||"md"===this.$vuetify.breakpoint.name},filteredSettings(){return"Active"===this.filter?this.settings.filter((function(t){return t.active})):"Inactive"===this.filter?this.settings.filter((function(t){return!t.active})):this.settings}},methods:{displayMessage(t){this.message=t.message,this.type=t.type,this.alert=!0,window.setTimeout((()=>this.alert=!1),5e3)},getSettings(){return this.$profileSettingsService.getSettings().then((t=>{this.settings=t||[]}))},editSetting(t,e){this.$profileSettingsService.updateSetting(t).then((()=>{this.$root.$emit("close-settings-form-drawer"),e&&this.getSettings(),this.displayMessage({type:"success",message:this.$t("profileSettings.update.success.message")})})).catch((t=>{console.error(t),this.displayMessage({type:"error",message:this.$t(t.message)})}))},createSetting(t){this.$profileSettingsService.addSetting(t).then((e=>{t.labels&&t.labels.length>0?(t.labels.forEach((t=>{t.objectId=e.id})),this.$profileLabelService.addLabels(t.labels).then((()=>{this.$root.$emit("close-settings-form-drawer"),this.getSettings(),this.displayMessage({type:"success",message:this.$t("profileSettings.create.success.message")})}))):(this.$root.$emit("close-settings-form-drawer"),this.getSettings(),this.displayMessage({type:"success",message:this.$t("profileSettings.create.success.message")}))})).catch((t=>{console.error(t),this.displayMessage({type:"error",message:this.$t(t.message)})}))},updateLabels(t){this.$profileLabelService.updateLabels(t)},createLabels(t){this.$profileLabelService.addLabels(t)},deleteLabels(t){this.$profileLabelService.deleteLabels(t)},setFilter(t){this.filter=t},moveUpSetting(t){this.moveSetting(t,"up")},moveDownSetting(t){this.moveSetting(t,"down")},displayNoChangeWarning(){this.displayMessage({type:"warning",message:this.$t("profileSettings.nochange.warning.message")})},moveSetting(t,e){this.settings.sort(((t,e)=>t.order>e.order?1:t.order<e.order?-1:0));const s=this.settings.findIndex((e=>e.id===t.id));if(s>0&&"up"===e){const t=this.settings[s].order;this.settings[s].order=this.settings[s-1].order,this.settings[s-1].order=t,this.editSetting(this.settings[s],!1),this.editSetting(this.settings[s-1],!0)}if(s<this.settings.length&&"down"===e){const t=this.settings[s].order;this.settings[s].order=this.settings[s+1].order,this.settings[s+1].order=t,this.editSetting(this.settings[s],!1),this.editSetting(this.settings[s+1],!0)}}}},s,[],!1,null,null,null).exports;var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-row",attrs:{id:"settingsHeader"}},[e("button",{staticClass:"btn btn-primary primary px-2 py-0",on:{click:function(e){return t.openCreateDrawer()}}},[e("v-icon",{attrs:{dark:""}},[t._v("\n      mdi-plus\n    ")]),t._v("\n    "+t._s(t.$t("profileSettings.button.addNew"))+"\n  ")],1),t._v(" "),e("v-spacer"),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"width-auto my-auto ignore-vuetify-classes d-none d-sm-inline",attrs:{id:"filterSettingsSelect"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.filter=e.target.multiple?s:s[0]},t.changeSettingsFilter]}},t._l(t.filterSettings,(function(s){return e("option",{key:s.name,domProps:{value:s.name}},[t._v("\n      "+t._s(t.$t("profileSettings.filter."+s.name.toLowerCase()))+"\n    ")])})),0)],1)};a._withStripped=!0;const l=i({props:{filter:{type:String,default:"Active"}},data:()=>({filterSettings:[{name:"Active"},{name:"Inactive"},{name:"All"}]}),methods:{openCreateDrawer(){this.$root.$emit("open-settings-create-drawer")},changeSettingsFilter(){this.$root.$emit("settings-set-filter",this.filter)}}},a,[],!1,null,null,null).exports;var r=function(){var t=this,e=t._self._c;return e("v-data-table",{ref:"dataTable",staticClass:"settings-table data-table-light-border py-6",attrs:{headers:t.headers,items:t.settings,"items-per-page":t.pageSize,loading:t.loading,locale:t.lang,"sort-by":t.sortBy,"hide-default-footer":"","disable-pagination":"","disable-filtering":""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e}},scopedSlots:t._u([{key:"item.propertyName",fn:function({item:e}){return[t._v("\n    "+t._s(t.getResolvedName(e))+"\n  ")]}},{key:"item.actions",fn:function({item:s}){return[e("profile-settings-actions-cell",{attrs:{setting:s,settings:t.settings}})]}},{key:"no-data",fn:function(){return[t._v(t._s(t.$t("profileSettings.noSettings")))]},proxy:!0}])},[t._v(" "),t._v(" "),t._v(" "),t.hasMore?e("template",{slot:"footer"},[e("v-flex",{staticClass:"d-flex py-2 border-box-sizing mb-1"},[e("v-btn",{staticClass:"white mx-auto no-border primary--text no-box-shadow",attrs:{loading:t.loading,disabled:t.loading},on:{click:function(e){return t.$root.$emit("document-load-more")}}},[t._v("\n        "+t._s(t.$t("profileSettings.loadMore"))+"\n      ")])],1)],1):t._e()],2)};r._withStripped=!0;const o={props:{settings:{type:Object,default:null},pageSize:{type:Number,default:20},offset:{type:Number,default:20},limit:{type:Number,default:20},loading:{type:Boolean,default:!1},hasMore:{type:Boolean,default:!1},sortBy:{type:String,default:"order"}},data:()=>({waitTimeUntilCloseMenu:200,lang:eXo.env.portal.language}),computed:{headers(){return[{text:this.$t&&this.$t("profileSettings.propertyName"),value:"propertyName",sortable:!1},{text:this.$t&&this.$t("profileSettings.actions"),value:"actions",align:"center",width:"60px",class:"actions-column",sortable:!1}]}},methods:{getResolvedName(t){const e=eXo&&eXo.env.portal.language||"en",s=t.labels?t.labels.find((t=>t.language===e)):null;return s?s.label:this.$t&&this.$t(`profileSettings.property.name.${t.propertyName}`)!==`profileSettings.property.name.${t.propertyName}`?this.$t(`profileSettings.property.name.${t.propertyName}`):t.propertyName}}},p=i(o,r,[],!1,null,null,null).exports;var d=function(){var t=this,e=t._self._c;return e("v-list",{attrs:{dense:""}},[e("v-list-item",{staticClass:"px-2 text-left"},[e("div",{staticClass:"clickable mx-2",on:{click:function(e){return t.edit()}}},[e("v-icon",{staticClass:"pe-1",attrs:{size:"21"}},[t._v("\n        fas fa-edit\n      ")]),t._v(" "),e("span",{staticClass:"ps-1"},[t._v(t._s(t.$t("profileSettings.label.edit")))])],1)]),t._v(" "),t.canMoveUp?e("v-list-item",{staticClass:"menu-list px-2 text-left action-menu-item"},[e("div",{staticClass:"clickable mx-2",on:{click:function(e){return t.moveUp()}}},[e("v-icon",{staticClass:"pe-1",attrs:{size:"21"}},[t._v("\n        mdi-mouse-move-up\n      ")]),t._v(" "),e("span",{staticClass:"ps-1"},[t._v(t._s(t.$t("profileSettings.label.moveUp")))])],1)]):t._e(),t._v(" "),t.canMoveDown?e("v-list-item",{staticClass:"menu-list px-2 text-left action-menu-item"},[e("div",{staticClass:"clickable mx-2",on:{click:function(e){return t.moveDown()}}},[e("v-icon",{staticClass:"pe-1",attrs:{size:"21"}},[t._v("\n        mdi-mouse-move-down\n      ")]),t._v(" "),e("span",{staticClass:"ps-1"},[t._v(t._s(t.$t("profileSettings.label.moveDown")))])],1)]):t._e()],1)};d._withStripped=!0;const c=i({props:{setting:{type:Object,default:null},settings:{type:Object,default:null}},computed:{isMobile(){return"xs"===this.$vuetify.breakpoint.name||"sm"===this.$vuetify.breakpoint.name},index(){return this.settings.findIndex((t=>t.id===this.setting.id))},canMoveUp(){return this.index>0},canMoveDown(){return this.index<this.settings.length-1}},methods:{edit(){this.$root.$emit("open-settings-edit-drawer",JSON.parse(JSON.stringify(this.setting)))},moveUp(){this.$root.$emit("move-up-setting",this.setting)},moveDown(){this.$root.$emit("move-down-setting",this.setting)}}},d,[],!1,null,null,null).exports;var g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-nowrap"},[e("div",{attrs:{id:`setting-action-menu-cel-${t.setting.id}`}},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e("v-btn",t._g(t._b({attrs:{icon:"",small:""}},"v-btn",i,!1),s),[e("v-icon",{staticClass:"clickable text-sub-title button-settings-action",attrs:{size:t.isMobile?14:18},on:{click:function(e){return t.displayActionMenu()}}},[t._v("\n            mdi-dots-vertical\n          ")])],1),t._v(" "),e("v-menu",{attrs:{attach:`#setting-action-menu-cel-${t.setting.id}`,transition:"slide-x-reverse-transition","content-class":t.isMobile?"settingsActionMenuMobile":"settingsActionMenu","offset-y":"","offset-x":"","close-on-click":"",absolute:""},model:{value:t.menuDisplayed,callback:function(e){t.menuDisplayed=e},expression:"menuDisplayed"}},[e("profile-settings-action-menu",{attrs:{setting:t.setting,settings:t.settings}})],1)]}}])},[t._v(" "),e("span",[t._v("\n        "+t._s(t.menuActionTooltip)+"\n      ")])])],1)])};g._withStripped=!0;const u=i({props:{setting:{type:Object,default:null},settings:{type:Object,default:null}},data:()=>({loading:!1,menuDisplayed:!1,waitTimeUntilCloseMenu:200}),computed:{isMobile(){return"xs"===this.$vuetify.breakpoint.name||"sm"===this.$vuetify.breakpoint.name},menuActionTooltip(){return this.$t("profileSettings.label.menu.action.tooltip")}},created(){$(document).on("mousedown",(()=>{this.menuDisplayed&&window.setTimeout((()=>{$(`#setting-action-menu-cel-${this.setting.id}`).parent().parent().parent().parent().css("background","#fff"),this.menuDisplayed=!1}),this.waitTimeUntilCloseMenu)}))},methods:{displayActionMenu(){this.isMobile?this.$root.$emit("open-setting-action-menu",this.setting):(this.menuDisplayed=!0,$(`#setting-action-menu-cel-${this.setting.id}`).parent().parent().parent().parent().css("background","#eee"))}}},g,[],!1,null,null,null).exports;var h=function(){var t=this,e=t._self._c;return e("exo-drawer",{ref:"profileSettingFormDrawer",attrs:{id:"profileSettingFormDrawer",right:""},on:{closed:t.cancel}},[e("template",{slot:"title"},[t._v("\n    "+t._s(t.title)+"\n  ")]),t._v(" "),e("template",{slot:"content"},[e("v-form",{ref:"settingForm",staticClass:"form-horizontal pt-0 pb-4",attrs:{flat:""}},[t.error?e("v-card-text",{staticClass:"errorMessage"},[e("v-alert",{attrs:{type:"error"}},[t._v("\n          "+t._s(t.error)+"\n        ")])],1):t._e(),t._v(" "),e("v-card-text",{staticClass:"d-flex settingNameLabel flex-grow-1 text-no-wrap text-left font-weight-bold pb-2"},[t._v("\n        "+t._s(t.$t("profileSettings.label.name"))),t.newSetting?[t._v("*")]:t._e()],2),t._v(" "),e("v-card-text",{staticClass:"d-flex settingNameField py-0"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.setting.propertyName,expression:"setting.propertyName"}],ref:"settingNameInput",staticClass:"ignore-vuetify-classes flex-grow-1",attrs:{disabled:t.saving||!t.newSetting,autofocus:t.drawer,placeholder:t.$t("profileSettings.placeholder.name"),type:"text",maxlength:"2000",required:""},domProps:{value:t.setting.propertyName},on:{input:function(e){e.target.composing||t.$set(t.setting,"propertyName",e.target.value)}}})]),t._v(" "),e("v-card-text",{staticClass:"d-flex settingLabelsLabel flex-grow-1 text-no-wrap text-left font-weight-bold pb-2"},[t._v("\n        "+t._s(t.$t("profileSettings.label.labels"))+"\n      ")]),t._v(" "),e("v-card-text",{staticClass:"d-flex settingNameField py-0"},[e("profile-property-labels",{attrs:{propertylabels:t.labels,languages:t.languages,"labels-object-type":t.labelsObjectType,id:t.setting.id}})],1),t._v(" "),e("v-card-text",{staticClass:"d-flex parentLabel flex-grow-1 text-no-wrap text-left font-weight-bold pb-2"},[t._v("\n        "+t._s(t.$t("profileSettings.label.parent"))+"\n      ")]),t._v(" "),e("v-card-text",{staticClass:"d-flex settingParentField py-0 pl-0 pr-7"},[e("v-autocomplete",{ref:"settingParentField",staticClass:"d-flex pa-4 ignore-vuetify-classes flex-grow-1",attrs:{id:"settingParentField",items:t.parents,placeholder:t.$t("profileSettings.placeholder.parent"),outlined:"",dense:"",width:"100%","max-width":"100%","item-text":"resolvedLabel","item-value":"id"},on:{blur:function(e){return t.blurAutocomplete()}},model:{value:t.setting.parentId,callback:function(e){t.$set(t.setting,"parentId",e)},expression:"setting.parentId"}})],1),t._v(" "),e("v-list-item",{staticClass:"pt-4"},[e("v-list-item-content",{staticClass:"d-flex visibleLabel py-0",attrs:{transition:"fade-transition"}},[e("v-list-item-title",{staticClass:"d-flex visibleLabel flex-grow-1 text-no-wrap text-left font-weight-bold pb-2"},[e("div",[t._v("\n              "+t._s(t.$t("profileSettings.label.visible"))+"\n            ")])])],1),t._v(" "),e("v-list-item-action",[e("v-switch",{staticClass:"visibleSwitcher my-auto",attrs:{disabled:t.saving,ripple:!1,color:"primary"},model:{value:t.setting.visible,callback:function(e){t.$set(t.setting,"visible",e)},expression:"setting.visible"}})],1)],1),t._v(" "),e("v-list-item",[e("v-list-item-content",{staticClass:"d-flex editableLabel py-0",attrs:{transition:"fade-transition"}},[e("v-list-item-title",{staticClass:"d-flex editableLabel flex-grow-1 text-no-wrap text-left font-weight-bold pb-2"},[e("div",[t._v("\n              "+t._s(t.$t("profileSettings.label.editable"))+"\n            ")])])],1),t._v(" "),e("v-list-item-action",[e("v-switch",{staticClass:"editableSwitcher my-auto",attrs:{disabled:t.saving,ripple:!1,color:"primary"},model:{value:t.setting.editable,callback:function(e){t.$set(t.setting,"editable",e)},expression:"setting.editable"}})],1)],1),t._v(" "),e("v-list-item",[e("v-list-item-content",{staticClass:"d-flex requiredField py-0",attrs:{transition:"fade-transition"}},[e("v-list-item-title",{staticClass:"d-flex requiredLabel flex-grow-1 text-no-wrap text-left font-weight-bold pb-2"},[e("div",[t._v("\n              "+t._s(t.$t("profileSettings.label.required"))+"\n            ")])])],1),t._v(" "),e("v-list-item-action",[e("v-switch",{staticClass:"requiredSwitcher my-auto",attrs:{disabled:t.saving,ripple:!1,color:"primary"},model:{value:t.setting.required,callback:function(e){t.$set(t.setting,"required",e)},expression:"setting.required"}})],1)],1),t._v(" "),e("v-list-item",[e("v-list-item-content",{staticClass:"d-flex multiValuedField py-0",attrs:{transition:"fade-transition"}},[e("v-list-item-title",{staticClass:"d-flex multiValuedLabel flex-grow-1 text-no-wrap text-left font-weight-bold pb-2"},[e("div",[t._v("\n              "+t._s(t.$t("profileSettings.label.multiValued"))+"\n            ")])])],1),t._v(" "),e("v-list-item-action",[e("v-switch",{staticClass:"requiredSwitcher my-auto",attrs:{disabled:t.saving,ripple:!1,color:"primary"},model:{value:t.setting.multiValued,callback:function(e){t.$set(t.setting,"multiValued",e)},expression:"setting.multiValued"}})],1)],1),t._v(" "),e("v-list-item",[e("v-list-item-content",{staticClass:"d-flex groupSynchronizedField py-0",attrs:{transition:"fade-transition"}},[e("v-list-item-title",{staticClass:"d-flex groupSynchronizedLabel flex-grow-1 text-no-wrap text-left font-weight-bold pb-2"},[e("div",[t._v("\n              "+t._s(t.$t("profileSettings.label.groupSynchronized"))+"\n            ")])])],1),t._v(" "),e("v-list-item-action",[e("v-switch",{staticClass:"groupSynchronizedSwitcher my-auto",attrs:{disabled:t.saving||!t.setting.groupSynchronizationEnabled,ripple:!1,color:"primary"},model:{value:t.setting.groupSynchronized,callback:function(e){t.$set(t.setting,"groupSynchronized",e)},expression:"setting.groupSynchronized"}})],1)],1),t._v(" "),e("v-list-item",[e("v-list-item-content",{staticClass:"d-flex activeLabel py-0",attrs:{transition:"fade-transition"}},[e("v-list-item-title",{staticClass:"d-flex activedLabel flex-grow-1 text-no-wrap text-left font-weight-bold pb-2"},[e("div",[t._v("\n              "+t._s(t.$t("profileSettings.label.active"))+"\n            ")])])],1),t._v(" "),e("v-list-item-action",[e("v-switch",{staticClass:"activeSwitcher my-auto",attrs:{disabled:t.saving,ripple:!1,color:"primary"},model:{value:t.setting.active,callback:function(e){t.$set(t.setting,"active",e)},expression:"setting.active"}})],1)],1)],1)],1),t._v(" "),e("template",{slot:"footer"},[e("div",{staticClass:"d-flex"},[e("v-spacer"),t._v(" "),e("v-btn",{staticClass:"btn me-2",attrs:{disabled:t.saving},on:{click:t.cancel}},[t._v("\n        "+t._s(t.$t("profileSettings.button.cancel"))+"\n      ")]),t._v(" "),e("v-btn",{staticClass:"btn btn-primary",attrs:{disabled:t.saving,loading:t.saving},on:{click:t.saveSetting}},[t._v("\n        "+t._s(t.$t("profileSettings.button.save"))+"\n      ")])],1)])],2)};h._withStripped=!0;const f={props:{settings:{type:Object,default:null},languages:{type:Object,default:null}},data:()=>({error:null,fieldError:!1,drawer:!1,newSetting:!1,saving:!1,confirmNewPassword:null,setting:{},parents:[],labels:[],changes:!1,labelsObjectType:"profileProperty"}),computed:{title(){return this.newSetting?this.$t("profileSettings.drawer.title.addSetting"):this.$t("profileSettings.drawer.title.editSetting")}},watch:{saving(){this.saving?this.$refs.profileSettingFormDrawer.startLoading():this.$refs.profileSettingFormDrawer.endLoading()},drawer(){this.drawer?this.$refs.profileSettingFormDrawer.open():this.$refs.profileSettingFormDrawer.close()}},created(){this.$root.$on("open-settings-create-drawer",this.addNewSetting),this.$root.$on("open-settings-edit-drawer",this.editSetting),this.$root.$on("close-settings-form-drawer",this.cancel)},methods:{blurAutocomplete(){this.$refs.settingParentField.isFocused=!1,this.$refs.settingParentField.isMenuActive=!1},getResolvedName(t){const e=eXo&&eXo.env.portal.language||"en",s=t.labels?t.labels.find((t=>t.language===e)):null;return s?s.label:this.$t&&this.$t(`profileSettings.property.name.${t.propertyName}`)!==`profileSettings.property.name.${t.propertyName}`?this.$t(`profileSettings.property.name.${t.propertyName}`):t.propertyName},resetCustomValidity(){this.$refs.settingNameInput.setCustomValidity("")},addNewSetting(){this.setting={visible:!0,editable:!0,groupSynchronized:!1,active:!0,groupSynchronizationEnabled:!0},this.labels=[{language:"en",label:"",objectType:this.labelsObjectType}],this.parents=Object.assign([],this.settings),this.parents.forEach((t=>t.resolvedLabel=this.getResolvedName(t))),this.newSetting=!0,this.changes=!1,this.drawer=!0},editSetting(t){this.setting=Object.assign({},t),this.parents=Object.assign([],this.settings),this.parents=this.parents.filter((t=>t.id!==this.setting.id&&!t.parentId)),this.parents.forEach((t=>t.resolvedLabel=this.getResolvedName(t))),this.parents.unshift({resolvedLabel:""}),this.newSetting=!1,this.labels=JSON.parse(JSON.stringify(this.setting.labels)),this.changes=!1,this.drawer=!0},saveSetting(t){this.changes=!0,t&&(t.preventDefault(),t.stopPropagation()),this.error=null,this.fieldError=!1,this.resetCustomValidity(),this.$refs.settingForm.validate()&&this.$refs.settingForm.$el.reportValidity()&&(this.saving=!0,this.newSetting?(this.setting.labels=this.labels,this.$root.$emit("create-setting",this.setting)):(this.mergeLabels(),this.$root.$emit("update-setting",this.setting,!0)),this.saving=!1)},mergeLabels(){const t=[],e=[],s=[];0===this.labels.length&&0===!this.setting.labels.length?this.$root.$emit("delete-labels",this.setting.labels):0===!this.labels.length&&0===this.setting.labels.length?this.$root.$emit("create-labels",this.labels):(this.setting.labels.forEach((t=>{const i=this.containsLabel(this.labels,t);i?i.label===t.label&&i.language===t.language||e.push(i):s.push(t)})),this.labels.forEach((e=>{e.id||t.push(e)})),t.length>0&&this.$root.$emit("create-labels",t),e.length>0&&this.$root.$emit("update-labels",e),s.length>0&&this.$root.$emit("delete-labels",s),this.setting.labels=this.labels)},containsLabel:(t,e)=>t.find((t=>t.id===e.id)),cancel(){this.drawer=!1,this.changes||(this.$root.$emit("cancel-edit-add"),this.changes=!1)}}},v=i(f,h,[],!1,null,null,null).exports;var m=function(){var t=this,e=t._self._c;return e("div",[t._l(t.propertylabels,(function(s){return e("div",{key:s.id},[e("property-label",{attrs:{propertylabel:s,languages:t.filtredLanguages},on:{"delete-label":t.deleteLabel}})],1)})),t._v(" "),e("div",{staticClass:"d-flex pt-4"},[e("v-spacer"),t._v(" "),e("div",{staticClass:"addLabelBtn primary--text",on:{click:t.addNewLabel}},[e("v-icon",{attrs:{color:"primary"}},[t._v("\n        mdi-plus\n      ")]),t._v("\n      "+t._s(t.$t("profileSettings.button.addNew"))+"\n    ")],1)],1)],2)};m._withStripped=!0;const b={props:{propertylabels:{type:Object,default:null},languages:{type:Object,default:null},labelsObjectType:{type:String,default:""},id:{type:Number,default:0}},computed:{isMobile(){return"xs"===this.$vuetify.breakpoint.name||"sm"===this.$vuetify.breakpoint.name},filtredLanguages(){const t=this.propertylabels.map((t=>t.language));return this.languages.filter((e=>!t.includes(e.value)))}},methods:{addNewLabel(){this.propertylabels.push({language:eXo.env.portal.language,label:"",objectId:this.id,objectType:this.labelsObjectType})},deleteLabel(t){this.propertylabels.splice(this.propertylabels.findIndex((e=>e.language===t.language)),1)}}},y=i(b,m,[],!1,null,null,null).exports;var _=function(){var t=this,e=t._self._c;return e("v-row",{staticClass:"mx-0 mb-0 mt-4 max-width-fit",attrs:{"no-gutters":""}},[e("v-col",{staticClass:"px-2",attrs:{cols:"3"}},[e("div",{staticClass:"flex-grow-1 text-truncate"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.propertylabel.language,expression:"propertylabel.language"}],staticClass:"max-width-fit ignore-vuetify-classes my-0",attrs:{name:"documentsFilter"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.propertylabel,"language",e.target.multiple?s:s[0])},t.changeSettingsFilter]}},t._l(t.langArray,(function(s){return e("option",{key:s.value,domProps:{value:s.value}},[t._v("\n          "+t._s(s.value.toUpperCase().split("_")[0])+"\n        ")])})),0)])]),t._v(" "),e("v-col",{attrs:{cols:"9"}},[e("div",{staticClass:"d-flex max-width-fit"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.propertylabel.label,expression:"propertylabel.label"}],staticClass:"ignore-vuetify-classes flex-grow-1 pa-3 ms-1",attrs:{placeholder:t.$t("profileSettings.placeholder.label"),type:"text",maxlength:"2000",required:""},domProps:{value:t.propertylabel.label},on:{input:function(e){e.target.composing||t.$set(t.propertylabel,"label",e.target.value)}}}),t._v(" "),e("div",{staticClass:"flex-grow-0"},[e("v-btn",{attrs:{icon:""},on:{click:t.deleteLabel}},[e("v-icon",{staticClass:"error-color",attrs:{size:"16"}},[t._v("fas fa-trash-alt")])],1)],1)])])],1)};_._withStripped=!0;const S={"profile-settings":n,"profile-settings-header":l,"profile-settings-table":p,"profile-settings-action-menu":c,"profile-settings-actions-cell":u,"profile-setting-form-drawer":v,"profile-property-labels":y,"property-label":i({props:{propertylabel:{type:Object,default:null},languages:{type:Object,default:null}},computed:{isMobile(){return"xs"===this.$vuetify.breakpoint.name||"sm"===this.$vuetify.breakpoint.name},langArray(){const t=Object.assign([],this.languages);return this.propertylabel.language&&t.unshift({value:this.propertylabel.language}),t}},methods:{deleteLabel(){this.$emit("delete-label",this.propertylabel)}}},_,[],!1,null,null,null).exports};for(const t in S)Vue.component(t,S[t]);if(extensionRegistry){const t=extensionRegistry.loadComponents("profileSettings");t&&t.length>0&&t.forEach((t=>{Vue.component(t.componentName,t.componentOptions)}))}const x=eXo&&eXo.env.portal.language||"en",w=`${eXo.env.portal.context}/${eXo.env.portal.rest}/i18n/bundle/locale.portlet.Portlets-${x}.json`;Vue.use(Vuetify);const C=new Vuetify(eXo.env.portal.vuetifyPreset),N="profileSettings";function L(t){exoi18n.loadLanguageAsync(x,w).then((e=>{Vue.createApp({data:{languages:t},template:`<profile-settings id="${N}" :languages="languages"/>`,vuetify:C,i18n:e},`#${N}`,"Profile settings")}))}return e})()));