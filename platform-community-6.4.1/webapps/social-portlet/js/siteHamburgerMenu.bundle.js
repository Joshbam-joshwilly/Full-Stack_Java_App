define((()=>(()=>{"use strict";var e={};(e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(e);var t=function(){var e=this,t=e._self._c;return t("v-container",{staticClass:"white",attrs:{id:"SiteHamburgerNavigation","px-0":"","py-0":""}},[t("div",{staticClass:"mx-0"},[t("v-list",{staticClass:"pb-0",attrs:{dense:"","min-width":"90%"}},[t("v-list-item-group",{model:{value:e.selectedNavigationIndex,callback:function(t){e.selectedNavigationIndex=t},expression:"selectedNavigationIndex"}},e._l(e.navigationsToDisplay,(function(i){return t("v-list-item",{key:i.uri,class:e.homeLink===i.fullUri?"UserPageLinkHome":"UserPageLink",attrs:{"input-value":i.selected,active:i.selected,selected:i.selected,href:i.fullUri,link:""}},[t("v-list-item-icon",{staticClass:"me-6 my-2"},[t("i",{class:i.iconClass})]),e._v(" "),t("v-list-item-content",[t("v-list-item-title",{staticClass:"subtitle-2",domProps:{textContent:e._s(i.label)}})],1),e._v(" "),t("v-list-item-icon",{on:{click:function(t){return e.selectHome(t,i)}}},[t("span",{staticClass:"fas mt-1 fa-house-user icon-default-color homePage"})])],1)})),1)],1)],1),e._v(" "),t("exo-confirm-dialog",{ref:"confirmDialog",attrs:{title:e.$t("menu.confirmation.title.changeHome"),message:e.confirmMessage,"ok-label":e.$t("menu.confirmation.ok"),"cancel-label":e.$t("menu.confirmation.cancel")},on:{ok:e.changeHome}})],1)};t._withStripped=!0;var i=function(e,t,i,n,o,a,s,r){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=[],c._compiled=!0),l)if(c.functional){c._injectStyles=l;var m=c.render;c.render=function(e,t){return l.call(t),m(e,t)}}else{var v=c.beforeCreate;c.beforeCreate=v?[].concat(v,l):[l]}return{exports:e,options:c}}({data:()=>({BASE_SITE_URI:`${eXo.env.portal.context}/${eXo.env.portal.portalName}/`,homeLink:eXo.env.portal.homeLink,selectedNavigation:null,navigationScope:"children",navigationVisibilities:["displayed"],navigations:[]}),computed:{confirmMessage(){return this.$t("menu.confirmation.message.changeHome",{0:`<b>${this.selectedNavigation&&this.selectedNavigation.label}</b>`})},visibilityQueryParams(){return this.navigationVisibilities.map((e=>`visibility=${e}`)).join("&")},selectedNavigationIndex(){return this.navigations.findIndex((e=>e.uri===eXo.env.portal.selectedNodeUri))},navigationsToDisplay(){return this.navigations.forEach((e=>{const t=`${e.name[0].toUpperCase()}${e.name.slice(1)}`;e.iconClass=`uiIcon uiIconFile uiIconToolbarNavItem uiIcon${t} icon${t} ${e.icon}`,e.fullUri=`${this.BASE_SITE_URI}${e.uri}`})),this.navigations.slice()}},watch:{navigations(){this.navigations.length&&!this.homeLink&&(this.homeLink=`${this.BASE_SITE_URI}${this.navigations[0].uri}`)}},created(){const e=`Site_Navigations_${eXo.env.portal.portalName}_${eXo.env.server.sessionId}`,t=window.sessionStorage&&window.sessionStorage.getItem(e);t&&this.$nextTick().then((()=>this.navigations=JSON.parse(t))),fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/navigations/portal/?siteName=${eXo.env.portal.portalName}&scope=${this.navigationScope}&${this.visibilityQueryParams}`,{method:"GET",credentials:"include"}).then((e=>e&&e.ok&&e.json())).then((t=>{const i=t||[];try{window.sessionStorage.setItem(e,JSON.stringify(i))}catch(e){}this.navigations&&this.navigations.length||(this.navigations=i)})),document.addEventListener("homeLinkUpdated",(()=>{this.homeLink=eXo.env.portal.homeLink}))},methods:{changeHome(){var e,t;("USER",e=eXo.env.portal.userName,"PORTAL","HOME","HOME_PAGE_URI",t=this.selectedNavigation.fullUri,fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/settings/USER,${e}/PORTAL,HOME/HOME_PAGE_URI`,{method:"PUT",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({value:t})}).then((e=>{if(!e||!e.ok)throw new Error("Response code indicates a server error",e)}))).then((()=>{this.homeLink=eXo.env.portal.homeLink=this.selectedNavigation.fullUri,$("#UserHomePortalLink").attr("href",this.homeLink),document.dispatchEvent(new CustomEvent("homeLinkUpdated",{detail:this.homeLink}))}))},selectHome(e,t){e.preventDefault(),e.stopPropagation(),this.selectedNavigation=t,this.$refs.confirmDialog.open()}}},t);const n={"exo-site-hamburger-navigation":i.exports};for(const e in n)Vue.component(e,n[e]);if(extensionRegistry&&extensionRegistry.registerExtension("exo-hamburger-menu-navigation","exo-hamburger-menu-navigation-items",{id:"HamburgerMenuNavigationSite",priority:10,vueComponent:n["exo-site-hamburger-navigation"]}),extensionRegistry){const e=extensionRegistry.loadComponents("SiteHamburgerNavigation");e&&e.length>0&&e.forEach((e=>{Vue.component(e.componentName,e.componentOptions)}))}return document.dispatchEvent(new CustomEvent("exo-hamburger-menu-navigation-refresh")),e})()));