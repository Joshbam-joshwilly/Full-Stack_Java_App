define((()=>(()=>{"use strict";var e={};(e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(e);var t=function(){var e=this,t=e._self._c;return t("v-container",{staticClass:"white d-none d-sm-block",attrs:{id:"AdministrationHamburgerNavigation","px-0":"","py-0":""}},[e.navigationTree&&e.navigationTree.length?t("v-row",{staticClass:"mx-0 administrationTitle"},[t("v-list-item",{on:{mouseover:function(t){e.showItemActions=!0},mouseleave:function(t){e.showItemActions=!1}}},[t("v-list-item-icon",{staticClass:"mb-2 mt-3 mr-6 titleIcon"},[t("i",{staticClass:"uiIcon uiIconToolbarNavItem uiAdministrationIcon"})]),e._v(" "),t("v-list-item-content",{staticClass:"subtitle-2"},[e._v("\n        "+e._s(this.$t("menu.administration.title"))+"\n      ")]),e._v(" "),e.toggleArrow?t("v-list-item-action",{staticClass:"my-0"},[t("v-btn",{attrs:{icon:""},on:{click:function(t){return e.openOrCloseDrawer()}}},[t("v-icon",{staticClass:"me-0 pa-2 icon-default-color clickable",attrs:{small:""}},[e._v("\n            "+e._s(e.arrowIconClass)+" \n          ")])],1)],1):e._e()],1)],1):e._e()],1)};function i(e,t,i,n,s,o,a,r){var d,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),a?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=d):s&&(d=r?function(){s.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:s),d)if(l.functional){l._injectStyles=d;var c=l.render;l.render=function(e,t){return d.call(t),c(e,t)}}else{var m=l.beforeCreate;l.beforeCreate=m?[].concat(m,d):[d]}return{exports:e,options:l}}t._withStripped=!0;const n=i({data:()=>({navigationScope:"ALL",navigationVisibilities:["displayed"],loading:!1,navigations:[],embeddedTree:{},secondeLevel:!1,showItemActions:!1,arrowIcon:"fa-arrow-right"}),computed:{visibilityQueryParams(){return this.navigationVisibilities.map((e=>`visibility=${e}`)).join("&")},sortedEmbeddedNavigationTree(){return this.embeddedTree&&this.embeddedTree.navs&&Object.keys(this.embeddedTree.navs).sort(((e,t)=>{const i=this.embeddedTree.navs[e],n=this.embeddedTree.navs[t];return i===n?this.embeddedTree.urisOrder[e]-this.embeddedTree.urisOrder[t]:this.embeddedTree.categoriesOrder[i]-this.embeddedTree.categoriesOrder[n]}))||[]},navigationTree(){const e=[],t={};let i=JSON.parse(JSON.stringify(this.navigations));i=this.filterDisplayedNavigations(i),this.computeLink(i),this.sortedEmbeddedNavigationTree.forEach((n=>{let s=this.findNodeByUri(n,i);if(s){s.displayed=!0;const i=this.embeddedTree.navs[n];s=Object.assign({},s),s.children=s.children&&s.children.slice(),t[i]?t[i].children.push(s):(t[i]={key:i,label:this.$t(`menu.administration.navigation.${i}`),children:[s]},e.push(t[i]))}})),i=this.filterDisplayedNavigations(i,!0);const n="other";return i.forEach((i=>{t[n]?t[n].children.push(i):(t[n]={key:n,label:this.$t("menu.administration.navigation.other"),children:[i]},e.unshift(t[n]))})),e},arrowIconClass(){return this.arrowIcon},toggleArrow(){return this.secondeLevel||this.showItemActions}},created(){Promise.resolve(this.retrieveAdministrationMenu()).finally((()=>this.$root.$applicationLoaded())),document.addEventListener("second-level-hidden",(()=>{this.hideSecondeItem()})),document.addEventListener("second-level-opened",(e=>{e&&e.detail&&"HamburgerMenuNavigationAdministration"!==e.detail.contentDetail.id&&this.hideSecondeItem()}))},methods:{retrieveAdministrationMenu(){if(this.navigations.length)return;const e=window.sessionStorage&&window.sessionStorage.getItem(`Administration_Navigations_${eXo.env.server.sessionId}`);return e&&this.$nextTick().then((()=>this.navigations=JSON.parse(e))),this.loading=!0,fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/navigations/group?exclude=/spaces.*&${this.visibilityQueryParams}`,{method:"GET",credentials:"include"}).then((e=>e&&e.ok&&e.json())).then((e=>{const t=e||[];try{window.sessionStorage.setItem(`Administration_Navigations_${eXo.env.server.sessionId}`,JSON.stringify(t))}catch(e){}this.navigations=t})).then((()=>fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/navigations/categories`,{method:"GET",credentials:"include"}))).then((e=>e&&e.ok&&e.json())).then((e=>this.embeddedTree=e||{})).finally((()=>{this.loading=!1}))},mountSecondLevel(e){new(Vue.extend({data:()=>({navigations:this.navigationTree,loading:this.loading}),template:'\n          <exo-administration-navigations :navigations="navigations" :loading="loading" />\n        '}))({i18n:new VueI18n({locale:this.$i18n.locale,messages:this.$i18n.messages}),vuetify:Vue.prototype.vuetifyOptions}).$mount(e)},openOrCloseDrawer(){this.secondeLevel=!this.secondeLevel,this.secondeLevel?(this.arrowIcon="fa-arrow-left",this.$emit("open-second-level",!1),document.dispatchEvent(new CustomEvent("second-panel-opened"))):(this.arrowIcon="fa-arrow-right",this.$emit("close-second-level"))},hideSecondeItem(){this.arrowIcon="fa-arrow-right",this.showItemActions=!1,this.secondeLevel=!1},filterDisplayedNavigations(e,t){return e.filter((e=>(e.children&&(e.children=this.filterDisplayedNavigations(e.children)),!e.displayed&&(!t||"HIDDEN"!==e.visibility)&&(e.pageKey||e.children&&e.children.length))))},computeLink(e){e.forEach((e=>{e.children&&this.computeLink(e.children);const t=e.siteKey.name.replace(/\//g,":");e.link=`${eXo.env.portal.context}/g/${t}/${e.uri}`}))},findNodeByUri(e,t){for(const i in t){const n=t[i];if(n.uri===e)return n;if(n.children){const t=this.findNodeByUri(e,n.children);if(t)return t}}}}},t,[],!1,null,null,null).exports;var s=function(){var e=this,t=e._self._c;return e.menuItem&&e.menuItem.label&&e.menuItem.key&&e.menuItem.children&&e.menuItem.children.length?t("v-list",{staticClass:"adminMenu contentMenuWrapper py-0",attrs:{dense:"",rounded:""}},[t("v-subheader",{staticClass:"text-uppercase subtitle-2 font-weight-bold"},[e._v(e._s(e.menuItem.label))]),e._v(" "),t("v-treeview",{staticClass:"subItemTitle",attrs:{items:e.menuItem.children,"item-children":"children","item-key":"name","item-text":"label",dense:"",rounded:"",hoverable:"","open-all":""},scopedSlots:e._u([{key:"label",fn:function({item:i}){return[i&&i.link?t("a",{attrs:{href:i.link}},[e._v(e._s(i.label))]):t("span",i?[e._v(e._s(i.label))]:[e._v(e._s(i))])]}}],null,!1,678984575)})],1):e._e()};s._withStripped=!0;const o=i({name:"AdministrationMenuItemApp",props:{menuItem:{type:Object,default:null}}},s,[],!1,null,null,null).exports;var a=function(){var e=this,t=e._self._c;return t("v-container",{staticClass:"white",attrs:{id:"AdministrationHamburgerNavigation","px-0":"","py-0":""}},[e.loading?t("v-progress-linear",{attrs:{color:"primary",height:"2"}}):e.navigations&&e.navigations.length?t("v-row",{staticClass:"mx-0"},[t("v-list",{staticClass:"pb-0",attrs:{shaped:"",dense:"","min-width":"90%"}},[t("v-list-item-group",[e._l(e.navigations,(function(e){return[t("exo-administration-menu-item",{key:e.key,attrs:{"menu-item":e}})]}))],2)],1)],1):e._e()],1)};a._withStripped=!0;const r={"exo-administration-menu-item":o,"exo-administration-navigations":i({props:{loading:{type:Boolean,default:!1},navigations:{type:Object,default:null}}},a,[],!1,null,null,null).exports,"exo-administration-hamburger-menu-navigation":n};for(const e in r)Vue.component(e,r[e]);if(extensionRegistry&&extensionRegistry.registerExtension("exo-hamburger-menu-navigation","exo-hamburger-menu-navigation-items",{id:"HamburgerMenuNavigationAdministration",priority:40,secondLevel:!0,vueComponent:r["exo-administration-hamburger-menu-navigation"]}),extensionRegistry){const e=extensionRegistry.loadComponents("SiteHamburgerNavigation");e&&e.length>0&&e.forEach((e=>{Vue.component(e.componentName,e.componentOptions)}))}return document.dispatchEvent(new CustomEvent("exo-hamburger-menu-navigation-refresh")),e})()));