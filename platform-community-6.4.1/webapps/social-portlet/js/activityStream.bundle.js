define((()=>(()=>{var t={5095:()=>{const t=`${eXo.env.portal.context}/${eXo.env.portal.portalName}/activity`;extensionRegistry.registerComponent("ActivityStream","activity-stream-drawers",{id:"share-drawer",vueComponent:Vue.options.components["activity-share-drawer"],rank:10}),extensionRegistry.registerComponent("ActivityStream","activity-stream-drawers",{id:"comments-drawer",vueComponent:Vue.options.components["activity-comments-drawer"],rank:20}),extensionRegistry.registerComponent("ActivityStream","activity-stream-drawers",{id:"reactions-drawer",vueComponent:Vue.options.components["activity-reactions-drawer"],rank:25}),extensionRegistry.registerComponent("ActivityStream","activity-stream-drawers",{id:"composer-drawer",vueComponent:Vue.options.components["activity-composer-drawer"],rank:35}),extensionRegistry.registerComponent("ActivityContent","activity-content-extensions",{id:"body",vueComponent:Vue.options.components["activity-body"],rank:1}),extensionRegistry.registerComponent("ActivityContent","activity-content-extensions",{id:"link",isEnabled:t=>{const e=t&&t.activityTypeExtension,i=t&&t.activity,s=t&&t.isActivityDetail;return e.getSourceLink&&e.getSourceLink(i,s)},vueComponent:Vue.options.components["activity-link"],rank:5}),extensionRegistry.registerComponent("ActivityContent","activity-content-extensions",{id:"shared-activity",isEnabled:t=>t.activity&&t.activity.originalActivity,vueComponent:Vue.options.components["activity-share"],rank:1e3});const e={getEmbeddedHtml:t=>t&&t.templateParams&&t.templateParams.html,getSourceLink:t=>t&&t.templateParams&&!t.templateParams.html&&t.templateParams.link,getTitle:t=>t&&t.templateParams&&(t.templateParams.title||t.templateParams.defaultTitle||t.templateParams.link)||"",getWindowTitle:t=>t&&t.templateParams&&t.templateParams.title||t.templateParams.defaultTitle||t.templateParams.link||t.title||"",getSummary:t=>t&&t.templateParams&&t.templateParams.description||"",getThumbnail:t=>t&&t.templateParams&&t.templateParams.image||"",getThumbnailProperties:t=>!(t&&t.templateParams&&t.templateParams.image)&&{height:"90px",width:"90px",noBorder:!0},isUseSameViewForMobile:t=>!t||!t.templateParams||!t.templateParams.image,supportsThumbnail:!0,supportsIcon:!0,defaultIcon:{icon:"fa fa-link"},getBody:t=>t?.templateParams?.comment||t?.title||!t?.originalActivity&&t?.body||"",getBodyToEdit:t=>{let e=t.templateParams;if(e.default_title&&e.default_title.includes("<oembed>")&&e.link){const i=window.encodeURIComponent(e.link);e.default_title=e.default_title.replace(`<oembed>${i}</oembed>`,`<oembed>${e.link}</oembed>`),t.title=t.title.replace(`<oembed>${i}</oembed>`,`<oembed>${e.link}</oembed>`)}return e=encodeURIComponent(t.templateParams),Vue.prototype.$utils.trim(window.decodeURIComponent(e&&e.default_title&&e.default_title||t?.title?.replaceAll("%","%25")||!t?.originalActivity&&t?.body?.replaceAll("%","%25")||""))},canShare:()=>!0};extensionRegistry.registerComponent("ActivityContent","activity-content-extensions",{id:"embedded-html",isEnabled:t=>{const i=t&&t.activityTypeExtension,s=t&&t.activity,a=t&&t.isActivityDetail;return(i.getEmbeddedHtml||e.getEmbeddedHtml)(s,a)},vueComponent:Vue.options.components["activity-embedded-html"],rank:5}),extensionRegistry.registerExtension("activity","type",{type:"default",options:e}),extensionRegistry.registerExtension("activity","action",{id:"pin",labelKey:"UIActivity.label.pin",icon:"mdi-pin",isEnabled:(t,e)=>!(e.canPin&&!e.canPin(t))&&t.canPin&&!t.pinned,click:t=>Vue.prototype.$activityService.pinActivity(t.id).then((()=>{document.dispatchEvent(new CustomEvent("activity-pinned",{detail:t}))}))}),extensionRegistry.registerExtension("activity","action",{id:"unpin",labelKey:"UIActivity.label.unpin",icon:"mdi-pin-off",isEnabled:(t,e)=>!(e.canPin&&!e.canPin(t))&&t.canPin&&t.pinned,click:t=>Vue.prototype.$activityService.unpinActivity(t.id).then((()=>{document.dispatchEvent(new CustomEvent("activity-unpinned",{detail:t}))}))}),extensionRegistry.registerExtension("activity","action",{id:"edit",labelKey:"UIActivity.label.Edit",icon:"fa-edit",isEnabled:(t,e)=>"true"===t.canEdit&&(!e.canEdit||e.canEdit(t)),click:(t,e)=>{const i=e.getBodyToEdit&&e.getBodyToEdit(t)||e.getBody(t);document.dispatchEvent(new CustomEvent("activity-composer-drawer-open",{detail:{activityId:t.id,spaceId:t&&t.activityStream&&t.activityStream.space&&t.activityStream.space.id||"",composerAction:"update",ckEditorType:`editActivity${t.id}`,activityBody:i,files:t.files?window.JSON.parse(window.JSON.stringify(t.files)):null,templateParams:window.JSON.parse(window.JSON.stringify(t.templateParams)),activityType:t.type}}))}}),extensionRegistry.registerExtension("activity","action",{id:"delete",labelKey:"UIActivity.label.Delete",icon:"fa-trash-alt",confirmDialog:!0,confirmMessageKey:"UIActivity.msg.Are_You_Sure_To_Delete_This_Activity",confirmTitleKey:"UIActivity.label.Confirmation",confirmOkKey:"UIActivity.label.Confirm_Delete_Activity-Button",confirmCancelKey:"UIActivity.label.Cancel_Delete_Activity-Button",isEnabled:(t,e)=>!(e.canDelete&&!e.canDelete(t))&&"true"===t.canDelete,click:(t,e,i)=>(document.dispatchEvent(new CustomEvent("displayTopBarLoading")),Vue.prototype.$activityService.deleteActivity(t.id,e.hideOnDelete).then((()=>{document.dispatchEvent(new CustomEvent("activity-deleted",{detail:t.id})),i&&setTimeout((()=>{"space"===t.activityStream.type?window.location.href=`${eXo.env.portal.context}/g/${t.activityStream.space.groupId.replace(/\//g,":")}`:window.location.href=eXo.env.portal.context}),500)})).finally((()=>document.dispatchEvent(new CustomEvent("hideTopBarLoading")))))}),extensionRegistry.registerExtension("activity","action",{id:"copyLink",labelKey:"UIActivity.label.CopyLink",icon:"fa-copy",isEnabled:t=>t&&t.id,click:e=>{const i=`${window.location.origin}${t}?id=${e.id}`;$("#copyToClipboard").length||$("body").append(`<input id="copyToClipboard" type="text" value="${i}" style="position:absolute;left: -9999px;">`);const s=$("#copyToClipboard")[0];s.value=i,s.select(),s.setSelectionRange(0,99999),document.execCommand("copy")}}),extensionRegistry.registerExtension("activity","comment-action",{id:"delete",rank:20,labelKey:"UIActivity.label.Delete",icon:"fa-trash-alt",confirmDialog:!0,confirmMessageKey:"UIActivity.msg.Are_You_Sure_To_Delete_This_Comment",confirmTitleKey:"UIActivity.label.Confirmation",confirmOkKey:"UIActivity.label.Confirm_Delete_Activity-Button",confirmCancelKey:"UIActivity.label.Cancel_Delete_Activity-Button",isEnabled:(t,e)=>"true"===e.canDelete,click:(t,e)=>(document.dispatchEvent(new CustomEvent("displayTopBarLoading")),Vue.prototype.$activityService.deleteActivity(e.id).then((()=>{document.dispatchEvent(new CustomEvent("activity-comment-deleted",{detail:e}))})).finally((()=>document.dispatchEvent(new CustomEvent("hideTopBarLoading")))))}),extensionRegistry.registerExtension("activity","comment-action",{id:"edit",labelKey:"UIActivity.label.Edit",icon:"fa-edit",rank:10,isEnabled:(t,e,i)=>{if(i.canEdit){if(i.forceCanEditOverwrite)return i.canEdit(e);if(!i.canEdit(e))return!1}return"true"===e.canEdit},click:(t,e,i)=>{const s=i.getBodyToEdit&&i.getBodyToEdit(e)||i.getBody(e);document.dispatchEvent(new CustomEvent("activity-comment-edit",{detail:{activity:t,comment:e,activityBody:s}}))}}),extensionRegistry.registerComponent("ActivityFooter","activity-footer-action",{id:"like",vueComponent:Vue.options.components["activity-like-action"],rank:10}),extensionRegistry.registerComponent("ActivityFooter","activity-footer-action",{id:"comment",vueComponent:Vue.options.components["activity-comment-action"],rank:20}),extensionRegistry.registerComponent("ActivityHeader","activity-header-action",{id:"favorite",vueComponent:Vue.options.components["activity-favorite-action"],rank:30}),extensionRegistry.registerComponent("ActivityFooter","activity-footer-action",{id:"share",isEnabled:t=>t.activity&&!t.activity.originalActivity,vueComponent:Vue.options.components["activity-share-action"],rank:100}),extensionRegistry.registerComponent("ActivityCommentFooter","activity-comment-footer-action",{id:"like",vueComponent:Vue.options.components["activity-comment-like-action"],rank:10}),extensionRegistry.registerComponent("ActivityCommentFooter","activity-comment-footer-action",{id:"reply",vueComponent:Vue.options.components["activity-comment-reply-action"],rank:20})}},e={};function i(s){var a=e[s];if(void 0!==a)return a.exports;var n=e[s]={exports:{}};return t[s](n,n.exports,i),n.exports}i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s={};return(()=>{"use strict";i.r(s),i.d(s,{init:()=>Ft});var t={};i.r(t),i.d(t,{initCometd:()=>Bt,isDisconnected:()=>Mt});var e=function(){var t=this,e=t._self._c;return t.loaded?e("v-app",{attrs:{role:"main"}},[e("activity-notification-alerts"),t._v(" "),t.canPostInitialized?e("activity-stream-toolbar",{attrs:{"can-post":t.canPost,"can-filter":t.canFilter}}):t._e(),t._v(" "),e("activity-stream-list",{attrs:{"activity-id":t.activityId,"activity-types":t.activityTypes,"activity-actions":t.activityActions,"comment-types":t.commentTypes,"comment-actions":t.commentActions},on:{"activity-select":t.displayActivityDetail,"can-post-loaded":function(e){return t.canPostLoaded(e)}}}),t._v(" "),e("extension-registry-components",{staticClass:"drawer-parent",attrs:{params:t.drawerParams,name:"ActivityStream",type:"activity-stream-drawers","parent-element":"div",element:"div"}})],1):t._e()};e._withStripped=!0;function a(t,e,i,s,a,n,o,c){var r,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=i,l._compiled=!0),s&&(l.functional=!0),n&&(l._scopeId="data-v-"+n),o?(r=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=r):a&&(r=c?function(){a.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:a),r)if(l.functional){l._injectStyles=r;var m=l.render;l.render=function(t,e){return r.call(e),m(t,e)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,r):[r]}return{exports:t,options:l}}const n=a({data:()=>({loaded:!1,canPostInitialized:!1,spaceId:eXo.env.portal.spaceId,forceReload:!1,canPost:!1,activityId:null,activityTypes:{},activityActions:{},commentActions:{},extensionApp:"activity",activityTypeExtension:"type",activityActionExtension:"action",commentActionExtension:"comment-action"}),computed:{commentTypes(){return this.activityTypes},drawerParams(){return{activityTypes:this.activityTypes,activityActions:this.activityActions,commentTypes:this.commentTypes,commentActions:this.commentActions}},canFilter(){return!this.$root.selectedActivityId}},created(){document.addEventListener(`extension-${this.extensionApp}-${this.activityTypeExtension}-updated`,this.refreshActivityTypes),document.addEventListener(`extension-${this.extensionApp}-${this.activityActionExtension}-updated`,this.refreshActivityActions),document.addEventListener(`extension-${this.extensionApp}-${this.commentActionExtension}-updated`,this.refreshCommentActions),this.refreshActivityTypes(),this.refreshActivityActions(),this.refreshCommentActions(),0===window.location.pathname.indexOf(this.$root.activityBaseLink)&&(this.$root.selectedActivityId=this.getQueryParam("id"),window.location.hash&&(this.$root.selectedCommentId=window.location.hash.replace("#comment-",""))),this.displayActivityDetail(this.$root.selectedActivityId,this.$root.selectedCommentId)},methods:{displayActivityDetail(t,e){this.loaded=!1,this.$root.selectedActivityId=this.activityId=t,this.$root.selectedCommentId=window.location.hash.replace("#comment-",""),e&&!this.$root.selectedCommentId&&(this.$root.selectedCommentId=e,window.history.replaceState("",window.document.title,`${window.location.pathname}?id=${t}#comment-${e}`),this.forceReload=!0),this.$nextTick().then((()=>this.loaded=!0))},refreshActivityTypes(){const t=extensionRegistry.loadExtensions(this.extensionApp,this.activityTypeExtension);let e=!1;t.forEach((t=>{!t.type||!t.options||this.activityTypes[t.type]&&this.activityTypes[t.type]===t.options||(this.activityTypes[t.type]=t.options,e=!0)})),e&&(this.activityTypes=Object.assign({},this.activityTypes))},refreshActivityActions(){extensionRegistry.loadExtensions(this.extensionApp,this.activityActionExtension).forEach((t=>{t.id&&this.$set(this.activityActions,t.id,t)}))},refreshCommentActions(){extensionRegistry.loadExtensions(this.extensionApp,this.commentActionExtension).forEach((t=>{t.id&&this.$set(this.commentActions,t.id,t)}))},getQueryParam(t){const e=window.location.search.substring(1);return new URLSearchParams(e).get(t)},canPostLoaded(t){this.canPost=t,this.canPostInitialized=!0}}},e,[],!1,null,null,null).exports;var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-column white border-radius"},[e("img",{staticClass:"mx-auto",style:{maxHeight:t.height},attrs:{height:t.height,src:"/social-portlet/images/emptySpaceStream.png",loading:"lazy"}}),t._v(" "),e("div",{staticClass:"mx-4 mb-4"},[e("p",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.welcomeTitle,expression:"welcomeTitle"}]}),t._v(" "),e("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.welcomeSpaceParagraph1,expression:"welcomeSpaceParagraph1"}],staticClass:"mb-4"}),t._v(" "),e("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.welcomeSpaceParagraph2,expression:"welcomeSpaceParagraph2"}],staticClass:"mb-4"}),t._v(" "),e("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.conclusionParagraph,expression:"conclusionParagraph"}]})])])};o._withStripped=!0;const c=a({data:function(){return{height:"380px"}},computed:{welcomeTitle(){return this.$t("UIActivity.label.Welcome_Space",{"space name":`<strong>${eXo.env.portal.spaceDisplayName}</strong>`})},welcomeSpaceParagraph1(){return this.$t("UIActivity.label.empty_space_stream_paragraph_one")},welcomeSpaceParagraph2(){return this.$t("UIActivity.label.empty_space_stream_paragraph_two")},conclusionParagraph(){return this.$t("UIActivity.label.empty_stream_lets_begin")}}},o,[],!1,null,null,null).exports;var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-column white border-radius"},[e("div",{staticClass:"mx-4 my-4"},[e("p",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.welcomeTitle,expression:"welcomeTitle"}]}),t._v(" "),e("v-card",{staticClass:"mx-auto my-8",attrs:{"max-width":"500",flat:""}},[e("v-row",[e("activity-stream-empty-message-space-icons-column",{attrs:{"icon-size":t.iconSize,"icon-ref":t.userGearIcon,"info-message":t.emptyStreamForSpacesThatUserManage1}}),t._v(" "),e("activity-stream-empty-message-space-icons-column",{attrs:{"icon-size":t.iconSize,"icon-ref":t.shareIcon,"info-message":t.emptyStreamForSpacesThatUserManage2,"icon-color":"secondary"}}),t._v(" "),e("activity-stream-empty-message-space-icons-column",{attrs:{"icon-size":t.iconSize,"icon-ref":t.awardIcon,"info-message":t.emptyStreamForSpacesThatUserManage3}}),t._v(" "),e("activity-stream-empty-message-space-icons-column",{attrs:{"icon-size":t.iconSize,"icon-ref":t.trophyIcon,"info-message":t.emptyStreamForSpacesThatUserManage4,"icon-color":"secondary"}})],1)],1),t._v(" "),e("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.welcomeSpaceParagraph1,expression:"welcomeSpaceParagraph1"}],staticClass:"mb-4"}),t._v(" "),e("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.welcomeSpaceParagraph2,expression:"welcomeSpaceParagraph2"}],staticClass:"mb-4"}),t._v(" "),e("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.welcomeSpaceParagraph3,expression:"welcomeSpaceParagraph3"}],staticClass:"mb-4"}),t._v(" "),e("div",[e("ol",[e("li",{domProps:{innerHTML:t._s(t.welcomeSpaceNumberedParagraph1)}}),t._v(" "),e("li",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.welcomeSpaceNumberedParagraph2,expression:"welcomeSpaceNumberedParagraph2"}]}),t._v(" "),e("li",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.welcomeSpaceNumberedParagraph3,expression:"welcomeSpaceNumberedParagraph3"}]})])]),t._v(" "),e("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.welcomeSpaceParagraph4,expression:"welcomeSpaceParagraph4"}],staticClass:"my-4"})],1)])};r._withStripped=!0;const l=a({data:()=>({iconSize:"30",userGearIcon:"fa-user-cog",shareIcon:"fa-share-alt",awardIcon:"fa-award",trophyIcon:"fa-trophy"}),computed:{profileName(){return this.$currentUserIdentity&&this.$currentUserIdentity.profile&&this.$currentUserIdentity.profile.fullname},profileUri:()=>`${eXo.env.portal.context}/${eXo.env.portal.portalName}/profile`,spacesUri:()=>`${eXo.env.portal.context}/${eXo.env.portal.portalName}/spaces`,profilelink(){return`<a href="${this.profileUri}"><strong class="text-color">${this.profileName}</strong></a>`},welcomeTitle(){return this.$t&&this.$t("UIActivity.label.Welcome_Activity_Welcome_Onboard",{"user full name":this.profilelink})},emptyStreamForSpacesThatUserManage1(){return this.$t("UIActivity.label.empty_space_stream_manage_community")},emptyStreamForSpacesThatUserManage2(){return this.$t("UIActivity.label.empty_space_stream_share_knowledge")},emptyStreamForSpacesThatUserManage3(){return this.$t("UIActivity.label.empty_space_stream_congrats")},emptyStreamForSpacesThatUserManage4(){return this.$t("UIActivity.label.empty_space_stream_value_skills")},welcomeSpaceParagraph1(){return this.$t("UIActivity.label.empty_space_stream_paragraph_one")},welcomeSpaceParagraph2(){return this.$t("UIActivity.label.empty_space_stream_paragraph_two")},welcomeSpaceParagraph3(){return this.$t("UIActivity.label.empty_space_stream_paragraph_three")},welcomeSpaceParagraph4(){return this.$t("UIActivity.label.empty_space_stream_paragraph_four")},welcomeSpaceNumberedParagraph1(){return this.$t("UIActivity.label.empty_space_stream_paragraph_numbered_one",{0:`<a class="primary--text font-weight-bold" href="${this.spacesUri}"">`,1:"</a>"})},welcomeSpaceNumberedParagraph2(){return this.$t("UIActivity.label.empty_space_stream_paragraph_numbered_two")},welcomeSpaceNumberedParagraph3(){return this.$t("UIActivity.label.empty_space_stream_paragraph_numbered_three")}}},r,[],!1,null,null,null).exports;var m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-column white border-radius"},[e("v-flex",{staticClass:"d-flex my-auto border-box-sizing"},[e("div",{staticClass:"d-flex flex-column ma-auto py-10 text-center text-sub-title"},[e("v-icon",{staticClass:"mx-auto mt-8 fa",class:t.emptyStreamIcon,attrs:{size:"70",color:"primary"}}),t._v(" "),e("span",{staticClass:"text-sub-title my-7"},[t._v(t._s(t.emptyStreamLabel))])],1)])],1)};m._withStripped=!0;const d=a({props:{streamFilter:{type:String,default:null}},computed:{emptyStreamLabel(){return this.$t(`activity.filter.empty_${this.streamFilter}.msg`)},emptyStreamIcon(){switch(this.streamFilter){case"favorite_spaces_stream":case"user_favorite_stream":return"fa-star-half-alt";case"manage_spaces_stream":return"fa-user-cog";case"pin_stream":return"fa-thumbtack";case"user_stream":return"fa-feather-alt";default:return""}}}},m,[],!1,null,null,null).exports;var h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"uiNotFoundActivity mx-auto mt-8"},[e("div",{staticClass:"notfoundActivity"}),t._v(" "),e("h3",{staticClass:"text-sub-title font-weight-bold mt-6"},[t._v("\n    "+t._s(t.$t("UIUserActivitiesDisplay.label.activityNotFound"))+"\n  ")])])};h._withStripped=!0;const y=a({},h,[],!1,null,null,null).exports,v=a({created(){this.updateDocumentLinks()},mounted(){this.$root.$on("activity-created",this.updateDocumentLinks),this.$root.$on("activity-updated",this.updateDocumentLinks),this.$root.$on("activity-refresh-ui",this.updateDocumentLinks),this.$root.$on("activity-refreshed",this.updateDocumentLinks),this.$root.$on("activity-comment-created",this.updateDocumentLinks),this.$root.$on("activity-comment-updated",this.updateDocumentLinks),this.$root.$on("activity-comment-refreshed",this.updateDocumentLinks),this.updateDocumentLinks()},beforeDestroy(){this.$root.$off("activity-created",this.updateDocumentLinks),this.$root.$off("activity-updated",this.updateDocumentLinks),this.$root.$off("activity-refresh-ui",this.updateDocumentLinks),this.$root.$off("activity-refreshed",this.updateDocumentLinks),this.$root.$off("activity-comment-created",this.updateDocumentLinks),this.$root.$off("activity-comment-updated",this.updateDocumentLinks),this.$root.$off("activity-comment-refreshed",this.updateDocumentLinks)},methods:{updateDocumentLinks(){window.setTimeout((()=>{window.document.querySelectorAll("a[href^=http]").forEach((t=>{t.href&&0===t.href.indexOf("http")&&!t.target&&t.hostname!==window.location.hostname&&(t.target="_blank")}))}),200)}}},void 0,void 0,!1,null,null,null).exports;var p=function(){var t=this,e=t._self._c;return e("v-snackbar",{attrs:{left:!t.$vuetify.rtl,right:t.$vuetify.rtl,color:"transparent",elevation:"0",app:""},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[e("exo-notification-alert",{attrs:{alert:t.alert},on:{dismissed:t.clear}})],1)};p._withStripped=!0;const u=a({data:()=>({snackbar:!1,alert:null}),watch:{alert(){this.snackbar=!!this.alert}},created(){this.$root.$on("activity-shared",((t,e)=>{if(e&&e.length>0){const t=e.map((t=>t.displayName||"")),i=`${this.$t("UIActivity.share.message")} ${t.join(", ")}`;this.alert={message:i,type:"success"}}}))},methods:{clear(){this.alert=null}}},p,[],!1,null,null,null).exports;var f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"newActivitiesButtonContainer d-flex"},[e("div",{staticClass:"mx-auto"},[e("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.hasNewActivity,expression:"hasNewActivity"}],staticClass:"btn primary rounded-xl newActivitiesButton",attrs:{height:"24px",small:"",primary:"",absolute:""},on:{click:t.displayNewActivities}},[e("v-icon",{staticClass:"me-1",attrs:{size:"14px"}},[t._v("fa-arrow-up")]),t._v(" "),e("span",[t._v(t._s(t.$t("activity.button.newPosts")))])],1)],1)])};f._withStripped=!0;const g=a({props:{spaceId:{type:String,default:null},activities:{type:Array,default:null},standalone:{type:Boolean,default:!1}},data:()=>({updatedActivities:new Set,newerActivitiesCount:0}),computed:{hasNewActivity(){return this.newerActivitiesCount>0}},created(){this.$activityStreamWebSocket.initCometd(this.handleActivityStreamUpdates,this.standalone),this.standalone||this.$root.$on("activity-stream-activity-createActivity",this.increaseActivitiesLimitToRetrieve)},methods:{init(){this.newerActivitiesCount=0,this.updatedActivities=new Set},handleActivityStreamUpdates(t){this.$root.$emit(`activity-stream-activity-${t.eventName}`,t.activityId,t.spaceId,t.commentId,t.parentCommentId)},increaseActivitiesLimitToRetrieve(t,e){eXo.env.portal.spaceId&&eXo.env.portal.spaceId!==e||(this.updatedActivities.add(t),this.newerActivitiesCount=this.updatedActivities.size)},displayNewActivities(){this.$activityStreamWebSocket.isDisconnected()?window.location.reload():(this.$emit("loadActivities",this.updatedActivities.size),this.init())}}},f,[],!1,null,null,null).exports;var C=function(){var t=this;return(0,t._self._c)("exo-confirm-dialog",{ref:"confirmDialog",attrs:{message:t.$t(t.confirmMessageKey),title:t.$t(t.confirmTitleKey),"ok-label":t.$t(t.confirmOkKey),"cancel-label":t.$t(t.confirmCancelKey)},on:{ok:function(e){t.clickCallback&&t.clickCallback()},"dialog-opened":function(e){t.dialogOpened=!0},"dialog-closed":function(e){t.dialogOpened=!1}}})};C._withStripped=!0;const x=a({data:()=>({confirmMessageKey:null,confirmTitleKey:null,confirmOkKey:null,confirmCancelKey:null,clickCallback:null,dialogOpened:!1}),watch:{dialogOpened(){this.dialogOpened?this.$root.$emit("activity-stream-confirm-opened"):this.$root.$emit("activity-stream-confirm-closed")}},created(){this.$root.$on("activity-stream-display-confirm",(t=>{this.confirmTitleKey=t.title,this.confirmMessageKey=t.message,this.confirmOkKey=t.ok,this.confirmCancelKey=t.cancel,this.clickCallback=t.callback,this.$refs.confirmDialog.open()}))}},C,[],!1,null,null,null).exports;var b=function(){var t=this,e=t._self._c;return e("div",{staticClass:"activityStream pa-0",class:t.activityStreamTypeClass},[e("activity-stream-confirm-dialog"),t._v(" "),t.showStreamUpdater?e("activity-stream-updater",{ref:"activityUpdater",attrs:{"space-id":t.spaceId,activities:t.activities,standalone:!!t.activityId},on:{loadActivities:t.loadActivities}}):t._e(),t._v(" "),t.activitiesToDisplay.length?t._l(t.activitiesToDisplay,(function(i){return e("activity-stream-loader",{key:i.id,staticClass:"mb-6 contentBox",attrs:{activity:i,"activity-types":t.activityTypes,"activity-actions":t.activityActions,"comment-types":t.commentTypes,"comment-actions":t.commentActions,"is-activity-detail":t.activityId,"pin-activity-enabled":t.pinActivityEnabled},on:{loaded:function(e){return t.activityLoaded(i.id)}}})})):t.loading?e("div",{staticClass:"white border-radius activity-detail flex d-flex flex-column mb-6 contentBox"},[e("v-progress-circular",{staticClass:"mx-auto my-10",attrs:{color:"primary",size:"32",indeterminate:""}})],1):t.activityId||t.isDeleted?t._e():[t.activityId?e("activity-not-found"):t.error?t._e():[t.streamFilter&&"all_stream"!==t.streamFilter?e("activity-stream-empty-message-filter",{attrs:{"stream-filter":t.streamFilter}}):t.spaceId?e("activity-stream-empty-message-space"):e("activity-stream-empty-message-user")]],t._v(" "),t.hasMore?e("v-btn",{staticClass:"btn pa-0",attrs:{loading:t.loading,disabled:t.loading,block:""},on:{click:t.loadMore}},[t._v("\n    "+t._s(t.$t("Search.button.loadMore"))+"\n  ")]):t._e(),t._v(" "),e("activity-auto-link")],2)};b._withStripped=!0;const _=a({props:{activityId:{type:String,default:null},activityTypes:{type:Object,default:null},activityActions:{type:Object,default:null},commentTypes:{type:Object,default:null},commentActions:{type:Object,default:null}},data:()=>({activities:[],pageSize:10,limit:10,retrievedSize:0,loadedActivities:new Set,spaceId:eXo.env.portal.spaceId,userName:eXo.env.portal.userName,hasMore:!1,loading:!1,error:!1,isDeleted:!1,streamFilter:"all_stream"}),computed:{activitiesToDisplay(){return this.activities&&this.activities.filter((t=>t&&!t.activityId))||[]},activityStreamTypeClass(){return this.spaceId?"activity-stream-space":"activity-stream-user"},pinActivityEnabled(){return this.spaceId&&(null===this.streamFilter||"all_stream"===this.streamFilter)||!1},showStreamUpdater(){return"all_stream"===this.streamFilter}},watch:{loading(){this.loading||(window.setTimeout((()=>{document.dispatchEvent(new CustomEvent("analytics-install-watchers"))}),500),(!this.activities.length||this.loadedActivities>=this.activitiesToDisplay.length)&&this.$root.$applicationLoaded())}},created(){this.streamFilter=!this.spaceId&&localStorage.getItem("activity-stream-stored-filter")||"all_stream",document.addEventListener("activity-favorite-removed",(t=>{const e=t&&t.detail&&t.detail;if("user_favorite_stream"===this.streamFilter){this.$set(e,"deleted",!0);const t=this;setTimeout((function(){const i=t.activities.findIndex((t=>e.id===t.id));i>=0&&t.activities.splice(i,1)}),200)}})),document.addEventListener("activity-deleted",(t=>{const e=t&&t.detail;if(this.activityId&&(this.isDeleted=!0),e){const t=this.activities.findIndex((t=>e===t.id));t>=0&&(this.activities.splice(t,1),this.$forceUpdate())}})),document.addEventListener("activity-pinned",(t=>{if(this.pinActivityEnabled){const e=t?.detail;this.$set(e,"pinned",!0);const i=this.activitiesToDisplay.findIndex((t=>e.id===t.id));this.activitiesToDisplay.splice(i,1),this.$forceUpdate();const s=this;setTimeout((function(){s.activitiesToDisplay.unshift(e),s.$forceUpdate()}),10)}this.displayAlert(this.$t("UIActivity.label.successfullyPinned"))})),document.addEventListener("activity-unpinned",(t=>{if(this.pinActivityEnabled){const e=t?.detail;this.$set(e,"pinned",!1);const i=this.activitiesToDisplay.findIndex((t=>e.id===t.id));i>=0&&this.activitiesToDisplay.splice(i,1),this.$forceUpdate();const s=this;setTimeout((function(){let t=!1;for(let i=0;i<s.activitiesToDisplay.length;i++)if(new Date(e.updateDate)>new Date(s.activitiesToDisplay[i].updateDate)&&!s.activitiesToDisplay[i].pinned){s.activitiesToDisplay.splice(i,0,e),t=!0;break}t||s.hasMore||s.activitiesToDisplay.push(e),s.$forceUpdate()}),50)}this.displayAlert(this.$t("UIActivity.label.successfullyUnpinned"))})),document.addEventListener("activity-updated",(t=>{const e=t&&t.detail;this.updateActivityDisplayById(e)})),document.addEventListener("activity-stream-type-filter-applied",(t=>{this.streamFilter=t&&t.detail,this.activities=[],this.loadActivityIds()})),this.$root.$on("activity-updated",((t,e)=>{e?this.updateActivityDisplay(e):this.updateActivityDisplayById(t)})),this.limit=this.pageSize,this.retrievedSize=this.limit,this.hasMore=!1,Promise.resolve(this.init()).finally((()=>{this.$refs&&this.$refs.activityUpdater&&this.$refs.activityUpdater.init(),document.dispatchEvent(new CustomEvent("hideTopBarLoading"))}))},methods:{init(){return this.activityId?this.loadActivity():this.loadActivityIds()},loadActivity(){return this.loading=!0,this.$activityService.getActivityById(this.activityId,this.$activityConstants.FULL_ACTIVITY_EXPAND).then(this.setDisplayedActivity).catch((()=>this.error=!0)).finally((()=>this.loading=!1))},loadActivityIds(){return this.loading=!0,this.$activityService.getActivities(this.spaceId,this.streamFilter,2*this.limit,this.$activityConstants.FULL_ACTIVITY_IDS_EXPAND).then((t=>{this.$emit("can-post-loaded",t.canPost);const e=t&&(t.activityIds||t.activities)||[];this.retrievedSize=e.length,this.hasMore=this.retrievedSize>this.limit;const i=e.slice(0,this.limit).map(((t,e)=>{const i=t&&t.id,s=this.activities.find((t=>t.id===i));return s?Promise.resolve(s):i?(this.$set(t,"loading",!0),e<this.activities.length?this.activities.splice(e,0,t):this.activities.push(t),this.$activityService.getActivityById(i,this.$activityConstants.FULL_ACTIVITY_EXPAND).then((e=>Object.assign(t,e))).finally((()=>this.$set(t,"loading",!1)))):void 0}));return Promise.all(i)})).finally((()=>this.loading=!1))},activityLoaded(t){this.loadedActivities.add(t),this.loadedActivities.size&&this.loadedActivities.size>=this.activitiesToDisplay.length&&this.$root.$applicationLoaded()},setDisplayedActivity(t){t.activityId?this.$emit("activity-select",t.activityId,t.id):this.activities=t&&[t]||[]},updateActivityDisplayById(t){return this.loading=!0,this.$activityService.getActivityById(t,this.$activityConstants.ACTIVITY_EXPAND).then((t=>this.updateActivityDisplay(t))).finally((()=>this.loading=!1))},updateActivityDisplay(t){const e=this.activities.findIndex((e=>t.id===e.id));if(e>=0){const i=Object.assign({},this.activities[e],t);this.activities.splice(e,1,i),this.$root.$emit("activity-refresh-ui",t.id)}},loadMore(){this.limit+=this.pageSize,this.loadActivityIds()},loadActivities(t){this.limit+=t,this.loadActivityIds().catch((()=>window.location.reload())),this.$nextTick().then((()=>{const t=document.getElementById("ActivityStream");window.setTimeout((()=>{t&&t.scrollIntoView&&t.scrollIntoView({behavior:"smooth",block:"start"})}),10)}))},applyFilter(t){this.streamFilter=t,this.loadActivityIds()},displayAlert(t,e){document.dispatchEvent(new CustomEvent("notification-alert",{detail:{message:t,type:e||"success"}}))}}},b,[],!1,null,null,null).exports;var T=function(){var t=this,e=t._self._c;return e("unread-badge",{staticClass:"white border-radius activity-detail flex flex-column",attrs:{id:t.id,"unread-metadata":t.unreadMetadata,"space-id":t.spaceId},on:{read:function(e){t.unreadMetadata=null}}},[t.displayLoading?e("v-progress-circular",{staticClass:"mx-auto my-10",attrs:{color:"primary",size:"32",indeterminate:""}}):t._e(),t._v(" "),!t.noExtension&&t.extendedComponent?[t.extendedComponent.overrideHeader?t._e():e("activity-head",{class:t.isActivityShared?"py-4 px-0":"py-2 ps-4 pe-1",attrs:{activity:t.activity,"activity-actions":t.activityActions,"is-activity-detail":t.isActivityDetail,"activity-type-extension":t.activityTypeExtension,"hide-menu":t.hideMenu}}),t._v(" "),t.loading?t._e():[e("extension-registry-component",{staticClass:"d-flex flex-column",attrs:{component:t.extendedComponentOptions,element:t.extendedComponent.element,"element-class":t.extendedComponent.class,params:t.extendedComponentParams}})],t._v(" "),t.hideFooter?t._e():[t.extendedComponent.overrideFooter?t._e():e("activity-footer",{attrs:{activity:t.activity,"is-activity-detail":t.isActivityDetail,"activity-types":t.activityTypes,"activity-type-extension":t.activityTypeExtension}}),t._v(" "),t.extendedComponent.overrideComments?t._e():e("activity-comments-preview",{staticClass:"px-4",attrs:{activity:t.activity,"comment-types":t.commentTypes,"comment-actions":t.commentActions}})]]:[e("activity-head",{class:t.isActivityShared?"py-4 px-0":"py-2 ps-4 pe-1",attrs:{activity:t.activity,"activity-actions":t.activityActions,"is-activity-detail":t.isActivityDetail,"activity-type-extension":t.activityTypeExtension,"is-activity-shared":t.isActivityShared,"hide-menu":t.hideMenu}}),t._v(" "),t.loading?t._e():e("v-card",{attrs:{flat:""}},[t.initialized?e("extension-registry-components",{staticClass:"d-flex flex-column",class:!t.isActivityShared&&"px-4",attrs:{params:t.extendedComponentParams,name:"ActivityContent",type:"activity-content-extensions","parent-element":"div",element:"div"}}):t._e()],1),t._v(" "),t.hideFooter?t._e():[e("activity-footer",{attrs:{activity:t.activity,"is-activity-detail":t.isActivityDetail,"activity-types":t.activityTypes,"activity-type-extension":t.activityTypeExtension}}),t._v(" "),e("activity-comments-preview",{staticClass:"px-4",attrs:{activity:t.activity,"comment-types":t.commentTypes,"comment-actions":t.commentActions}})]]],2)};T._withStripped=!0;const E=a({props:{activity:{type:Object,default:null},activityTypes:{type:Object,default:null},activityActions:{type:Object,default:null},commentTypes:{type:Object,default:null},commentActions:{type:Object,default:null},isActivityDetail:{type:Boolean,default:!1},isActivityShared:{type:Boolean,default:!1},hideFooter:{type:Boolean,default:!1},hideMenu:{type:Boolean,default:!1}},data:()=>({loading:!1,initialized:!1,noExtension:!1,unreadMetadata:null}),computed:{id(){return`activity-detail-${this.activityId}`},activityId(){return this.activity&&this.activity.id},activityTypeExtension(){return this.sharedActivityTypeExtension&&this.sharedActivityTypeExtension.extendSharedActivity&&this.sharedActivityTypeExtension.extendSharedActivity(this.activity,this.isActivityDetail)?this.sharedActivityTypeExtension:this.activity&&this.activityTypes&&(this.activityTypes[this.activityType]||this.activityTypes.default)||{}},sharedActivity(){return this.activity&&this.activity.originalActivity},sharedActivityType(){return this.sharedActivity&&this.sharedActivity.type},sharedActivityTypeExtension(){return!this.noExtension&&this.sharedActivity&&this.activityTypes&&(this.activityTypes[this.sharedActivityType]||this.activityTypes.default)||null},extendedComponent(){if(this.noExtension)return null;return this.activityTypeExtension&&this.activityTypeExtension.getExtendedComponent&&this.activityTypeExtension.getExtendedComponent(this.activity,this.isActivityDetail)||this.sharedActivityTypeExtension&&this.sharedActivityTypeExtension.getExtendedComponent&&this.sharedActivityTypeExtension.getExtendedComponent(this.activity,this.isActivityDetail)},extendedComponentOptions(){return this.extendedComponent&&{componentName:`Activity-${this.activityTypeExtension.id}`,componentOptions:{vueComponent:this.extendedComponent.component}}},extendedComponentParams(){return{activity:this.activity,isActivityDetail:this.isActivityDetail,activityTypeExtension:this.activityTypeExtension,activityTypes:this.activityTypes,loading:this.loading}},init(){return this.activityTypeExtension&&this.activityTypeExtension.init},displayLoading(){return this.activityLoading||!this.initialized},activityType(){return this.activity&&this.activity.type},activityLoading(){return this.activity&&this.activity.loading},spaceId(){return this.activity?.activityStream?.space?.id||""}},watch:{activityLoading(){this.activityLoading||this.retrieveActivityProperties()},loading(){this.loading||this.setWindowTitle()},displayLoading(){this.displayLoading||this.$emit("loaded")},activityTypeExtension(){this.activityTypeExtension&&this.retrieveActivityProperties()},initialized(){this.initialized&&!this.isActivityShared&&(this.unreadMetadata=this.activity?.metadatas?.unread?.length&&this.activity?.metadatas?.unread[0])}},created(){this.$root.$on("activity-extension-abort",this.abortSpecificExtension),this.$root.$on("activity-refresh-ui",this.retrieveActivityProperties),this.retrieveActivityProperties()},mounted(){this.$root.selectedCommentId&&this.activity&&this.activity.id===this.$root.selectedActivityId&&window.setTimeout((()=>{document.dispatchEvent(new CustomEvent("activity-comments-display",{detail:{activity:this.activity,offset:0,limit:200,noAuitomaticScroll:!0}}))}),50),this.activity.highlight&&this.scrollTo(this.$el),this.$root.$emit("activity-refreshed")},beforeDestroy(){this.$root.$off("activity-refresh-ui",this.retrieveActivityProperties),this.$root.$off("activity-extension-abort",this.abortSpecificExtension)},methods:{retrieveActivityProperties(t){this.activityLoading||t&&t!==this.activityId||(this.loading=!0,this.$nextTick((()=>{if(this.init){const t=this.init(this.activity,this.isActivityDetail);if(t&&t.then)return t.then((()=>this.$nextTick())).finally((()=>{this.loading=!1,this.initialized=!0}))}this.loading=!1,this.initialized=!0})))},setWindowTitle(){if(this.isActivityDetail&&this.activityTypeExtension){let t=document.title||"";const e=this.activityTypeExtension.windowTitlePrefixKey||"activity.window.title";this.activityTypeExtension.getWindowTitle?(t=this.activityTypeExtension.getWindowTitle(this.activity)||"",t=this.$t(e,{0:this.$utils.htmlToText(t)})):this.activityTypeExtension.getTitle?(t=this.activityTypeExtension.getTitle(this.activity)||"",t&&t.key&&(t=this.$t(t.key,t.params||{})),t=this.$t(e,{0:this.$utils.htmlToText(t)})):(t=this.activity.title||"",t=this.$t(e,{0:this.$utils.htmlToText(t)})),t&&(t.length>100?document.title=`${t.substring(0,100)}...`:document.title=t)}},abortSpecificExtension(t){t===this.activityId&&(this.noExtension=!0)},scrollTo(t){window.setTimeout((()=>{t&&t.scrollIntoView&&t.scrollIntoView({behavior:"smooth",block:"start"})}),10)}}},T,[],!1,null,null,null).exports;var I=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pinnedActivity"},[e("div",{staticClass:"my-auto flex-grow-1 py-2 ps-4 pe-1"},[e("v-icon",{attrs:{color:"grey",size:16}},[t._v("\n      fa-thumbtack\n    ")]),t._v(" "),e("span",{staticClass:"ms-2"},[t._v(t._s(t.$t("UIActivity.label.pinnedActivity")))])],1),t._v(" "),e("activity-stream-activity",{key:t.activity.id,attrs:{activity:t.activity,"activity-types":t.activityTypes,"activity-actions":t.activityActions,"comment-types":t.commentTypes,"comment-actions":t.commentActions,"is-activity-detail":t.isActivityDetail},on:{loaded:function(e){return t.$emit("loaded")}}})],1)};I._withStripped=!0;const w=a({props:{activity:{type:Object,default:null},activityTypes:{type:Object,default:null},activityActions:{type:Object,default:null},commentTypes:{type:Object,default:null},commentActions:{type:Object,default:null},isActivityDetail:{type:Boolean,default:!1}}},I,[],!1,null,null,null).exports;var A=function(){var t=this,e=t._self._c;return t.activityLoading?e("div",{key:t.activity.id,staticClass:"white border-radius activity-detail flex d-flex flex-column mb-6 contentBox"},[e("v-progress-circular",{staticClass:"mx-auto my-10",attrs:{color:"primary",size:"32",indeterminate:""}})],1):t.pinnedActivity?e("transition",[e("activity-stream-pinned-activity",{key:t.activity.id,attrs:{activity:t.activity,"activity-types":t.activityTypes,"activity-actions":t.activityActions,"comment-types":t.commentTypes,"comment-actions":t.commentActions,"is-activity-detail":t.isActivityDetail}})],1):e("transition",[e("activity-stream-activity",{directives:[{name:"show",rawName:"v-show",value:!t.activityDeleted,expression:"!activityDeleted"}],key:t.activity.id,staticClass:"mb-6 contentBox",attrs:{activity:t.activity,"activity-types":t.activityTypes,"activity-actions":t.activityActions,"comment-types":t.commentTypes,"comment-actions":t.commentActions,"is-activity-detail":t.isActivityDetail},on:{loaded:function(e){return t.$emit("loaded")}}})],1)};A._withStripped=!0;const k=a({props:{activity:{type:Object,default:null},activityTypes:{type:Object,default:null},activityActions:{type:Object,default:null},commentTypes:{type:Object,default:null},commentActions:{type:Object,default:null},isActivityDetail:{type:Boolean,default:!1},isActivityShared:{type:Boolean,default:!1},hideFooter:{type:Boolean,default:!1},hideMenu:{type:Boolean,default:!1},pinActivityEnabled:{type:Boolean,default:!1}},computed:{activityLoading(){return this.activity&&this.activity.loading},activityDeleted(){return this.activity&&this.activity.deleted},pinnedActivity(){return this.activity&&this.activity.pinned&&this.pinActivityEnabled}}},A,[],!1,null,null,null).exports;var S=function(){var t=this,e=t._self._c;return e("v-flex",{staticClass:"d-flex content-box-sizing justify-end"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"width-auto my-auto ignore-vuetify-classes d-none d-sm-inline",on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.filter=e.target.multiple?i:i[0]},t.applyFilter]}},t._l(t.streamFilters,(function(i){return e("option",{key:i.value,domProps:{value:i.value}},[t._v("\n      "+t._s(i.text)+"\n    ")])})),0),t._v(" "),e("v-icon",{staticClass:"d-sm-none",attrs:{size:"18"},on:{click:t.openBottomMenuFilter}},[t._v("\n    fa-filter\n  ")]),t._v(" "),e("v-bottom-sheet",{staticClass:"pa-0",model:{value:t.bottomMenu,callback:function(e){t.bottomMenu=e},expression:"bottomMenu"}},[e("v-sheet",{staticClass:"text-center"},[e("v-toolbar",{staticClass:"border-box-sizing",attrs:{color:"primary",dark:""}},[e("v-btn",{attrs:{text:""},on:{click:function(e){t.bottomMenu=!1}}},[t._v("\n          "+t._s(t.$t("activity.filter.button.cancel"))+"\n        ")]),t._v(" "),e("v-spacer"),t._v(" "),e("v-toolbar-title",[e("v-icon",[t._v("fa-filter")]),t._v("\n          "+t._s(t.$t("activity.filter.label"))+"\n        ")],1),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{text:""},on:{click:t.changeFilterSelection}},[t._v("\n          "+t._s(t.$t("activity.filter.button.confirm"))+"\n        ")])],1),t._v(" "),e("v-list",t._l(t.streamFilters,(function(i){return e("v-list-item",{key:i,on:{click:function(e){t.filterToChange=i.value}}},[e("v-list-item-title",{staticClass:"align-center d-flex"},[t.filterToChange===i.value?e("v-icon",[t._v("fa-check")]):e("span",{staticClass:"me-6"}),t._v(" "),e("v-spacer"),t._v(" "),e("div",[t._v("\n              "+t._s(i.text)+"\n            ")]),t._v(" "),e("v-spacer"),t._v(" "),e("span",{staticClass:"me-6"})],1)],1)})),1)],1)],1)],1)};S._withStripped=!0;const L=a({data:()=>({filterToChange:null,bottomMenu:!1,spaceId:eXo.env.portal.spaceId,filter:"all_stream"}),computed:{streamFilters(){return[{text:eXo.env.portal.spaceId&&this.$t("activity.filter.anyActivity")||this.$t("activity.filter.all"),value:"all_stream"},{text:this.$t("activity.filter.pinnedActivities"),value:"pin_stream",enable:!eXo.env.portal.spaceId},{text:this.$t("activity.filter.myActivities"),value:"user_stream"},{text:this.$t("activity.filter.favoriteActivities"),value:"user_favorite_stream"},{text:this.$t("activity.filter.manageSpaces"),value:"manage_spaces_stream",enable:!eXo.env.portal.spaceId},{text:this.$t("activity.filter.favoriteSpaces"),value:"favorite_spaces_stream",enable:!eXo.env.portal.spaceId}].filter((t=>null==t.enable||!0===t.enable))}},created(){this.filter=!this.spaceId&&localStorage.getItem("activity-stream-stored-filter")||"all_stream"},methods:{applyFilter(){document.dispatchEvent(new CustomEvent("activity-stream-type-filter-applied",{detail:this.filter})),this.spaceId||localStorage.setItem("activity-stream-stored-filter",this.filter)},openBottomMenuFilter(){this.filterToChange=this.filter,this.bottomMenu=!0},changeFilterSelection(){this.bottomMenu=!1,this.filter=this.filterToChange,this.applyFilter()}}},S,[],!1,null,null,null).exports;var P=function(){var t=this,e=t._self._c;return e("v-list-item",{staticClass:"activity-head",attrs:{dense:""}},[t.isMobile?[e("activity-mobile-head",{staticClass:"px-0",attrs:{activity:t.activity,"is-activity-shared":t.isActivityShared,"poster-identity":t.posterIdentity,space:t.space}})]:[e("exo-user-avatar",{attrs:{identity:t.posterIdentity,size:45,"extra-class":"me-2",popover:"",avatar:""}}),t._v(" "),e("v-list-item-content",{staticClass:"py-0 accountTitleLabel"},[e("v-list-item-title",{staticClass:"font-weight-bold d-flex body-2 mb-0"},[e("exo-user-avatar",{attrs:{identity:t.posterIdentity,fullname:"",popover:"","bold-title":"","link-style":"","username-class":""}}),t._v(" "),t.space?[t.$vuetify.rtl?e("v-icon",{staticClass:"mx-1 ps-1",attrs:{size:"8"}},[t._v("\n            fa-chevron-left\n          ")]):e("v-icon",{staticClass:"mx-1 ps-1",attrs:{size:"8"}},[t._v("\n            fa-chevron-right\n          ")]),t._v(" "),e("exo-space-avatar",{attrs:{space:t.space,size:20,"bold-title":"","link-style":"",popover:""}})]:t._e()],2),t._v(" "),e("activity-head-time",{staticClass:"d-flex activity-head-time",attrs:{activity:t.activity,"is-activity-shared":t.isActivityShared}})],1)],t._v(" "),e("extension-registry-components",{staticClass:"d-flex flex-no-wrap mx-0 mt-0 mb-auto activity-header-actions",attrs:{params:t.params,name:"ActivityHeader",type:"activity-header-actions","parent-element":"div",element:"div","element-class":"mx-auto activity-header-action"}}),t._v(" "),e("activity-head-menu",{attrs:{activity:t.activity,"activity-actions":t.activityActions,"is-activity-detail":t.isActivityDetail,"activity-type-extension":t.activityTypeExtension}})],2)};P._withStripped=!0;const D=a({props:{activity:{type:Object,default:null},isActivityShared:{type:Boolean,default:()=>!1},activityTypeExtension:{type:Object,default:null},activityActions:{type:Object,default:null},isActivityDetail:{type:Boolean,default:!1},spaceStream:{type:Object,default:null}},computed:{space(){return this.activity&&this.activity.activityStream&&this.activity.activityStream.space},params(){return{activity:this.activity,activityTypeExtension:this.activityTypeExtension,isActivityShared:this.isActivityShared}},posterIdentity(){return this.activity&&this.activity.identity&&this.activity.identity.profile&&this.activity.identity.profile.dataEntity},isMobile(){return"xs"===this.$vuetify.breakpoint.name||"sm"===this.$vuetify.breakpoint.name}}},P,[],!1,null,null,null).exports;var z=function(){var t=this,e=t._self._c;return t.displayUserAvatar?e("v-list-item",{staticClass:"text-truncate"},[e("exo-user-avatar",{attrs:{identity:t.posterIdentity,size:42,avatar:""}}),t._v(" "),e("v-list-item-content",{staticClass:"py-0 accountTitleLabel ms-2"},[e("v-list-item-title",{staticClass:"font-weight-bold d-flex body-2 mb-0"},[e("exo-user-avatar",{attrs:{identity:t.posterIdentity,"extra-class":"me-5 text-truncate",fullname:"","bold-title":"","link-style":"","username-class":""}})],1),t._v(" "),e("v-list-item-subtitle",[e("activity-head-time",{staticClass:"d-flex activity-head-time",attrs:{activity:t.activity,"is-activity-shared":t.isActivityShared,"is-mobile":"","no-icon":""}})],1)],1)],1):e("v-list-item",{staticClass:"text-truncate"},[e("exo-space-avatar",{attrs:{space:t.space,"extra-class":"text-truncate",size:42,avatar:""}}),t._v(" "),e("exo-user-avatar",{attrs:{identity:t.posterIdentity,size:31,"extra-class":"ms-n4 mt-6",avatar:""}}),t._v(" "),e("v-list-item-content",{staticClass:"py-0 accountTitleLabel text-truncate"},[e("v-list-item-title",{staticClass:"font-weight-bold d-flex body-2 mb-0"},[e("exo-space-avatar",{attrs:{space:t.space,"extra-class":"text-truncate",fullname:"","bold-title":"","link-style":"","username-class":""}})],1),t._v(" "),e("v-list-item-subtitle",{staticClass:"d-flex flex-row flex-nowrap"},[e("exo-user-avatar",{attrs:{identity:t.posterIdentity,"extra-class":"text-truncate ms-2 me-1",fullname:"","link-style":"","small-font-size":"","username-class":""}}),t._v(" "),e("activity-head-time",{staticClass:"text-caption activity-head-time pt-0 ps-0",attrs:{activity:t.activity,"is-activity-shared":t.isActivityShared,"is-mobile":"","no-icon":""}})],1)],1)],1)};z._withStripped=!0;const O=a({props:{activity:{type:Object,default:null},isActivityShared:{type:Boolean,default:()=>!1},posterIdentity:{type:Object,default:null},space:{type:Object,default:null}},computed:{displayUserAvatar(){return""!==eXo.env.portal.spaceId||!this.space}}},z,[],!1,null,null,null).exports;var B=function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-light-color",class:t.truncateText},[t.noIcon?t._e():e("v-icon",{staticClass:"text-light-color me-1",attrs:{"x-small":""}},[t._v("\n    far fa-clock\n  ")]),t._v(" "),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:s}){return[e("v-btn",t._g(t._b({staticClass:"hover-underline width-auto text-capitalize-first-letter px-0",class:t.btnClass,attrs:{href:t.activityLink,height:t.btnHeight,"x-small":t.btnXSmall,link:"",text:"",plain:""}},"v-btn",s,!1),i),[t.isActivityEdited?e("relative-date-format",{staticClass:"text-capitalize-first-letter text-light-color relativeDateFormatClass",class:t.truncateText,attrs:{value:t.activity.updateDate,short:t.isMobile,label:"UIActivity.label.EditedFrom"}}):e("relative-date-format",{staticClass:"text-capitalize-first-letter text-light-color relativeDateFormatClass",class:t.truncateText,attrs:{value:t.activity.createDate,short:t.isMobile}})],1)]}}])},[t._v(" "),e("date-format",{attrs:{value:t.activityPostedTime,format:t.dateFormat}})],1)],1)};B._withStripped=!0;const M=a({props:{activity:{type:Object,default:null},noIcon:{type:Boolean,default:!1},isActivityShared:{type:Boolean,default:()=>!1},isMobile:{type:Boolean,default:()=>!1}},data:()=>({dateFormat:{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}}),computed:{isActivityEdited(){return this.activity&&this.activity.updateDate!==this.activity.createDate},activityId(){return this.activity&&this.activity.id},activityLink(){return`${this.$root.activityBaseLink}?id=${this.activityId}`},activityPostedTime(){return this.activity&&(this.activity.updateDate||this.activity.createDate)},btnHeight(){return this.isMobile?"18":"20"},btnXSmall(){return!this.isMobile},btnClass(){return this.isMobile?"text-caption":" "},relativeDateFormatClass(){return this.isMobile?"":"pt-1 ps-1"},truncateText(){return this.isMobile?" ":"text-truncate"}}},B,[],!1,null,null,null).exports;var U=function(){var t=this,e=t._self._c;return e("v-list-item-icon",{directives:[{name:"show",rawName:"v-show",value:t.enabledActions&&t.enabledActions.length,expression:"enabledActions && enabledActions.length"}],staticClass:"ma-0"},[e("v-menu",{attrs:{left:!t.$vuetify.rtl,right:t.$vuetify.rtl,bottom:"","offset-y":"",attach:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:s}){return[e("v-btn",t._g(t._b({staticClass:"me-2",attrs:{disabled:t.loading,loading:t.loading,icon:"",small:""}},"v-btn",s,!1),i),[e("v-icon",{staticClass:"icon-default-color",attrs:{size:"16"}},[t._v("fas fa-ellipsis-v")])],1)]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),e("v-list",{staticClass:"pa-0",attrs:{dense:""}},t._l(t.enabledActions,(function(i){return e("v-list-item",{key:i.id,attrs:{dense:""},on:{click:function(e){return t.clickOnAction(i)}}},[e("v-icon",{staticClass:"dark-grey-color",attrs:{size:"13"}},[t._v(t._s(t.$t(i.icon)))]),t._v(" "),e("v-list-item-title",{staticClass:"pl-3"},[t._v(t._s(t.$t(i.labelKey)))])],1)})),1)],1)],1)};U._withStripped=!0;const N=a({props:{activity:{type:Object,default:null},activityTypeExtension:{type:Object,default:null},activityActions:{type:Object,default:null},isActivityDetail:{type:Boolean,default:!1}},data:()=>({menu:!1,loading:!1}),computed:{enabledActions(){return this.activityActions&&Object.values(this.activityActions).filter((t=>t.isEnabled&&t.id&&t.click&&t.isEnabled(this.activity,this.activityTypeExtension)))}},created(){$(document).mousedown((()=>{this.menu&&window.setTimeout((()=>{this.menu=!1}),200)}))},methods:{clickOnAction(t){t.confirmDialog?this.$root.$emit("activity-stream-display-confirm",{title:t.confirmTitleKey,message:t.confirmMessageKey,ok:t.confirmOkKey,cancel:t.confirmCancelKey,callback:()=>this.confirmAction(t)}):this.confirmAction(t)},confirmAction(t){const e=t.click(this.activity,this.activityTypeExtension,this.isActivityDetail);e&&e.finally&&e.then&&(this.loading=!0,e.finally((()=>{window.setTimeout((()=>{this.loading=!1}),500)})))}}},U,[],!1,null,null,null).exports;var j=function(){var t=this,e=t._self._c;return t.isBodyNotEmpty?e("dynamic-html-element",{staticClass:"reset-style-box text-break overflow-hidden",class:t.bodyClass,attrs:{child:t.bodyElement,element:t.element,dir:"auto"}}):t._e()};j._withStripped=!0;const R=a({props:{activity:{type:Object,default:null},activityTypeExtension:{type:Object,default:null},isActivityDetail:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},data:()=>({body:null}),computed:{bodyElement(){return{template:ExtendedDomPurify.purify(`<div>${this.body}</div>`)||""}},getBody(){return this.activityTypeExtension&&this.activityTypeExtension.getBody},activityId(){return this.activity&&this.activity.id},isBodyNotEmpty(){return this.body&&this.$utils.trim(this.body).length},useParagraph(){return!this.body.includes("</p>")},element(){return this.useParagraph?"p":"div"},isComment(){return this.activity&&this.activity.activityId},bodyClass(){return this.isComment?"rich-editor-content":"postContent text-color py-0"}},watch:{loading(){this.loading&&this.$nextTick().then((()=>this.retrieveActivityProperties()))}},created(){this.retrieveActivityProperties()},mounted(){this.$tagService.initTags(this.$t("Tag.tooltip.startSearch"))},methods:{retrieveActivityProperties(){this.body=this.getBody&&this.getBody(this.activity,this.isActivityDetail)}}},j,[],!1,null,null,null).exports;var F=function(){var t=this,e=t._self._c;return t.sourceLink?e("dynamic-html-element",{staticClass:"d-flex flex-no-wrap activity-thumbnail-box",attrs:{element:t.htmlElement,href:t.link,target:t.linkTarget,title:t.tooltipText}},[t.useMobileView?[e("div",{staticClass:"border-box-sizing flex"},[t.supportsThumbnail?e("v-avatar",{class:t.thumbnailMobileNoBorder||"border-color",attrs:{"min-height":t.thumbnailMobileHeight,height:t.thumbnailMobileHeight,"min-width":t.thumbnailMobileWidth,width:t.thumbnailMobileWidth,rounded:"",eager:"",tile:""}},[t.thumbnail?e("img",{staticClass:"object-fit-cover my-auto",attrs:{src:`${t.thumbnail}`,alt:t.title,loading:"lazy",role:"presentation"}}):e("v-icon",{staticClass:"grey-text",attrs:{size:t.defaultIconSize,contain:""}},[t._v("\n          "+t._s(t.defaultIconClass)+"\n        ")])],1):t._e(),t._v(" "),t.title?e("div",{staticClass:"pa-4",class:t.thumbnailMobileNoBorder||"border-color no-border-top"},[t.title?e("div",{staticClass:"font-weight-bold text-color ma-0 text-wrap text-break text-truncate-2",attrs:{title:t.titleTooltip},domProps:{textContent:t._s(t.titleText)}}):t._e()]):t._e()],1)]:[t.supportsThumbnail?e("v-avatar",{staticClass:"border-box-sizing align-start my-4 me-4",class:t.thumbnailNoBorder||"border-color",attrs:{"min-height":t.thumbnailHeight,height:t.thumbnailHeight,"min-width":t.thumbnailWidth,width:t.thumbnailWidth,rounded:"",eager:"",tile:""}},[t.thumbnail?e("img",{staticClass:"object-fit-cover my-auto",attrs:{src:t.thumbnail,alt:t.title,loading:"lazy",role:"presentation"}}):e("v-icon",{staticClass:"grey-text",attrs:{size:t.defaultIconSize,contain:""}},[t._v("\n        "+t._s(t.defaultIconClass)+"\n      ")])],1):t.supportsIcon?e("v-avatar",{staticClass:"border-box-sizing align-start my-4 me-4",class:t.iconNoBorder||"border-color",attrs:{"min-height":t.iconHeight,height:t.iconHeight,"min-width":t.iconWidth,width:t.iconWidth,rounded:"",eager:"",tile:""}},[e("v-icon",{staticClass:"grey-text",attrs:{size:t.defaultIconSize,contain:""}},[t._v("\n        "+t._s(t.defaultIconClass)+"\n      ")])],1):t._e(),t._v(" "),e("div",{staticClass:"my-4"},[t.title?e("dynamic-html-element",{staticClass:"font-weight-bold text-color mx-0 mt-0 mb-2 text-wrap text-break",class:t.useEllipsisOnTitle?"text-truncate-2":"",attrs:{child:t.titleElement,dir:"auto"}}):t._e(),t._v(" "),t.summary?e("dynamic-html-element",{staticClass:"caption text-wrap text-break rich-editor-content reset-style-box",class:t.useEllipsisOnSummary?"text-light-color text-truncate-3":"text-color",attrs:{child:t.summaryElement,title:t.summaryTooltip,dir:"auto"}}):t._e()],1)]],2):t._e()};F._withStripped=!0;const X=a({props:{activity:{type:Object,default:null},activityTypeExtension:{type:String,default:null},isActivityDetail:{type:Boolean,default:!1}},data:()=>({title:null,titleTooltip:null,summary:null,summaryTooltip:null,thumbnail:null,sourceLink:null,tooltip:null,useEllipsisOnSummary:!0,useEllipsisOnTitle:!0}),computed:{getTitle(){return this.activityTypeExtension&&this.activityTypeExtension.getTitle},getSummary(){return this.activityTypeExtension&&this.activityTypeExtension.getSummary},getThumbnail(){return this.activityTypeExtension&&this.activityTypeExtension.getThumbnail},getSourceLink(){return this.activityTypeExtension&&this.activityTypeExtension.getSourceLink},supportsThumbnail(){return this.activityTypeExtension&&this.activityTypeExtension.supportsThumbnail},thumbnailProperties(){return this.activityTypeExtension&&this.activityTypeExtension.getThumbnailProperties?this.activityTypeExtension.getThumbnailProperties(this.activity,this.isActivityDetail):this.activityTypeExtension&&this.activityTypeExtension.thumbnailProperties},useSameViewForMobile(){return this.activityTypeExtension&&this.activityTypeExtension.isUseSameViewForMobile?this.activityTypeExtension.isUseSameViewForMobile(this.activity,this.isActivityDetail):this.activityTypeExtension&&this.activityTypeExtension.useSameViewForMobile},supportsIcon(){return this.supportsThumbnail||this.activityTypeExtension&&this.activityTypeExtension.supportsIcon},getTooltip(){return this.activityTypeExtension&&this.activityTypeExtension.getTooltip},defaultIcon(){return this.activityTypeExtension&&(this.activityTypeExtension.defaultIcon||this.activityTypeExtension.getDefaultIcon&&this.activityTypeExtension.getDefaultIcon(this.comment||this.activity))},defaultIconClass(){return this.defaultIcon&&this.defaultIcon.icon||"far fa-image"},defaultIconSize(){return this.defaultIcon&&this.defaultIcon.size||58},useMobileView(){return"xs"===this.$vuetify.breakpoint.name&&!this.useSameViewForMobile},htmlElement(){return this.sourceLink&&"#"!==this.sourceLink?"a":"div"},link(){return"#"!==this.sourceLink&&this.sourceLink||"javascript:void(0)"},linkTarget(){return(!this.sourceLink||0!==this.sourceLink.indexOf("/")&&0!==this.sourceLink.indexOf("#")?this.sourceLink&&"_blank":"_self")||""},thumbnailHeight(){return this.thumbnailProperties&&this.thumbnailProperties.height||"150px"},thumbnailWidth(){return this.thumbnailProperties&&this.thumbnailProperties.width||"252px"},thumbnailNoBorder(){return this.thumbnailProperties&&this.thumbnailProperties.noBorder},iconHeight(){return this.defaultIcon&&this.defaultIcon.height||"150px"},iconWidth(){return this.defaultIcon&&this.defaultIcon.width||"90px"},iconNoBorder(){return this.defaultIcon&&this.defaultIcon.noBorder},thumbnailMobileHeight(){return this.thumbnailProperties&&this.thumbnailProperties.mobile&&this.thumbnailProperties.mobile.height||"75vw"},thumbnailMobileWidth(){return this.thumbnailProperties&&this.thumbnailProperties.mobile&&this.thumbnailProperties.mobile.width||"100%"},thumbnailMobileNoBorder(){return this.thumbnailProperties&&this.thumbnailProperties.mobile&&(!1===this.thumbnailProperties.mobile.noBorder||!0===this.thumbnailProperties.mobile.noBorder)?this.thumbnailProperties.mobile.noBorder:(!1===this.thumbnailNoBorder||!0===this.thumbnailNoBorder)&&this.thumbnailNoBorder},tooltipText(){return this.tooltip&&this.$t(this.tooltip)||""},titleText(){return this.title&&this.$utils.htmlToText(this.title)||""},summaryText(){return this.summary&&this.$utils.htmlToText(this.summary)||""},summaryElement(){return{template:ExtendedDomPurify.purify(`<div>${this.summary}</div>`)||""}},titleElement(){return{template:ExtendedDomPurify.purify(`<div>${this.title}</div>`)||""}}},watch:{activityTypeExtension(t,e){e&&t===e||this.retrieveActivityProperties()}},created(){this.retrieveActivityProperties()},methods:{retrieveActivityProperties(){this.useEllipsisOnTitle=this.activityTypeExtension&&!this.activityTypeExtension.noTitleEllipsis,this.useEllipsisOnSummary=this.activityTypeExtension&&!this.activityTypeExtension.noSummaryEllipsis,this.title=this.getTitle&&this.getTitle(this.activity,this.isActivityDetail),this.title&&this.title.key?this.title=this.$t(this.title.key,this.title.params||{}):this.title=this.$utils.trim(this.title),this.titleTooltip=this.$utils.htmlToText(this.title),this.summary=this.getSummary&&this.$utils.trim(this.getSummary(this.activity,this.isActivityDetail)),this.summaryTooltip=this.$utils.htmlToText(this.summary),this.sourceLink=this.getSourceLink&&this.getSourceLink(this.activity,this.isActivityDetail),this.tooltip=this.getTooltip&&this.getTooltip(this.activity,this.isActivityDetail),this.supportsThumbnail&&(this.thumbnail=this.getThumbnail&&this.getThumbnail(this.activity,this.isActivityDetail))}}},F,[],!1,null,null,null).exports;var V=function(){var t=this,e=t._self._c;return t.originalActivity&&t.activityTypes?e("div",{staticClass:"border-color border-radius my-3"},[e("activity-stream-activity",{staticClass:"px-4",attrs:{activity:t.originalActivity,"activity-types":t.activityTypes,"is-activity-detail":t.isActivityDetail,"is-activity-shared":"","hide-footer":"","hide-menu":""}})],1):t._e()};V._withStripped=!0;const W=a({props:{activity:{type:Object,default:null},isActivityDetail:{type:Boolean,default:!1},activityTypes:{type:Object,default:null}},computed:{originalActivity(){return this.activity&&this.activity.originalActivity&&Object.assign({parentActivity:this.activity},this.activity.originalActivity)}}},V,[],!1,null,null,null).exports;var K=function(){var t=this,e=t._self._c;return t.embeddedHTML?e("div",{staticClass:"d-flex flex-column flex activity-embedded-box mx-auto",style:t.parentStyle},[t.elementReady?e("div",{staticClass:"border-radius",style:t.embeddedHTMLStyle,domProps:{innerHTML:t._s(t.embeddedHTML)}}):t._e(),t._v(" "),t.titleText?e("a",{staticClass:"py-4 text-color",attrs:{href:t.link,target:t.linkTarget,title:t.titleText}},[e("div",{staticClass:"font-weight-bold text-color ma-0 text-wrap text-break text-truncate-2",domProps:{textContent:t._s(t.titleText)}})]):t._e()]):t._e()};K._withStripped=!0;const H=a({props:{activity:{type:Object,default:null},activityTypeExtension:{type:String,default:null},isActivityDetail:{type:Boolean,default:!1}},data:()=>({maxWidth:320,elementReady:!1}),computed:{embeddedHTML(){return this.activity&&this.activity.templateParams&&this.activity.templateParams.html},sourceLink(){return this.activity&&this.activity.templateParams&&this.activity.templateParams.link||""},link(){return this.sourceLink||"javascript:void(0)"},linkClass(){return"#"===this.sourceLink?"not-clickable":""},linkTarget(){return(!this.sourceLink||0!==this.sourceLink.indexOf("/")&&0!==this.sourceLink.indexOf("#")?this.sourceLink&&"_blank":"_self")||""},title(){return this.activity&&this.activity.templateParams&&this.activity.templateParams.title},titleText(){return this.title&&this.$utils.htmlToText(this.title)||""},previewWidth(){return Number(this.activity.templateParams&&this.activity.templateParams.previewWidth||this.maxWidth)},parentStyle(){return{width:`${this.previewWidth>this.maxWidth&&this.maxWidth||this.previewWidth}px`}},embeddedHTMLStyle(){return{width:`${this.previewWidth>this.maxWidth&&this.maxWidth||this.previewWidth}px`,maxWidth:`${this.maxWidth}px`,maxHeight:`${this.maxWidth}px`}}},mounted(){this.maxWidth=this.$el&&this.$el.parentElement.offsetWidth<this.maxWidth&&String(this.$el.parentElement.offsetWidth-2)||`${this.maxWidth}`,this.elementReady=!0}},K,[],!1,null,null,null).exports;var G=function(){var t=this,e=t._self._c;return e("div",[t.displayShareInformation?e("activity-share-information",{staticClass:"no-border-bottom mb-0 pa-3",attrs:{activity:t.activity,"activity-types":t.activityTypes}}):t._e(),t._v(" "),e("div",{staticClass:"mb-0 d-flex flex-wrap flex-column flex-lg-row",class:t.actionBarBorderClass},[e("activity-reactions",{staticClass:"flex-grow-1 ps-4",attrs:{"activity-id":t.activityId,activity:t.activity,likers:t.likers,"likers-number":t.likersCount,"comment-number":t.commentsCount}}),t._v(" "),e("activity-actions",{staticClass:"px-4",attrs:{activity:t.activity,"activity-type-extension":t.activityTypeExtension}})],1)],1)};G._withStripped=!0;const Y=a({props:{activity:{type:Object,default:null},isActivityDetail:{type:Boolean,default:!1},activityTypes:{type:Object,default:null},activityTypeExtension:{type:Object,default:null}},data:()=>({likersCount:0,commentsCount:0,likers:[]}),computed:{displayShareInformation(){return this.activity&&this.activity.originalActivity&&this.activityTypeExtension&&this.activityTypeExtension.showSharedInformationFooter&&this.activityTypeExtension.showSharedInformationFooter(this.activity,this.isActivityDetail)},activityId(){return this.activity&&this.activity.id},actionBarBorderClass(){return this.isDesktop?"border-top-color border-light-color":""},isDesktop(){return this.$vuetify&&this.$vuetify.breakpoint&&"xs"!==this.$vuetify.breakpoint.name&&"sm"!==this.$vuetify.breakpoint.name&&"md"!==this.$vuetify.breakpoint.name}},created(){this.$root.$on("activity-comment-created",this.checkCommentsSize),this.$root.$on("activity-comment-updated",this.checkCommentsSize),this.$root.$on("activity-comment-deleted",this.checkCommentsSize),this.$root.$on("activity-comments-retrieved",this.checkCommentsSize),document.addEventListener("activity-liked",(t=>{t&&t.detail&&t.detail===this.activityId&&this.checkLikesSize()})),this.checkCommentsSize(),this.checkLikesSize()},beforeDestroy(){this.$root.$off("activity-comment-created",this.checkCommentsSize),this.$root.$off("activity-comment-updated",this.checkCommentsSize),this.$root.$off("activity-comment-deleted",this.checkCommentsSize),this.$root.$off("activity-comments-retrieved",this.checkCommentsSize),document.removeEventListener(`activity-liked-${this.activityId}`,this.checkLikesSize)},methods:{checkLikesSize(){this.likers=this.activity.likes||[],this.likersCount=this.activity.likesCount&&Number(this.activity.likesCount)},checkCommentsSize(){this.commentsCount=this.activity.commentsSize}}},G,[],!1,null,null,null).exports;var q=function(){var t=this,e=t._self._c;return e("div",{staticClass:"activity-share-information d-flex flex-column align-start"},[e("div",{staticClass:"activity-share-stream d-flex align-center flex-row flex text-truncate"},[e("exo-user-avatar",{staticClass:"activity-share-user",attrs:{identity:t.sharedPoster,size:25,popover:"","bold-title":"","link-style":""}}),t._v(" "),t._m(0),t._v(" "),e("exo-space-avatar",{staticClass:"activity-share-space d-inline-block my-auto",attrs:{space:t.space,size:24,"avatar-class":"border-color",popover:"","bold-title":"","link-style":""}})],1),t._v(" "),e("div",{staticClass:"activity-share-message"},[e("extension-registry-components",{staticClass:"d-flex flex-column mt-1",attrs:{params:t.extendedComponentParams,name:"ActivityContent",type:"activity-content-extensions","parent-element":"div",element:"div"}})],1)])};q._withStripped=!0;const J=a({props:{activity:{type:Object,default:null},activityTypes:{type:Object,default:null}},computed:{extendedComponentParams(){return{activity:this.activity,activityTypeExtension:this.activityTypes.default}},sharedPoster(){return this.activity&&this.activity.identity&&this.activity.identity.profile},space(){return this.activity&&this.activity.activityStream&&this.activity.activityStream.space}}},q,[function(){var t=this._self._c;return t("div",{staticClass:"createIn me-2 my-auto"},[t("span",{staticClass:"uiIconArrowRightMini uiIconLightGray"})])}],!1,null,null,null).exports;var Q=function(){var t=this;return(0,t._self._c)("extension-registry-components",{staticClass:"d-flex flex-no-wrap ms-lg-auto py-2 activity-footer-actions",class:t.actionBarBorderClass,attrs:{params:t.params,name:"ActivityFooter",type:"activity-footer-action","parent-element":"div",element:"div","element-class":"mx-auto ma-lg-0 activity-footer-action"}})};Q._withStripped=!0;const Z=a({props:{activity:{type:Object,default:null},activityTypeExtension:{type:Object,default:null}},computed:{params(){return{activity:this.activity,activityTypeExtension:this.activityTypeExtension}},actionBarBorderClass(){return this.isDesktop?"":"border-top-color border-light-color"},isDesktop(){return this.$vuetify&&this.$vuetify.breakpoint&&"xs"!==this.$vuetify.breakpoint.name&&"sm"!==this.$vuetify.breakpoint.name&&"md"!==this.$vuetify.breakpoint.name}}},Q,[],!1,null,null,null).exports;var tt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-inline-flex ms-lg-4"},[e("v-tooltip",{attrs:{disabled:t.isMobile,bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:s}){return[e("v-btn",t._g(t._b({staticClass:"pa-0 mt-0",class:t.commentTextColorClass,attrs:{id:`CommentLink${t.activityId}`,text:"",link:"",small:""},on:{click:t.openCommentsDrawer}},"v-btn",s,!1),i),[e("div",{staticClass:"d-flex flex-lg-row flex-column"},[e("v-icon",{staticClass:"baseline-vertical-align mx-auto",class:t.commentColorClass,attrs:{size:"14"}},[t._v("\n            fa-comment\n          ")]),t._v(" "),e("span",{staticClass:"mx-auto mt-1 mt-lg-0 ms-lg-2"},[t._v("\n            "+t._s(t.$t("UIActivity.label.Comment"))+"\n          ")])],1)])]}}])},[t._v(" "),e("span",[t._v("\n      "+t._s(t.$t("UIActivity.label.Comment"))+"\n    ")])])],1)};tt._withStripped=!0;const et=a({props:{activity:{type:Object,default:null}},data:()=>({hasCommented:!1}),computed:{activityId(){return this.activity&&this.activity.id},commentColorClass(){return this.hasCommented?"primary--text":"disabled--text"},commentTextColorClass(){return this.hasCommented?"primary--text":""},isMobile(){return"sm"===this.$vuetify.breakpoint.name||"xs"===this.$vuetify.breakpoint.name}},watch:{activity(){this.checkWhetherCommented()}},created(){this.$root.$on("activity-comment-created",this.handleCommentCreated),this.$root.$on("activity-comment-deleted",this.handleCommentDeleted),this.checkWhetherCommented()},beforeDestroy(){this.$root.$off("activity-comment-created",this.handleCommentCreated),this.$root.$off("activity-comment-deleted",this.handleCommentDeleted)},methods:{handleCommentCreated(t){t.activityId===this.activityId&&(this.hasCommented=!0)},handleCommentDeleted(t){t.activityId===this.activityId&&this.checkWhetherCommented()},checkWhetherCommented(){this.hasCommented=this.activity&&"true"===this.activity.hasCommented},openCommentsDrawer(){document.dispatchEvent(new CustomEvent("activity-comments-display",{detail:{activity:this.activity,newComment:!0}}))}}},tt,[],!1,null,null,null).exports;var it=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-inline-flex ms-lg-4"},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:s}){return[e("v-btn",t._g(t._b({staticClass:"pa-0 mt-0",class:t.likeTextColorClass,attrs:{id:`LikeLink${t.activityId}`,loading:t.changingLike,text:"",link:"",small:""},on:{click:t.changeLike}},"v-btn",s,!1),i),[e("div",{staticClass:"d-flex flex-lg-row flex-column"},[e("v-icon",{staticClass:"baseline-vertical-align",class:t.likeColorClass,attrs:{size:"14"}},[t._v("\n            fa-thumbs-up\n          ")]),t._v(" "),e("span",{staticClass:"mx-auto mt-1 mt-lg-0 ms-lg-2"},[t._v("\n            "+t._s(t.$t("UIActivity.msg.LikeActivity"))+"\n          ")])],1)])]}}])},[t._v(" "),e("span",[t._v("\n      "+t._s(t.likeButtonTitle)+"\n    ")])])],1)};it._withStripped=!0;const st=a({props:{activity:{type:Object,default:null}},data:()=>({changingLike:!1,hasLiked:!1}),computed:{activityId(){return this.activity&&this.activity.id},likeColorClass(){return this.hasLiked?"primary--text":"disabled--text"},likeTextColorClass(){return this.hasLiked?"primary--text":""},likeButtonTitle(){return this.hasLiked&&this.$t("UIActivity.msg.UnlikeActivity")||this.$t("UIActivity.msg.LikeActivity")}},created(){this.computeLikes()},methods:{changeLike(){if(!this.changingLike)return this.hasLiked?this.unlikeActivity():this.likeActivity()},likeActivity(){return this.changingLike=!0,this.$activityService.likeActivity(this.activityId).then((t=>{this.activity.hasLiked="true",this.computeLikes(t),document.dispatchEvent(new CustomEvent("activity-liked",{detail:this.activityId}))})).finally((()=>this.changingLike=!1))},unlikeActivity(){return this.changingLike=!0,this.$activityService.unlikeActivity(this.activityId).then((t=>{this.activity.hasLiked="false",this.computeLikes(t),document.dispatchEvent(new CustomEvent("activity-liked",{detail:this.activityId}))})).finally((()=>this.changingLike=!1))},computeLikes(t){t&&(this.$set(this.activity,"likes",t&&t.likes||[]),this.$set(this.activity,"likesCount",t&&t.size||0)),this.hasLiked=this.activity&&"true"===this.activity.hasLiked}}},it,[],!1,null,null,null).exports;var at=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-inline-flex ms-lg-4"},[e("v-tooltip",{attrs:{disabled:t.isMobile,bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:s}){return[t.isShareable?e("v-btn",t._g(t._b({staticClass:"pa-0 mt-0",class:t.shareTextColorClass,attrs:{id:`ShareActivity${t.activityId}`,text:"",link:"",small:""},on:{click:function(e){return t.openShareDrawer()}}},"v-btn",s,!1),i),[e("div",{staticClass:"d-flex flex-lg-row flex-column"},[e("v-icon",{staticClass:"me-lg-1 baseline-vertical-align",class:t.shareIconColorClass,attrs:{size:"14"}},[t._v("\n            fa-share\n          ")]),t._v(" "),e("span",{staticClass:"mx-auto mt-1 mt-lg-0 ms-lg-2"},[t._v("\n            "+t._s(t.$t("UIActivity.share"))+"\n          ")])],1)]):t._e()]}}])},[t._v(" "),e("span",[t._v("\n      "+t._s(t.$t("UIActivity.share"))+"\n    ")])])],1)};at._withStripped=!0;const nt=a({props:{activity:{type:Object,default:null},activityTypeExtension:{type:Object,default:null}},data:()=>({hasShared:!1}),computed:{isShareable(){return this.activity&&this.activityTypeExtension&&this.activityTypeExtension.canShare&&this.activityTypeExtension.canShare(this.activity)},activityId(){return this.activity&&this.activity.id},activityType(){return this.activity&&this.activity.type},shareTextColorClass(){return this.hasShared?"primary--text":""},shareIconColorClass(){return this.hasShared?"primary--text":"disabled--text"},isMobile(){return"sm"===this.$vuetify.breakpoint.name||"xs"===this.$vuetify.breakpoint.name}},created(){this.$root.$on("activity-shared",this.setHasShared)},mounted(){this.hasShared=this.activity&&this.activity.shareActions&&this.activity.shareActions.find((t=>`${t.userIdentityId}`===eXo.env.portal.userIdentityId))},beforeDestroy(){this.$root.$off("activity-shared",this.setHasShared)},methods:{setHasShared(t){this.activity&&this.activity.id===t&&(this.hasShared=!0)},checkHasShared(){this.hasShared||(this.hasShared=this.activity&&this.activity.shareActions&&this.activity.shareActions.find((t=>`${t.userIdentityId}`===eXo.env.portal.userIdentityId)))},openShareDrawer(){this.$root.$emit("activity-share-drawer-open",this.activityId,"activityStream")}}},at,[],!1,null,null,null).exports;var ot=function(){var t=this,e=t._self._c;return t.isActivityShared?t._e():e("favorite-button",{attrs:{id:t.metadataObjectId,type:t.metadataObjectType,"space-id":t.spaceId,favorite:t.isFavorite,absolute:t.absolute,top:t.top,right:t.right,"template-params":t.templateParams,"type-label":t.extensionName},on:{removed:t.removed,"remove-error":t.removeError,added:t.added,"add-error":t.addError}})};ot._withStripped=!0;const ct=a({props:{activity:{type:Object,default:null},activityTypeExtension:{type:String,default:null},isActivityShared:{type:Boolean,default:!1},absolute:{type:Boolean,default:!1},top:{type:Number,default:()=>0},right:{type:Number,default:()=>0}},data:()=>({isFavorite:!1}),computed:{activityId(){return this.activity&&this.activity.id},spaceId(){return this.activity&&this.activity.activityStream&&this.activity.activityStream.space&&this.activity.activityStream.space.id},templateParams(){return this.activity&&this.activity.templateParams},extensionName(){return this.activityTypeExtension&&this.activityTypeExtension.name},metadataObjectId(){return this.activity?.templateParams?.metadataObjectId||this.activityId},metadataObjectType(){return this.activity?.templateParams?.metadataObjectType||"activity"}},created(){this.isFavorite=this.activity&&this.activity.metadatas&&this.activity.metadatas.favorites&&this.activity.metadatas.favorites.length},methods:{removed(){this.displayAlert(this.$t("Favorite.tooltip.SuccessfullyDeletedFavorite",{0:this.$t("activity.label")})),this.$emit("removed"),document.dispatchEvent(new CustomEvent("activity-favorite-removed",{detail:this.activity}))},removeError(){this.displayAlert(this.$t("Favorite.tooltip.ErrorDeletingFavorite",{0:this.$t("activity.label")}),"error")},added(){this.displayAlert(this.$t("Favorite.tooltip.SuccessfullyAddedAsFavorite",{0:this.$t("activity.label")})),this.$emit("added")},addError(){this.displayAlert(this.$t("Favorite.tooltip.ErrorAddingAsFavorite",{0:this.$t("activity.label")}),"error")},displayAlert(t,e){document.dispatchEvent(new CustomEvent("notification-alert",{detail:{message:t,type:e||"success"}}))}}},ot,[],!1,null,null,null).exports;var rt=function(){var t=this,e=t._self._c;return e("div",[t.loading?e("v-progress-linear",{attrs:{color:"primary",height:"2",indeterminate:""}}):t._e(),t._v(" "),e("activity-comments",{class:t.parentCommentClass,attrs:{activity:t.activity,comments:t.comments,"comment-types":t.commentTypes,"comment-actions":t.commentActions},on:{"comment-created":t.retrieveLastComment,"comment-deleted":t.retrieveLastComment,"comment-updated":t.retrieveLastComment}}),t._v(" "),t.commentsSize>2?e("v-btn",{staticClass:"primary--text font-weight-bold mb-1 subtitle-2 px-0",attrs:{disabled:t.loading,small:"",link:"",text:""},on:{click:t.openCommentsDrawer}},[t._v("\n    "+t._s(t.$t("UIActivity.label.Show_All_Comments",{0:t.commentsSize}))+"\n  ")]):t._e()],1)};rt._withStripped=!0;const lt=a({props:{activity:{type:Object,default:null},commentTypes:{type:Object,default:null},commentActions:{type:Object,default:null}},data:()=>({comments:[],commentsSize:0,limit:2,loading:!0}),computed:{parentCommentClass(){return this.commentsSize?"pb-0 pt-5":"pa-0"}},created(){this.activity&&this.activity.comments&&"object"==typeof this.activity.comments?(this.comments=[],this.commentsSize=0,this.loading=!0,this.$nextTick().then((()=>{this.comments=this.$activityService.computeParentCommentsList(this.activity.comments)||[],this.activity.commentsSize=this.commentsSize=this.activity.commentsCount&&Number(this.activity.commentsCount)||0,this.$root.$emit("activity-comments-retrieved",this.activity,this.comments),this.loading=!1}))):this.retrieveLastComment()},methods:{retrieveLastComment(){this.loading=!0,this.$activityService.getActivityComments(this.activity.id,!0,0,this.limit,this.$activityConstants.FULL_COMMENT_EXPAND).then((t=>{this.comments=[],this.commentsSize=0,this.$nextTick().then((()=>{this.comments=t&&t.comments||[],this.activity.commentsSize=this.commentsSize=t&&t.size&&Number(t.size)||0,this.$root.$emit("activity-comments-retrieved",this.activity,this.comments)}))})).finally((()=>this.loading=!1))},openCommentsDrawer(){document.dispatchEvent(new CustomEvent("activity-comments-display",{detail:{activity:this.activity}}))}}},rt,[],!1,null,null,null).exports;var mt=function(){var t=this,e=t._self._c;return e("exo-drawer",{ref:"activityCommentsDrawer",attrs:{temporary:t.temporaryDrawer,id:"activityCommentsDrawer","allow-expand":"",right:"","disable-pull-to-refresh":""},on:{closed:t.reset}},[e("template",{slot:"title"},[e("span",{staticClass:"text-capitalize-first-letter"},[t._v("\n      "+t._s(t.commentsTitle)+"\n    ")])]),t._v(" "),e("template",{slot:"titleIcons"},[e("v-btn",{staticClass:"my-auto",attrs:{elevation:"0",icon:"",plain:""},on:{click:function(e){return t.displayCommentRichEditor()}}},[e("v-icon",{attrs:{color:"primary"}},[t._v("mdi-chat-plus")])],1)],1),t._v(" "),e("template",{slot:"content"},[e("activity-comments",{ref:"activityComments",staticClass:"pb-0 pt-5 px-4",attrs:{activity:t.activity,comments:t.comments,"comment-types":t.commentTypes,"comment-actions":t.commentActions,"comment-editing":t.commentToEdit,"new-comment-editor":t.newCommentEditor,"selected-comment-id-to-reply":t.selectedCommentIdToReply,initialized:t.initialized,"allow-edit":""},on:{"comment-created":t.addComment,"comment-deleted":t.deleteComment,"comment-updated":t.updateComment,initialized:t.scrollToEnd}})],1),t._v(" "),t.pagesCount>1&&t.initialized?e("template",{slot:"footer"},[e("div",{staticClass:"text-center"},[e("v-pagination",{attrs:{length:t.pagesCount,circle:"",light:"",flat:""},on:{input:t.changePage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)]):t._e()],2)};mt._withStripped=!0;const dt=a({props:{commentTypes:{type:Object,default:null},commentActions:{type:Object,default:null}},data:()=>({comments:[],commentsSize:0,activity:null,initialized:!1,drawerOpened:!1,temporaryDrawer:!0,newCommentEditor:!1,selectedCommentIdToReply:null,highlightCommentId:null,highlightRepliesCommentId:null,scrollOnOpen:!0,commentToEdit:null,offset:0,limit:10,pageSize:10,page:1,pagesCount:1}),computed:{commentsTitle(){return this.initialized?0===this.commentsSize?this.$t("activity.noComments"):1===this.commentsSize?this.$t("activity.singleComment"):this.$t("activity.commentsCount",{0:this.commentsSize}):""}},created(){document.addEventListener("activity-comments-display",this.displayActivityComments),document.addEventListener("activity-comment-edit",this.editActivityComments),document.addEventListener("search-metadata-tag",this.closeDrawer),this.$root.$on("activity-comment-created",this.hideCommentRichEditor),this.$root.$on("activity-comment-updated",this.hideCommentRichEditor),this.$root.$on("activity-comment-edit-cancel",this.hideCommentRichEditor),this.$root.$on("activity-stream-confirm-opened",(()=>this.temporaryDrawer=!1)),this.$root.$on("activity-stream-confirm-closed",(()=>this.temporaryDrawer=!0))},methods:{reset(){this.comments=[],this.commentsSize=0,this.drawerOpened=!1,this.page=1,this.offset=0,this.initialized=!1,this.limit=this.pageSize,this.hideCommentRichEditor(),this.$root.selectedCommentId=null},closeDrawer(){this.reset(),this.$refs.activityCommentsDrawer.close()},addComment(t){this.$root.selectedCommentId=t.id,this.highlightCommentId=this.$root.selectedCommentId,this.retrieveComments(!t.parentCommentId)},deleteComment(){this.retrieveComments()},updateComment(t,e){this.comments.splice(e,1,t)},scrollToEnd(){this.initialized=!0,!this.scrollOnOpen||this.newCommentEditor&&this.selectedCommentIdToReply||this.highlightCommentId||this.highlightRepliesCommentId||(this.scrollOnOpen=!1,this.$root.commentsDrawerInitializing=!1,window.setTimeout((()=>{const t=document.querySelector("#activityCommentsDrawer .drawerContent");t.scrollTo({top:t.scrollHeight,behavior:"smooth",block:"start"})}),100))},editActivityComments(t){const e=t&&t.detail&&t.detail.comment,i=t&&t.detail&&t.detail.activity;if(e&&i){const s=t&&t.detail&&t.detail.activityBody;e.contentToEdit=s,this.displayActivityComments({options:{activity:i,editComment:e,offset:this.offset,limit:this.limit}})}},displayActivityComments(t){const e=t&&(t.detail||t.options);e&&e.activity&&e.activity.id&&(this.hideCommentRichEditor(),this.$nextTick().then((()=>{this.activity=e.activity,this.commentToEdit=e.editComment,this.newCommentEditor=!this.commentToEdit&&e.newComment,this.selectedCommentIdToReply=!this.commentToEdit&&e.commentId,this.highlightCommentId=e.highlightCommentId,e.selectedCommentId&&e.selectedActivityId&&(this.$root.selectedCommentId=e.selectedCommentId,this.$root.selectedActivityId=e.selectedActivityId),this.highlightRepliesCommentId=e.highlightRepliesCommentId,this.drawerOpened||(this.drawerOpened=!0,this.scrollOnOpen=!e.editComment&&!e.noAuitomaticScroll,this.retrieveComments(!0,!0),this.$nextTick().then((()=>{this.$refs.activityCommentsDrawer&&this.$refs.activityCommentsDrawer.open()})))})))},displayCommentRichEditor(t){this.hideCommentRichEditor(),this.$nextTick().then((()=>{this.selectedCommentIdToReply=t,this.newCommentEditor=!0}))},hideCommentRichEditor(){this.newCommentEditor=!1,this.selectedCommentIdToReply=null,this.commentToEdit=null},loadPreviousPage(){return this.page--,this.offset=(this.page-1)*this.pageSize,this.comments=[],this.$nextTick().then((()=>this.retrieveComments(!1,!0)))},changePage(){return this.hideCommentRichEditor(),this.$root.selectedCommentId=null,this.offset=(this.page-1)*this.pageSize,this.comments=[],this.$nextTick().then((()=>this.retrieveComments()))},retrieveComments(t,e){return t&&(this.offset=0),this.$refs.activityCommentsDrawer&&this.$refs.activityCommentsDrawer.startLoading(),this.$activityService.getActivityComments(this.activity.id,!!t,this.offset,this.limit,this.$activityConstants.FULL_COMMENT_EXPAND).then((i=>{let s,a,n=i&&i.comments||[];if(this.commentsSize=i&&i.size&&Number(i.size)||0,this.pagesCount=parseInt((this.commentsSize+this.limit-1)/this.limit),t&&(this.page=this.pagesCount,this.offset=(this.page-1)*this.pageSize,this.commentsSize>this.pageSize)){const t=this.pageSize-((this.commentsSize-1)%this.pageSize+1),e=n.length;n=n.slice(t,e)}if(this.$root.selectedCommentId&&this.$root.selectedActivityId===this.activity.id?(s=this.highlightComment(n,this.$root.selectedCommentId),a=this.$root.selectedCommentId):this.highlightCommentId?(s=this.highlightComment(n,this.highlightCommentId),a=this.highlightCommentId):this.highlightRepliesCommentId?(s=n.find((t=>t.id===this.highlightRepliesCommentId)),s&&(s.highlightReplies=!0,s.expandSubComments=!0),a=this.highlightRepliesCommentId):this.commentToEdit?(s=n.find((t=>t.id===this.commentToEdit.id)),a=this.commentToEdit.id):this.selectedCommentIdToReply?a=this.selectedCommentIdToReply:e=!1,e&&a&&!s&&this.page>1)return this.loadPreviousPage();this.comments=n})).finally((()=>{this.comments.length||(this.initialized=!0),this.$refs.activityCommentsDrawer&&this.$refs.activityCommentsDrawer.endLoading()}))},highlightComment(t,e){const i=t.find((t=>t.id===e));if(i)return i.highlight=!0,i;for(let i=0;i<t.length;i++){const s=t[i],a=s.subComments&&s.subComments.find((t=>t.id===e));if(a)return s.expandSubComments=!0,a.highlight=!0,a}}}},mt,[],!1,null,null,null).exports;var ht=function(){var t=this,e=t._self._c;return t.comments?e("v-list",{staticClass:"flex d-flex flex-column"},[t._l(t.comments,(function(i){return e("activity-comment",{key:i.id,attrs:{activity:t.activity,comment:i,"sub-comments":i.subComments,"new-reply-editor":t.newCommentEditor&&t.selectedCommentIdToReply===i.id,"editor-options":t.replyLastEditorOptions,"comment-types":t.commentTypes,"comment-actions":t.commentActions,"comment-editing":t.commentEditing},on:{"comment-initialized":t.handleCommentInitialized}})})),t._v(" "),t.allowEdit&&t.newCommentEditor&&!t.selectedCommentIdToReply&&t.initialized?e("activity-comment-rich-text",{ref:"commentRichEditor",staticClass:"mb-6",attrs:{"activity-id":t.activityId,"space-id":t.spaceId,options:t.commentLastEditorOptions,label:t.$t("UIActivity.label.Comment")}}):t._e()],2):t._e()};ht._withStripped=!0;const yt=a({props:{activity:{type:Object,default:null},comments:{type:Array,default:null},commentTypes:{type:Object,default:null},commentActions:{type:Object,default:null},commentEditing:{type:Object,default:null},newCommentEditor:{type:Boolean,default:!1},selectedCommentIdToReply:{type:String,default:null},allowEdit:{type:Boolean,default:!1},initialized:{type:Boolean,default:!1}},data:()=>({lastEditorOptions:null,initializedComment:0}),computed:{activityId(){return this.activity&&this.activity.id},spaceId(){return this.activity&&this.activity.activityStream&&this.activity.activityStream.space&&this.activity.activityStream.space.id},replyLastEditorOptions(){return this.lastEditorOptions&&this.lastEditorOptions.parentCommentId&&this.lastEditorOptions},commentLastEditorOptions(){return this.lastEditorOptions&&!this.lastEditorOptions.parentCommentId&&this.lastEditorOptions},commentsSize(){return this.comments.length}},watch:{comments(){this.commentsSize||(this.initializedComment=0)},initializedComment(t,e){e<this.commentsSize&&t>=this.commentsSize&&this.$emit("initialized")}},created(){this.allowEdit&&this.$root.$on("activity-comment-editor-updated",this.updateEditorOptions),this.$root.$on("activity-comment-created",this.addComment),this.$root.$on("activity-comment-updated",this.updateComment),this.$root.$on("activity-comment-deleted",this.deleteComment),document.addEventListener("activity-comment-created",this.handleCommentCreated),document.addEventListener("activity-comment-updated",this.handleCommentUpdated),document.addEventListener("activity-comment-deleted",this.handleCommentDeleted)},beforeDestroy(){this.allowEdit&&this.$root.$off("activity-comment-editor-updated",this.updateEditorOptions),this.$root.$off("activity-comment-created",this.addComment),this.$root.$off("activity-comment-updated",this.updateComment),this.$root.$off("activity-comment-deleted",this.deleteComment),document.removeEventListener("activity-comment-created",this.handleCommentCreated),document.removeEventListener("activity-comment-updated",this.handleCommentUpdated),document.removeEventListener("activity-comment-deleted",this.handleCommentDeleted)},methods:{handleCommentInitialized(){this.initializedComment=this.initializedComment+1},handleCommentDeleted(t){this.$root.$emit("activity-comment-deleted",t&&t.detail)},deleteComment(t){if((t&&t.activityId)===this.activityId){const e=this.comments.findIndex((e=>e.id===t.id));if(e>=0){const t=this.comments[e];this.$emit("comment-deleted",t,e)}else this.comments.forEach(((e,i)=>{const s=e.subComments||[],a=s.findIndex((e=>e.id===t.id));a>=0&&(t.highlight=!0,t.updated=!0,s.splice(a,1),this.$emit("comment-updated",t,i,a))}))}},handleCommentCreated(t){const e=t&&t.detail;e&&e.id?e.activityId===this.activityId&&(e.templateParams?this.$root.$emit("activity-comment-created",e):this.$activityService.getActivityById(e.id,this.$activityConstants.FULL_COMMENT_EXPAND).then((t=>this.$root.$emit("activity-comment-created",t)))):console.error("no comment was sent in triggered event")},addComment(t){if((t&&t.activityId)===this.activityId)if(t.highlight=!0,t.added=!0,t.parentCommentId){const e=this.comments.findIndex((e=>e.id===t.parentCommentId));if(e>=0){const i=this.comments[e];i.subComments.find((e=>e.id===t.id))||(i.subComments.push(t),i.subCommentsSize++),this.$emit("comment-updated",i,e)}else this.$emit("comment-created",t)}else this.$emit("comment-created",t);this.resetEditorOptions()},handleCommentUpdated(t){const e=t&&t.detail;e&&e.id?e.activityId===this.activityId&&(e.templateParams?this.$root.$emit("activity-comment-updated",e):this.$activityService.getActivityById(e.id,this.$activityConstants.FULL_COMMENT_EXPAND).then((t=>this.$root.$emit("activity-comment-updated",t)))):console.error("no comment was sent in triggered event")},updateComment(t){if((t&&t.activityId)===this.activityId){const e=this.comments.findIndex((e=>e.id===t.id));e>=0?(t.highlight=!0,t.updated=!0,t.subComments=this.comments[e].subComments,this.$emit("comment-updated",t,e)):this.comments.forEach(((e,i)=>{const s=e.subComments||[],a=s.findIndex((e=>e.id===t.id));a>=0&&(t.highlight=!0,t.updated=!0,s.splice(a,1,t),this.$emit("comment-updated",e,i,a))}))}this.resetEditorOptions()},resetEditorOptions(){this.lastEditorOptions=!1,window.setTimeout((()=>{this.lastEditorOptions=null}),5e3)},updateEditorOptions(t){t&&!1!==this.lastEditorOptions&&t.activityId===this.activityId&&(this.lastEditorOptions=t)}}},ht,[],!1,null,null,null).exports;var vt=function(){var t=this,e=t._self._c;return t.commentTypeExtension?e("div",{staticClass:"d-inline-flex flex-column activity-comment border-box-sizing",attrs:{id:t.id}},[t.isEditingComment?e("div",{staticClass:"col-auto mb-4 py-0 flex-shrink-1"},[e("activity-comment-rich-text",{ref:"commentEditRichEditor",attrs:{"activity-id":t.activityId,"space-id":t.spaceId,"parent-comment-id":t.comment.parentCommentId,"comment-id":t.comment.id,"template-params":t.templateParams,label:t.$t("UIActivity.label.Update"),options:t.commentEditOptions}})],1):[e("v-list-item",{staticClass:"pa-0 mb-4 width-fit-content",class:t.highlightClass},[e("exo-user-avatar",{attrs:{identity:t.posterIdentity,size:33,"extra-class":"mt-0 mb-auto me-2 flex-grow-0",popover:"",avatar:""}}),t._v(" "),e("div",{staticClass:"flex-grow-1 flex-shrink-1 overflow-hidden"},[e("div",{staticClass:"px-2 py-1 flex-grow-1 activity-comment-background border-box-sizing rounded-lg"},[e("v-list-item-title",{staticClass:"pt-1 font-weight-bold subtitle-2 d-flex justify-space-between"},[e("exo-user-avatar",{attrs:{identity:t.posterIdentity,fullname:"",popover:"","bold-title":"","link-style":""}}),t._v(" "),e("activity-comment-menu",{attrs:{activity:t.activity,comment:t.comment,actions:t.commentActions,"comment-type-extension":t.commentTypeExtension}})],1),t._v(" "),e("activity-comment-body-text",{attrs:{activity:t.activity,comment:t.comment,"comment-type-extension":t.commentTypeExtension},on:{"comment-initialized":function(e){return t.$emit("comment-initialized")}}})],1),t._v(" "),e("extension-registry-components",{staticClass:"d-flex flex-column",attrs:{params:t.extendedComponentParams,name:"CommentContent",type:"comment-content-extensions","parent-element":"div",element:"div"}}),t._v(" "),e("div",{staticClass:"py-0 my-1 align-center d-flex flex-row border-box-sizing"},[e("activity-comment-actions",{staticClass:"d-flex flex-row py-0 mb-auto flex-shrink-1",attrs:{activity:t.activity,comment:t.comment,"comment-type-extension":t.commentTypeExtension}}),t._v(" "),e("activity-comment-time",{staticClass:"d-flex align-center ps-2 activity-comment-head-time",attrs:{activity:t.activity,comment:t.comment,"no-icon":""}})],1),t._v(" "),t.hasMoreRepliesToDisplay?e("div",{staticClass:"py-0 my-1 align-start d-flex flex-row border-box-sizing"},[e("v-btn",{staticClass:"primary--text font-weight-bold mb-1 subtitle-2 pa-0",attrs:{small:"",link:"",text:""},on:{click:t.openReplies}},[e("v-icon",{staticClass:"me-1 fa-flip-horizontal",attrs:{size:"12"}},[t._v("fa-reply")]),t._v("\n            "+t._s(t.$t("UIActivity.label.ViewAllReplies",{0:t.subCommentsSize}))+"\n          ")],1)],1):t._e()],1)],1)],t._v(" "),t.displayedSubCommentsSize?e("div",{staticClass:"flex d-flex flex-column",class:t.highlightRepliesClass},t._l(t.subCommentsToDisplay,(function(i){return e("activity-comment",{key:i.id,staticClass:"ps-10",attrs:{activity:t.activity,comment:i,"comment-types":t.commentTypes,"comment-actions":t.commentActions,"comment-editing":t.commentEditing},on:{"comment-initialized":function(e){return t.$emit("comment-initialized")}}})})),1):t._e(),t._v(" "),t.newReplyEditor?e("div",{staticClass:"ps-10 py-0 mb-2 align-start border-box-sizing"},[e("activity-comment-rich-text",{ref:"commentRichEditor",staticClass:"col-auto pa-0 mt-0 mb-2 flex-shrink-1",attrs:{"activity-id":t.activityId,"space-id":t.spaceId,"parent-comment-id":t.parentCommentId,label:t.$t("UIActivity.label.Comment"),options:t.editorOptions}})],1):t._e()],2):t._e()};vt._withStripped=!0;const pt=a({props:{activity:{type:Object,default:null},comment:{type:Object,default:null},subComments:{type:Array,default:null},commentTypes:{type:Object,default:null},commentActions:{type:Object,default:null},newReplyEditor:{type:Boolean,default:!1},commentEditing:{type:Boolean,default:!1},editorOptions:{type:Object,default:null}},data:()=>({displayedSubCommentCount:2}),computed:{activityId(){return this.activity&&this.activity.id||""},commentId(){return this.comment&&this.comment.id||""},parentCommentId(){return this.comment&&(this.comment.parentCommentId||this.comment.id)||""},id(){return`ActivityCommment_${this.comment.id}`},spaceId(){return this.activity&&this.activity.activityStream&&this.activity.activityStream.space&&this.activity.activityStream.space.id},ckEditorId(){return`reply_${this.comment.id}`},highlight(){return this.comment&&this.comment.highlight},highlightClass(){return this.highlight?"light-grey-background":""},highlightReplies(){return this.comment&&this.comment.highlightReplies},highlightRepliesClass(){return this.highlightReplies?"light-grey-background":""},posterIdentity(){return this.comment&&this.comment.identity&&this.comment.identity.profile&&this.comment.identity.profile.dataEntity},isEditingComment(){return this.commentEditing&&this.commentEditing.id===this.comment.id},commentTypeExtension(){return this.commentTypes&&(this.commentTypes[this.comment.type]||this.commentTypes.default)},commentEditOptions(){const t=this.isEditingComment?this.commentEditing:this.comment,e=t.contentToEdit||this.commentTypeExtension&&this.commentTypeExtension.getBodyToEdit&&this.commentTypeExtension.getBodyToEdit(t)||this.commentToEdit.title||this.commentToEdit.body;return{activityId:this.activityId,parentCommentId:this.comment.parentCommentId||null,commentId:this.commentId,message:e,files:this.comment.files}},subCommentsToDisplay(){return!this.comment.expandSubComments&&this.subComments&&this.subComments.length>this.displayedSubCommentCount?this.subComments&&this.subComments.slice(this.subComments.length-this.displayedSubCommentCount,this.subComments.length):this.subComments},displayedSubCommentsSize(){return this.subCommentsToDisplay&&this.subCommentsToDisplay.length||0},subCommentsSize(){return this.comment&&this.comment.subCommentsSize||0},hasMoreRepliesToDisplay(){return this.subCommentsSize>this.displayedSubCommentsSize},extendedComponentParams(){return{activity:this.comment,activityTypeExtension:this.commentTypeExtension}}},watch:{highlight:{immediate:!0,handler:function(t){t&&window.setTimeout((()=>{this.comment.highlight=!1,this.comment.highlightReplies=!1}),5e3)}},highlightReplies:{immediate:!0,handler:function(t){t&&window.setTimeout((()=>{this.comment.highlightReplies=!1,this.comment.highlight=!1}),5e3)}}},mounted(){this.highlight?this.$nextTick().then((()=>this.scrollToComment())):this.highlightReplies&&this.$nextTick().then(this.scrollToReplies)},methods:{openReplies(){this.$el.closest("#activityCommentsDrawer")?(this.comment.expandSubComments=!0,this.displayedSubCommentCount=this.subCommentsSize):document.dispatchEvent(new CustomEvent("activity-comments-display",{detail:{activity:this.activity,commentId:this.commentId,highlightRepliesCommentId:this.commentId}}))},scrollToReplies(){const t=document.querySelector(`#activityCommentsDrawer .drawerContent #${this.id} .activity-comment`);this.scrollTo(t)},scrollToComment(t){const e=document.querySelector(`#activityCommentsDrawer .drawerContent #${this.id}`);e?this.scrollTo(e):!t||t<5?window.setTimeout((()=>{this.scrollToComment(t&&t+1||1)}),200):console.warn(`Can't scroll to comment with id ${this.id} after ${t} tentatives`)},scrollTo(t){window.setTimeout((()=>{t&&t.scrollIntoView&&t.scrollIntoView({behavior:"smooth",block:"start"})}),50)}}},vt,[],!1,null,null,null).exports;var ut=function(){var t=this,e=t._self._c;return e("v-list-item-icon",{directives:[{name:"show",rawName:"v-show",value:t.enabledActions&&t.enabledActions.length,expression:"enabledActions && enabledActions.length"}],staticClass:"mx-0 mb-0 mt-n1"},[e("v-menu",{attrs:{"content-class":"white",left:!t.$vuetify.rtl,right:t.$vuetify.rtl,"nudge-left":!t.$vuetify.rtl&&"12","nudge-right":!t.$vuetify.rtl&&"12",bottom:"","offset-y":"",attach:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:s}){return[e("v-btn",t._g(t._b({attrs:{icon:"",small:""}},"v-btn",s,!1),i),[e("v-icon",{staticClass:"primary--text",attrs:{size:"18"}},[t._v("mdi-dots-vertical")])],1)]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),e("v-list",{staticClass:"pa-0",attrs:{dense:""}},t._l(t.enabledActions,(function(i){return e("v-list-item",{key:i.id,attrs:{dense:""},on:{click:function(e){return t.clickOnAction(i)}}},[e("v-icon",{staticClass:"dark-grey-color",attrs:{size:"13"}},[t._v(t._s(t.$t(i.icon)))]),t._v(" "),e("v-list-item-title",{staticClass:"pl-3"},[t._v(t._s(t.$t(i.labelKey)))])],1)})),1)],1)],1)};ut._withStripped=!0;const ft=a({props:{activity:{type:Object,default:null},comment:{type:Object,default:null},actions:{type:Object,default:null},commentTypeExtension:{type:String,default:null}},data:()=>({menu:!1}),computed:{enabledActions(){return this.actions&&Object.values(this.actions).filter((t=>t.isEnabled&&t.id&&t.click&&t.isEnabled(this.activity,this.comment,this.commentTypeExtension)))}},created(){$(document).mousedown((()=>{this.menu&&window.setTimeout((()=>{this.menu=!1}),200)}))},methods:{clickOnAction(t){t.confirmDialog?this.$root.$emit("activity-stream-display-confirm",{title:t.confirmTitleKey,message:t.confirmMessageKey,ok:t.confirmOkKey,cancel:t.confirmCancelKey,callback:()=>t.click(this.activity,this.comment,this.commentTypeExtension)}):t.click(this.activity,this.comment,this.commentTypeExtension)}}},ut,[],!1,null,null,null).exports;var gt=function(){var t=this,e=t._self._c;return t.initialized?e("div",{staticClass:"activity-detail overflow-hidden activity-comment-detail flex",attrs:{id:t.id,dir:"auto"}},[t.extendedComponent?[e("extension-registry-component",{attrs:{component:t.extendedComponentOptions,element:t.extendedComponent.element,"element-class":t.extendedComponent.class,params:t.extendedComponentParams}})]:[e("extension-registry-components",{staticClass:"d-flex flex-column",attrs:{params:t.extendedComponentParams,name:"ActivityContent",type:"activity-content-extensions","parent-element":"div",element:"div"}})]],2):t._e()};gt._withStripped=!0;const Ct=a({props:{activity:{type:Object,default:null},comment:{type:Object,default:null},commentTypeExtension:{type:String,default:null}},data:()=>({loading:!1,initialized:!1,initializedEmited:!1}),computed:{id(){return`activity-comment-detail-${this.commentId}`},commentId(){return this.comment&&this.comment.id},extendedComponent(){return this.commentTypeExtension&&this.commentTypeExtension.getExtendedComponent&&this.commentTypeExtension.getExtendedComponent(this.activity,this.isActivityDetail)},extendedComponentOptions(){return this.extendedComponent&&{componentName:`Activity-${this.commentTypeExtension.id}`,componentOptions:{vueComponent:this.extendedComponent.component}}},extendedComponentParams(){return{activity:this.comment,activityTypeExtension:this.commentTypeExtension}},init(){return this.commentTypeExtension&&this.commentTypeExtension.init},refresh(){return this.commentTypeExtension&&this.commentTypeExtension.refresh}},watch:{activity(){this.retrieveCommentProperties()},commentTypeExtension(){this.retrieveCommentProperties()},loading(){this.loading||this.$root.$emit("activity-comment-refreshed")},initialized(){this.initialized&&!this.initializedEmited&&(this.$emit("comment-initialized"),this.initializedEmited=!0)}},created(){this.retrieveCommentProperties(),this.$root.$on("activity-comment-updated",this.commentUpdated)},mounted(){this.initialized&&!this.initializedEmited&&(this.$emit("comment-initialized"),this.initializedEmited=!0)},methods:{commentUpdated(t){t.id===this.comment.id&&(this.comment.updated=!0,this.retrieveCommentProperties())},retrieveCommentProperties(){this.refresh&&(this.comment.updated||this.comment.added)&&this.refresh(this.comment,!1,this.activity),delete this.comment.updated,delete this.comment.added,this.loading=!0,this.$nextTick().then((()=>{if(this.init){const t=this.init(this.comment,!1,this.activity);if(t&&t.finally)return this.initialized=!1,t.finally((()=>{this.initialized=!0,this.loading=!1}))}this.loading=!1,this.initialized=!0}))}}},gt,[],!1,null,null,null).exports;var xt=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:t.ckEditorId}},[e("v-list-item",{staticClass:"pa-0"},[e("v-list-item-avatar",{staticClass:"mt-0 mb-auto me-2",attrs:{size:t.avatarSize}},[e("img",{staticClass:"object-fit-cover my-auto",attrs:{src:t.avatarUrl,loading:"lazy",role:"presentation"}})]),t._v(" "),e("v-list-item-content",{staticClass:"flex px-0 py-0 mb-2 flex-shrink-1 border-box-sizing rich-editor-content"},[e("exo-activity-rich-editor",{ref:"commentEditor",attrs:{"ck-editor-type":t.ckEditorId,"max-length":t.$activityConstants.COMMENT_MAX_LENGTH,placeholder:t.$t("activity.composer.placeholder"),"activity-id":t.activityId,"template-params":t.templateParams,"context-name":"activityComment","suggestor-type-of-relation":"mention_comment","use-extra-plugins":"",autofocus:""},on:{ready:t.handleEditorReady},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),t._v(" "),e("extension-registry-components",{attrs:{params:t.extensionParams,name:"ActivityComposerAction",type:"activity-composer-action"}})],1)],1),t._v(" "),e("v-btn",{staticClass:"btn btn-primary ms-10",attrs:{loading:t.commenting,disabled:t.disableButton,"aria-label":t.label,color:"primary"},on:{click:t.postComment}},[t._v("\n    "+t._s(t.label)+"\n  ")]),t._v(" "),t.commentUpdate?e("v-btn",{staticClass:"btn ms-2",attrs:{disabled:t.commenting},on:{click:function(e){return t.$root.$emit("activity-comment-edit-cancel")}}},[t._v("\n    "+t._s(t.$t("UIActivity.label.Cancel"))+"\n  ")]):t._e()],1)};xt._withStripped=!0;const bt=a({props:{activityId:{type:String,default:null},parentCommentId:{type:String,default:null},commentId:{type:String,default:null},spaceId:{type:String,default:null},templateParams:{type:Object,default:()=>({})},label:{type:String,default:null},options:{type:Object,default:null}},data:()=>({initialized:!1,commenting:!1,message:null,avatarSize:"33px",files:[]}),created(){document.addEventListener("activity-composer-edited",(t=>this.files=t.detail))},computed:{avatarUrl(){return this.$currentUserIdentity&&this.$currentUserIdentity.profile&&this.$currentUserIdentity.profile.avatar},textLength(){const t=this.$utils.htmlToText(this.message);return t&&t.length||0},commentUpdate(){return!!this.commentId},disableButton(){return this.commenting||!this.message||!this.message.trim()||"<p></p>"===this.message.trim()||"<div></div>"===this.message.trim()||this.textLength>this.$activityConstants.COMMENT_MAX_LENGTH},ckEditorId(){return`comment_${this.commentId||""}_${this.parentCommentId||""}_${this.activityId}`},entityId(){return this.commentId&&this.commentId.replace("comment","")},extensionParams(){return{activityId:this.entityId,spaceId:this.spaceId,parentCommentId:this.parentCommentId,files:this.files,templateParams:this.templateParams,message:this.message,maxMessageLength:this.$activityConstants.COMMENT_MAX_LENGTH}}},mounted(){this.init()},beforeDestroy(){this.reset()},methods:{reset(){this.initialized&&(this.initialized=!1,this.message&&this.$root.$emit("activity-comment-editor-updated",{activityId:this.activityId,commentId:this.commentId,parentCommentId:this.parentCommentId,message:this.message&&String(this.message),templateParams:this.templateParams}),this.commenting=!1,this.message=null,this.$refs.commentEditor&&this.$refs.commentEditor.destroyCKEditor())},init(){!this.options||this.options.activityId!==this.activityId||(this.parentCommentId||!this.parentCommentId!=!this.options.parentCommentId)&&this.options.parentCommentId!==this.parentCommentId||(this.commentId||!this.commentId!=!this.options.commentId)&&this.options.commentId!==this.commentId?this.message=null:(this.message=this.options.message||null,this.files=this.options.files||null),this.$refs.commentEditor&&(this.$refs.commentEditor.initCKEditor(),this.initialized=!0,this.scrollToCommentEditor())},handleEditorReady(){this.commentUpdate&&this.scrollToCommentEditor()},scrollToCommentEditor(){window.setTimeout((()=>{const t=document.querySelector(`#activityCommentsDrawer .drawerContent #${this.ckEditorId}`);t&&t.scrollIntoView&&t.scrollIntoView({behavior:"smooth",block:"start"})}),50)},postComment(){this.commenting||(this.commenting=!0,this.commentUpdate?this.$activityService.updateComment(this.activityId,this.parentCommentId,this.commentId,this.message,this.files,this.templateParams,this.$activityConstants.FULL_COMMENT_EXPAND).then((t=>this.$root.$emit("activity-comment-updated",t))).finally((()=>{this.message=null,this.commenting=!1})):this.$activityService.createComment(this.activityId,this.parentCommentId,this.message,this.files,this.templateParams,this.$activityConstants.FULL_COMMENT_EXPAND).then((t=>this.$root.$emit("activity-comment-created",t))).finally((()=>{this.message=null,this.commenting=!1})))}}},xt,[],!1,null,null,null).exports;var _t=function(){var t=this,e=t._self._c;return e("div",{staticClass:"caption text-light-color text-truncate"},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:s}){return[e("v-btn",t._g(t._b({staticClass:"d-flex hover-underline width-auto text-capitalize-first-letter d-inline px-0",attrs:{height:20,href:t.commentLink,"x-small":"",link:"",text:"",plain:""},on:{click:t.openCommentsDrawer}},"v-btn",s,!1),i),[t.isActivityEdited?e("relative-date-format",{staticClass:"text-capitalize-first-letter text-light-color text-truncate ps-1",attrs:{value:t.comment.updateDate,label:"TimeConvert.label.Short.Edited",short:""}}):e("relative-date-format",{staticClass:"text-capitalize-first-letter text-light-color text-truncate ps-1",attrs:{value:t.comment.createDate,short:""}})],1)]}}])},[t._v(" "),e("date-format",{attrs:{value:t.activityPostedTime,format:t.dateFormat}})],1)],1)};_t._withStripped=!0;const $t=a({props:{comment:{type:Object,default:null},activity:{type:Object,default:null},noIcon:{type:Boolean,default:!1}},data:()=>({dateFormat:{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}}),computed:{isActivityEdited(){return this.comment&&this.comment.updateDate!==this.comment.createDate},commentId(){return this.comment&&this.comment.id},activityPostedTime(){return this.comment&&(this.comment.updateDate||this.comment.createDate)},commentLink(){return`${this.$root.activityBaseLink}?id=${this.commentId}`}},methods:{openCommentsDrawer(t){t&&(t.preventDefault(),t.stopPropagation()),document.dispatchEvent(new CustomEvent("activity-comments-display",{detail:{activity:this.activity,selectedCommentId:this.commentId,selectedActivityId:this.activity.id,offset:0,limit:200}}))}}},_t,[],!1,null,null,null).exports;var Tt=function(){return(0,this._self._c)("extension-registry-components",{attrs:{name:"ActivityCommentFooter",type:"activity-comment-footer-action","element-class":"d-flex my-0 ms-0 me-2",params:this.params}})};Tt._withStripped=!0;const Et=a({props:{activity:{type:Object,default:null},comment:{type:Object,default:null},commentTypeExtension:{type:Object,default:null}},computed:{params(){return{activity:this.activity,comment:this.comment,commentTypeExtension:this.commentTypeExtension}}}},Tt,[],!1,null,null,null).exports;var It=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-inline-flex pe-1"},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:s}){return[e("v-btn",t._g(t._b({staticClass:"pa-0 me-0",class:t.commentTextColorClass,attrs:{id:`CommentLink${t.activityId}`,text:"",link:"","x-small":""},on:{click:t.openCommentsDrawer}},"v-btn",s,!1),i),[e("span",[t._v("\n          "+t._s(t.$t("UIActivity.label.Reply"))+"\n        ")])])]}}])},[t._v(" "),e("span",[t._v("\n      "+t._s(t.$t("UIActivity.label.Comment"))+"\n    ")])]),t._v(" "),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:s}){return[e("v-btn",t._g(t._b({directives:[{name:"show",rawName:"v-show",value:t.subCommentsSize,expression:"subCommentsSize"}],staticClass:"primary--text font-weight-bold",attrs:{id:`RepliesListLink${t.commentId}`,title:t.$t("UIActivity.label.ViewAllReplies",{0:t.subCommentsSize}),"x-small":"",icon:""},on:{click:t.openReplies}},"v-btn",s,!1),i),[t._v("\n        ("+t._s(t.subCommentsSize)+")\n      ")])]}}])},[t._v(" "),e("span",[t._v("\n      "+t._s(t.$t("UIActivity.label.ViewAllReplies",{0:t.subCommentsSize}))+"\n    ")])])],1)};It._withStripped=!0;const wt=a({props:{activity:{type:Object,default:null},comment:{type:Object,default:null}},data:()=>({hasCommented:!1}),computed:{activityId(){return this.comment&&this.comment.activityId},commentId(){return this.comment&&(this.comment.parentCommentId||this.comment.id)||""},commentTextColorClass(){return this.hasCommented?"primary--text":""},subCommentsSize(){return this.comment&&this.comment.subCommentsSize||0}},watch:{comment(){this.checkWhetherCommented()}},created(){this.$root.$on("activity-comment-created",this.handleCommentCreated),this.$root.$on("activity-comment-deleted",this.handleCommentDeleted),this.checkWhetherCommented()},beforeDestroy(){this.$root.$off("activity-comment-created",this.handleCommentCreated),this.$root.$off("activity-comment-deleted",this.handleCommentDeleted)},methods:{handleCommentCreated(t){t.activityId===this.activityId&&this.comment.id===t.parentCommentId&&(this.hasCommented=!0)},handleCommentDeleted(t){t.activityId===this.activityId&&this.comment.id===t.parentCommentId&&this.checkWhetherCommented()},checkWhetherCommented(){this.hasCommented=this.comment&&"true"===this.comment.hasCommented},openCommentsDrawer(){document.dispatchEvent(new CustomEvent("activity-comments-display",{detail:{activity:this.activity,commentId:this.commentId,newComment:!0}}))},openReplies(){document.dispatchEvent(new CustomEvent("activity-comments-display",{detail:{activity:this.activity,commentId:this.commentId,highlightRepliesCommentId:this.commentId}}))}}},It,[],!1,null,null,null).exports;var At=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-inline-flex pe-1"},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:s}){return[e("v-btn",t._g(t._b({staticClass:"px-0 width-auto",class:t.likeTextColorClass,attrs:{id:`LikeLink${t.commentId}`,loading:t.changingLike,text:"",link:"","x-small":""},on:{click:t.changeLike}},"v-btn",s,!1),i),[t._v("\n        "+t._s(t.$t("UIActivity.msg.LikeActivity"))+"\n      ")])]}}])},[t._v(" "),e("span",[t._v("\n      "+t._s(t.likeButtonTitle)+"\n    ")])]),t._v(" "),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:s}){return[e("v-btn",t._g(t._b({directives:[{name:"show",rawName:"v-show",value:t.likesCount,expression:"likesCount"}],staticClass:"primary--text font-weight-bold",attrs:{id:`LikersListLink${t.commentId}`,"x-small":"",icon:""},on:{click:t.openLikesList}},"v-btn",s,!1),i),[t._v("\n        ("+t._s(t.likesCount)+")\n      ")])]}}])},[t._v(" "),e("span",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.likersFullnameTitle,expression:"likersFullnameTitle"}]})])],1)};At._withStripped=!0;const kt=a({props:{activity:{type:Object,default:null},comment:{type:Object,default:null}},data:()=>({changingLike:!1}),computed:{commentId(){return this.comment&&this.comment.id},commentPoster(){return this.comment&&this.comment.poster},activityId(){return this.activity&&this.activity.id},likers(){return this.comment&&this.comment.likes&&this.comment.likes.slice().reverse()||[]},likesCount(){return this.likers.length},likersFullnameTitle(){const t=this.likers.map((t=>t&&t.fullname)).filter((t=>!!t));return this.likesCount>10?`${t.slice(0,9).join("<br />")}<br />${this.$t("UIActivity.msg.MoreLikers",{0:this.likesCount-9})}`:t.slice(0,10).join("<br />")},hasLiked(){return this.likers.filter((t=>t&&t.id===eXo.env.portal.userIdentityId)).length},likeColorClass(){return this.hasLiked?"primary--text":"disabled--text"},likeTextColorClass(){return this.hasLiked?"primary--text":""},likeButtonTitle(){return this.hasLiked&&this.$t("UIActivity.msg.UnlikeActivity")||this.$t("UIActivity.msg.LikeActivity")}},created(){this.$root.$on("activity-comment-liked",this.updateCommentLikers)},beforeDestroy(){this.$root.$off("activity-comment-liked",this.updateCommentLikers)},methods:{updateCommentLikers(t){t&&t.id===this.comment.id&&(this.comment.likes=t.likes||[])},changeLike(){if(!this.changingLike)return this.hasLiked?this.unlikeComment():this.likeComment()},likeComment(){return this.changingLike=!0,this.$activityService.likeActivity(this.commentId).then((()=>{const t=Object.assign({},this.$currentUserIdentity,this.$currentUserIdentity.profile);this.comment.likes=[...this.likers,t],this.comment.likesCount++,this.$root.$emit("activity-comment-liked",this.comment),document.dispatchEvent(new CustomEvent("activity-liked",{detail:this.commentId}))})).finally((()=>this.changingLike=!1))},unlikeComment(){return this.changingLike=!0,this.$activityService.unlikeActivity(this.commentId).then((()=>{this.comment.likes=this.likers.filter((t=>t.id!==eXo.env.portal.userIdentityId)),this.comment.likesCount--,this.$root.$emit("activity-comment-liked",this.comment),document.dispatchEvent(new CustomEvent("activity-liked",{detail:this.commentId}))})).finally((()=>this.changingLike=!1))},openLikesList(){document.dispatchEvent(new CustomEvent("open-reaction-drawer-selected-tab",{detail:{activityId:this.commentId,activityPosterId:this.commentPoster,tab:"like",activityType:"COMMENT"}}))}}},At,[],!1,null,null,null).exports;var St=function(){var t=this,e=t._self._c;return t.displayToolbar?e("v-toolbar",{staticClass:"activityComposer activityComposerApp pa-0",attrs:{id:"activityComposer",color:"white mb-5",height:"52",flat:"",dense:""}},[e("v-flex",{staticClass:"d-flex"},[t.userCanPost?e("div",{staticClass:"openLink my-auto ps-0 text-truncate"},[e("a",{staticClass:"primary--text",on:{click:function(e){return t.openComposerDrawer(!0)}}},[e("i",{staticClass:"uiIconEdit"}),t._v("\n        "+t._s(t.composerButtonLabel)+"\n      ")])]):e("div",[e("v-card-text",{staticClass:"text-sub-title text-uppercase center px-0"},[t._v("\n        "+t._s(t.$t("activity.toolbar.title"))+"\n      ")])],1),t._v(" "),t.streamFilterEnabled?e("div",{staticClass:"ms-auto my-auto"},[e("activity-stream-filter")],1):t._e()])],1):t._e()};St._withStripped=!0;const Lt=a({props:{activityBody:{type:String,default:""},activityId:{type:String,default:""},activityParams:{type:Object,default:null},standalone:{type:Boolean,default:!1},canPost:{type:Boolean,default:!1},canFilter:{type:Boolean,default:!1}},computed:{composerButtonLabel(){return eXo.env.portal.spaceDisplayName?this.$t("activity.composer.link",{0:eXo.env.portal.spaceDisplayName}):this.$t("activity.composer.post")},isMobile(){return"xs"===this.$vuetify.breakpoint.name||"sm"===this.$vuetify.breakpoint.name},userCanPost(){return!this.standalone&&this.canPost},streamFilterEnabled(){return this.canFilter},displayToolbar(){return this.userCanPost||this.streamFilterEnabled}},methods:{openComposerDrawer(){document.dispatchEvent(new CustomEvent("activity-composer-drawer-open",{detail:{activityId:this.activityId,activityBody:this.activityBody,activityParams:this.activityParams,files:[],activityType:[]}}))}}},St,[],!1,null,null,null).exports;var Pt=function(){var t=this,e=t._self._c;return e("exo-drawer",{ref:"activityComposerDrawer",attrs:{id:"activityComposerDrawer","disable-pull-to-refresh":"",right:"",fixed:""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n    "+t._s(t.$t("activity.composer.title"))+"\n  ")]},proxy:!0},{key:"content",fn:function(){return[e("v-card",{attrs:{flat:""}},[e("v-card-text",[t.drawer?e("exo-activity-rich-editor",{ref:t.CK_EDITOR_ID,attrs:{"max-length":t.MESSAGE_MAX_LENGTH,"template-params":t.templateParams,placeholder:t.composerPlaceholder,"ck-editor-type":"activityContent","context-name":"activityComposer","use-extra-plugins":"","use-draft-management":"",autofocus:""},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}):t._e()],1),t._v(" "),e("v-card-actions",{staticClass:"d-flex px-4"},[e("extension-registry-components",{attrs:{params:t.extensionParams,name:"ActivityComposerAction",type:"activity-composer-action"}})],1),t._v(" "),e("v-card-text",{staticClass:"composerActions"},[t.activityId?t._e():e("extension-registry-components",{attrs:{params:t.extensionParams,name:"ActivityComposerFooterAction",type:"activity-composer-footer-action"},scopedSlots:t._u([{key:"header",fn:function(){return[e("v-divider",{staticClass:"mb-6"})]},proxy:!0}],null,!1,1109578463)})],1)],1)]},proxy:!0}]),model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[t._v(" "),t._v(" "),e("template",{slot:"footer"},[e("div",{staticClass:"d-flex"},[e("v-spacer"),t._v(" "),e("v-btn",{staticClass:"primary btn no-box-shadow ms-auto",attrs:{id:"activityComposerPostButton",disabled:t.postDisabled,loading:t.loading,"aria-label":t.$t(`activity.composer.${t.composerAction}`),type:"button"},on:{click:function(e){return t.postMessage()}}},[t._v("\n        "+t._s(t.composerActionLabel)+"\n      ")])],1)])],2)};Pt._withStripped=!0;const Dt=a({data:()=>({MESSAGE_MAX_LENGTH:1300,MESSAGE_TIMEOUT:5e3,CK_EDITOR_ID:"activityContent",activityId:null,spaceId:null,message:"",files:null,templateParams:{},drawer:!1,activityBodyEdited:!1,originalBody:"",messageEdited:!1,activityType:null,loading:!1}),computed:{composerPlaceholder(){return this.$t("activity.composer.placeholder")},composerAction(){return this.activityId?"update":"post"},composerActionLabel(){return this.$t(`activity.composer.${this.composerAction}`)},composerButtonLabel(){return eXo.env.portal.spaceDisplayName?this.$t("activity.composer.link",{0:eXo.env.portal.spaceDisplayName}):this.$t("activity.composer.post")},extensionParams(){return{activityId:this.activityId,spaceId:this.spaceId,files:this.files,templateParams:this.templateParams,message:this.message,maxMessageLength:this.MESSAGE_MAX_LENGTH,activityType:this.activityType}},messageLength(){return this.message&&this.message.length&&this.$utils.htmlToText(this.message).length||0},ckEditorInstance(){return this.drawer&&this.$refs[this.CK_EDITOR_ID]||null},postDisabled(){return!this.messageLength&&!this.activityBodyEdited||this.messageLength>this.MESSAGE_MAX_LENGTH||this.loading||!!this.activityId&&!this.activityBodyEdited}},watch:{message(t,e){this.activityId&&!this.activityBodyEdited&&(this.activityBodyEdited=this.$utils.htmlToText(t)!==this.$utils.htmlToText(e),this.messageEdited=this.$utils.htmlToText(t)!==this.$utils.htmlToText(this.originalBody))}},created(){document.addEventListener("activity-composer-drawer-open",this.open),document.addEventListener("activity-composer-edited",this.isActivityBodyEdited),document.addEventListener("activity-composer-closed",this.close)},methods:{isActivityBodyEdited(t){this.activityBodyEdited=this.messageEdited&&this.messageLength||0!==t.detail||0===t.detail&&this.messageLength},open(t){(t=t&&t.detail)?(this.message=t.activityBody,this.originalBody=t.activityBody,this.activityId=t.activityId,this.spaceId=t.spaceId,this.templateParams=t.activityParams||t.templateParams||{},this.files=t.files||[],this.activityType=t.activityType):(this.activityId=null,this.spaceId=null,this.message="",this.templateParams={},this.files=[],this.activityType=[]),this.$nextTick().then((()=>{this.activityBodyEdited=!1,this.messageEdited=!1,this.$refs.activityComposerDrawer.open(),document.dispatchEvent(new CustomEvent("message-composer-opened"))}))},close(){this.ckEditorInstance&&this.ckEditorInstance.unload(),this.$nextTick().then((()=>{this.$refs.activityComposerDrawer.close(),this.$root.$emit("message-composer-closed")}))},postMessage(){const t=this.ckEditorInstance.getMessage();if(this.activityId){let e=this.activityType;this.templateParams&&this.templateParams.link&&!this.activityType?e="LINK_ACTIVITY":this.templateParams&&"-"===this.templateParams.link&&(e=null),this.loading=!0,this.$activityService.updateActivity(this.activityId,t,e,this.files,this.templateParams).then((()=>{document.dispatchEvent(new CustomEvent("activity-updated",{detail:this.activityId})),this.cleareActivityMessage(),this.close()})).catch((t=>{console.error(`Error when updating the activity: ${t}`)})).finally((()=>this.loading=!1))}else{let e=this.activityType;this.templateParams&&this.templateParams.link&&!this.activityType&&(e="LINK_ACTIVITY"),this.activityType&&0!==this.activityType.length?document.dispatchEvent(new CustomEvent("post-activity",{detail:t})):(this.loading=!0,this.$activityService.createActivity(t,e,this.files,eXo.env.portal.spaceId,this.templateParams).then((()=>{document.dispatchEvent(new CustomEvent("activity-created",{detail:this.activityId})),this.cleareActivityMessage(),this.close()})).catch((t=>{console.error(`Error when posting message: ${t}`)})).finally((()=>this.loading=!1)))}},cleareActivityMessage(){localStorage.getItem("activity-message-activityComposer")&&localStorage.removeItem("activity-message-activityComposer")}}},Pt,[],!1,null,null,null).exports;var zt=function(){var t=this,e=t._self._c;return e("v-col",{staticClass:"mx-3"},[e("v-row",[e("v-icon",{staticClass:"uiIcon fa mx-auto",class:t.iconRef&&t.iconRef||"",attrs:{size:t.iconSize,color:t.iconColor}})],1),t._v(" "),e("v-row",{staticClass:"text-center mt-1"},[e("v-card",{staticClass:"mx-auto",attrs:{flat:"","max-width":"150"}},[t._v("\n      "+t._s(t.infoMessage)+"\n    ")])],1)],1)};zt._withStripped=!0;const Ot={"activity-stream":n,"activity-stream-list":_,"activity-stream-toolbar":Lt,"activity-composer-drawer":Dt,"activity-notification-alerts":u,"activity-auto-link":v,"activity-stream-empty-message-space":c,"activity-stream-empty-message-space-icons-column":a({props:{iconRef:{type:String,default:"fa-exclamation-circle"},iconSize:{type:String,default:"50"},iconColor:{type:String,default:"primary"},infoMessage:{type:String,default:null}}},zt,[],!1,null,null,null).exports,"activity-stream-empty-message-user":l,"activity-stream-empty-message-filter":d,"activity-not-found":y,"activity-stream-updater":g,"activity-stream-confirm-dialog":x,"activity-stream-activity":E,"activity-stream-pinned-activity":w,"activity-stream-loader":k,"activity-stream-filter":L,"activity-head":D,"activity-mobile-head":O,"activity-head-time":M,"activity-head-menu":N,"activity-body":R,"activity-link":X,"activity-share":W,"activity-embedded-html":H,"activity-footer":Y,"activity-share-information":J,"activity-actions":Z,"activity-comment-action":et,"activity-like-action":st,"activity-share-action":nt,"activity-favorite-action":ct,"activity-comments-preview":lt,"activity-comments-drawer":dt,"activity-comments":yt,"activity-comment":pt,"activity-comment-body-text":Ct,"activity-comment-rich-text":bt,"activity-comment-time":$t,"activity-comment-actions":Et,"activity-comment-reply-action":wt,"activity-comment-like-action":kt,"activity-comment-menu":ft};for(const t in Ot)Vue.component(t,Ot[t]);function Bt(t,e){Vue.prototype.$socialWebSocket.initCometd("/SpaceWebNotification"),e||cCometd.subscribe("/eXo/Application/ActivityStream",null,(e=>{const i=e.data&&JSON.parse(e.data);i&&t(i)}))}function Mt(){return cCometd.isDisconnected()}i(5095);Vue.prototype.$activityStreamWebSocket||window.Object.defineProperty(Vue.prototype,"$activityStreamWebSocket",{value:t}),Vue.prototype.$activityConstants||window.Object.defineProperty(Vue.prototype,"$activityConstants",{value:{FULL_ACTIVITY_IDS_EXPAND:"ids,identity,likes,shared,commentsPreview,subComments,favorite",FULL_ACTIVITY_EXPAND:"identity,likes,shared,commentsPreview,subComments,favorite",ACTIVITY_EXPAND:"identity,likes,shared",FULL_COMMENT_EXPAND:"identity,likes,subComments",COMMENT_MAX_LENGTH:1300}}),document.dispatchEvent(new CustomEvent("displayTopBarLoading"));const Ut=`${eXo.env.portal.context}/${eXo.env.portal.portalName}/activity`;if(extensionRegistry){const t=extensionRegistry.loadComponents("ActivityStream");t&&t.length>0&&t.forEach((t=>{Vue.component(t.componentName,t.componentOptions)}))}window.disableSwipeOnPage=!0;const Nt="undefined"!=typeof eXo?eXo.env.portal.language:"en",jt="ActivityStream",Rt=[`${eXo.env.portal.context}/${eXo.env.portal.rest}/i18n/bundle/locale.portlet.Portlets-${Nt}.json`,`${eXo.env.portal.context}/${eXo.env.portal.rest}/i18n/bundle/locale.commons.Commons-${Nt}.json`,`${eXo.env.portal.context}/${eXo.env.portal.rest}/i18n/bundle/locale.social.Webui-${Nt}.json`];function Ft(t,e){exoi18n.loadLanguageAsync(Nt,Rt).then((i=>{Vue.createApp({data:{initialData:t,initialLimit:e,activityBaseLink:Ut},template:`<activity-stream id="${jt}" :initial-limit="initialLimit" :initial-data="initialData" />`,vuetify:Vue.prototype.vuetifyOptions,i18n:i},`#${jt}`,"Stream")}))}})(),s})()));