define((()=>(()=>{"use strict";var e={};(e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(e);var t=function(){var e=this,t=e._self._c;return t("v-app",{staticClass:"transparent",attrs:{flat:""}},[t("exo-spaces-toolbar",{attrs:{keyword:e.keyword,filter:e.filter,"spaces-size":e.spacesSize,"can-create-space":e.canCreateSpace},on:{"keyword-changed":function(t){e.keyword=t},"filter-changed":function(t){e.filter=t}}}),e._v(" "),t("exo-spaces-card-list",{ref:"spacesList",attrs:{keyword:e.keyword,filter:e.filter,"loading-spaces":e.loadingSpaces,"spaces-size":e.spacesSize},on:{"loading-spaces":function(t){e.loadingSpaces=t},loaded:e.spacesLoaded}}),e._v(" "),t("exo-space-managers-drawer"),e._v(" "),t("exo-space-form-drawer")],1)};function s(e,t,s,i,a,n,c,o){var r,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=s,l._compiled=!0),i&&(l.functional=!0),n&&(l._scopeId="data-v-"+n),c?(r=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(c)},l._ssrRegister=r):a&&(r=o?function(){a.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:a),r)if(l.functional){l._injectStyles=r;var p=l.render;l.render=function(e,t){return r.call(t),p(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,r):[r]}return{exports:e,options:l}}t._withStripped=!0;const i=s({props:{canCreateSpace:{type:Boolean,default:!1},filter:{type:String,default:null},appId:{type:String,default:null}},data:()=>({keyword:null,spacesSize:0,loadingSpaces:!1,initialized:!1}),methods:{spacesLoaded(e){this.spacesSize=e,this.initialized||(this.$root.$applicationLoaded(),this.initialized=!0)}}},t,[],!1,null,null,null).exports;var a=function(){var e=this,t=e._self._c;return t("v-card",{attrs:{flat:""}},[e.loadingSpaces?t("v-progress-linear",{attrs:{indeterminate:"",height:"2",color:"primary"}}):e._e(),e._v(" "),t("v-card-text",{staticClass:"pb-0",attrs:{id:"spacesListBody"}},[t("v-item-group",[t("v-container",{staticClass:"pa-0"},[e.filteredSpaces&&e.filteredSpaces.length?t("v-row",{staticClass:"ma-0 border-box-sizing"},e._l(e.filteredSpaces,(function(s){return t("v-col",{key:s.id,staticClass:"pa-0",attrs:{cols:"12",md:"6",lg:"4",xl:"3"}},[t("exo-space-card",{attrs:{space:s,"profile-action-extensions":e.profileActionExtensions},on:{refresh:e.searchSpaces}})],1)})),1):e.loadingSpaces?e._e():t("div",{staticClass:"d-flex text-center noSpacesYetBlock"},[t("div",{staticClass:"ma-auto noSpacesYet"},[t("p",{staticClass:"noSpacesYetIcons"},[t("v-icon",[e._v("fa-chevron-left")]),e._v(" "),t("v-icon",[e._v("fa-chevron-right")])],1),e._v(" "),e.hasSpaces?[t("p",{staticClass:"title font-weight-bold"},[e._v("\n                "+e._s(e.$t("spacesOverview.label.noResults"))+"\n              ")])]:[t("p",{staticClass:"title font-weight-bold"},[e._v("\n                "+e._s(e.$t("spacesList.label.noSpacesYet"))+"\n              ")]),e._v(" "),t("div",[e._v("\n                "+e._s(e.$t("spacesList.label.noSpacesYetDescription1"))+"\n              ")]),e._v(" "),t("span",[e._v("\n                "+e._s(e.$t("spacesList.label.noSpacesYetDescription2"))+"\n                "),t("v-btn",{staticClass:"primary--text px-0 addNewSpaceLink",attrs:{link:"",text:""},on:{click:function(t){return e.$root.$emit("addNewSpace")}}},[e._v("\n                  "+e._s(e.$t("spacesList.label.noSpacesLink"))+"\n                ")])],1)]],2)])],1)],1)],1),e._v(" "),t("v-card-actions",{staticClass:"pt-0 px-5 border-box-sizing",attrs:{id:"spacesListFooter"}},[e.canShowMore?t("v-btn",{staticClass:"loadMoreButton ma-auto btn",attrs:{loading:e.loadingSpaces,disabled:e.loadingSpaces,block:""},on:{click:e.loadNextPage}},[e._v("\n      "+e._s(e.$t("spacesList.button.showMore"))+"\n    ")]):e._e()],1)],1)};a._withStripped=!0;const n=s({props:{keyword:{type:String,default:null},filter:{type:String,default:null},spacesSize:{type:Number,default:0},loadingSpaces:{type:Boolean,default:!1}},data:()=>({profileActionExtensions:[],startSearchAfterInMilliseconds:600,endTypingKeywordTimeout:50,startTypingKeywordTimeout:0,hasSpaces:!1,offset:0,pageSize:20,limit:20,spaces:[],limitToFetch:0,originalLimitToFetch:0,typing:!1}),computed:{canShowMore(){return this.loadingSpaces||this.spaces.length>=this.limitToFetch},filteredSpaces(){return this.keyword&&this.loadingSpaces?this.spaces.slice().filter((e=>e.displayName&&e.displayName.toLowerCase().indexOf(this.keyword.toLowerCase())>=0||e.description&&e.description.toLowerCase().indexOf(this.keyword.toLowerCase())>=0)):this.spaces},selectedSpaceIndex(){return this.spaces.findIndex((e=>e.spaceUrl===eXo.env.server.portalBaseURL||0===eXo.env.server.portalBaseURL.indexOf(`${e.spaceUrl}/`)))}},watch:{keyword(){if(!this.keyword?.length)return this.resetSearch(),void this.searchSpaces();this.startTypingKeywordTimeout=Date.now(),this.typing||(this.typing=!0,this.waitForEndTyping())},spaces(){this.spaces.forEach((e=>{e.spaceUrl=`${eXo.env.portal.context}${e.url}`}))},limitToFetch(){this.searchSpaces()},filter(){this.searchSpaces()},typing(){this.typing&&this.$emit("loading-spaces",!0)}},created(){this.originalLimitToFetch=this.limitToFetch=this.limit,document.addEventListener("profile-extension-updated",this.refreshExtensions),this.refreshExtensions()},methods:{refreshExtensions(){this.profileActionExtensions=extensionRegistry.loadExtensions("profile-extension","action")||[]},searchSpaces(){this.$emit("loading-spaces",!0);const e="requests"===this.filter?"pending,favorite":"managers,favorite";return this.$spaceService.getSpaces(this.keyword,this.offset,this.limitToFetch,this.filter,e).then((e=>(this.spaces=e&&e.spaces||[],this.spacesSize=e&&e.size||0,this.hasSpaces=this.hasSpaces||this.spacesSize>0,this.$emit("loaded",this.spacesSize),this.$nextTick()))).then((()=>{this.keyword&&this.filteredSpaces.length<this.originalLimitToFetch&&this.spaces.length>=this.limitToFetch&&(this.limitToFetch+=this.pageSize)})).finally((()=>this.$emit("loading-spaces",!1)))},resetSearch(){this.limitToFetch!==this.originalLimitToFetch&&(this.limitToFetch=this.originalLimitToFetch)},loadNextPage(){this.originalLimitToFetch=this.limitToFetch+=this.pageSize},waitForEndTyping(){window.setTimeout((()=>{Date.now()-this.startTypingKeywordTimeout>this.startSearchAfterInMilliseconds?(this.typing=!1,this.searchSpaces()):this.waitForEndTyping()}),this.endTypingKeywordTimeout)}}},a,[],!1,null,null,null).exports;var c=function(){var e=this,t=e._self._c;return t("v-toolbar",{attrs:{id:"spacesListToolbar",flat:""}},[e.canCreateSpace?t("v-toolbar-title",[e.menuHeaderChanged?t("v-icon",{on:{click:e.changeHeaderMenu}},[e._v("\n      fas fa-arrow-left\n    ")]):t("v-btn",{staticClass:"btn btn-primary px-2 mx-2 mx-sm-0 addNewSpaceButton",attrs:{id:"addNewSpaceButton",small:e.isMobile,large:!e.isMobile},on:{click:function(t){return e.$root.$emit("addNewSpace")}}},[t("v-icon",{attrs:{dark:""}},[e._v("mdi-plus")]),e._v(" "),t("span",{staticClass:"d-none d-sm-inline"},[e._v("\n        "+e._s(e.$t("spacesList.label.addNewSpace"))+"\n      ")])],1)],1):e._e(),e._v(" "),t("div",{staticClass:"text-sub-title ms-3 d-none d-sm-flex"},[e._v("\n    "+e._s(e.$t("spacesList.label.spacesSize",{0:e.spacesSize}))+"\n  ")]),e._v(" "),e.isMobile?e._e():t("v-spacer"),e._v(" "),t("div",[e.isMobile?e.isMobile&&e.menuHeaderChanged?t("v-text-field",{staticClass:"inputSpacesFilter pa-0 ms-3 my-auto",attrs:{placeholder:e.$t("spacesList.label.filterSpacesByName"),"prepend-inner-icon":"fa-filter",clearable:""},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}):e._e():t("v-text-field",{staticClass:"inputSpacesFilter pa-0 me-3 my-auto",attrs:{placeholder:e.$t("spacesList.label.filterSpaces"),"prepend-inner-icon":"fa-filter"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),e.isMobile?t("v-spacer"):e._e(),e._v(" "),t("v-scale-transition",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.filter,expression:"filter"}],staticClass:"selectSpacesFilter my-auto me-2 subtitle-1 ignore-vuetify-classes d-none d-sm-inline",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.filter=t.target.multiple?s:s[0]}}},e._l(e.spaceFilters,(function(s){return t("option",{key:s.value,domProps:{value:s.value}},[e._v("\n        "+e._s(s.text)+"\n      ")])})),0)]),e._v(" "),t("div",{staticClass:"d-sm-none"},[e.menuHeaderChanged?t("v-icon",{on:{click:e.openBottomMenu}},[e._v("\n      fa-sliders-h\n    ")]):t("v-icon",{on:{click:e.changeHeaderMenu}},[e._v("\n      fa-filter\n    ")])],1),e._v(" "),t("v-bottom-sheet",{staticClass:"pa-0",model:{value:e.bottomMenu,callback:function(t){e.bottomMenu=t},expression:"bottomMenu"}},[t("v-sheet",{staticClass:"text-center",attrs:{height:"210px"}},[t("v-toolbar",{staticClass:"border-box-sizing",attrs:{color:"primary",dark:""}},[t("v-btn",{attrs:{text:""},on:{click:function(t){e.bottomMenu=!1}}},[e._v("\n          "+e._s(e.$t("spacesList.button.cancel"))+"\n        ")]),e._v(" "),t("v-spacer"),e._v(" "),t("v-toolbar-title",[t("v-icon",[e._v("fa-filter")]),e._v("\n          "+e._s(e.$t("spacesList.label.filter"))+"\n        ")],1),e._v(" "),t("v-spacer"),e._v(" "),t("v-btn",{attrs:{text:""},on:{click:e.changeFilterSelection}},[e._v("\n          "+e._s(e.$t("spacesList.button.confirm"))+"\n        ")])],1),e._v(" "),t("v-list",e._l(e.spaceFilters,(function(s){return t("v-list-item",{key:s,on:{click:function(t){e.filterToChange=s.value}}},[t("v-list-item-title",{staticClass:"align-center d-flex"},[e.filterToChange===s.value?t("v-icon",[e._v("fa-check")]):t("span",{staticClass:"me-6"}),e._v(" "),t("v-spacer"),e._v(" "),t("div",[e._v("\n              "+e._s(s.text)+"\n            ")]),e._v(" "),t("v-spacer"),e._v(" "),t("span",{staticClass:"me-6"})],1)],1)})),1)],1)],1)],1)};c._withStripped=!0;const o=s({props:{canCreateSpace:{type:Boolean,default:!1},keyword:{type:String,default:null},filter:{type:String,default:null},spacesSize:{type:String,default:null}},data:()=>({filterToChange:null,bottomMenu:!1,menuHeaderChanged:!1}),computed:{spaceFilters(){return[{text:this.$t("spacesList.filter.all"),value:"all"},{text:this.$t("spacesList.filter.userSpaces"),value:"member"},{text:this.$t("spacesList.filter.favoriteSpaces"),value:"favorite"}]},isMobile(){return this.$vuetify.breakpoint.xs}},watch:{keyword(){this.$emit("keyword-changed",this.keyword)},filter(){this.$emit("filter-changed",this.filter)}},methods:{openBottomMenu(){this.filterToChange=this.filter,this.bottomMenu=!0},changeFilterSelection(){this.bottomMenu=!1,this.filter=this.filterToChange,this.changeHeaderMenu()},changeHeaderMenu(){this.menuHeaderChanged=!this.menuHeaderChanged}}},c,[],!1,null,null,null).exports;var r=function(){var e=this,t=e._self._c;return t("v-flex",{class:e.flipCard?"spaceCardFlip spaceCardFlipped":"spaceCardFlip"},[t("div",{staticClass:"spaceCardFront"},[t("exo-space-card-front",{attrs:{space:e.space,"profile-action-extensions":e.profileActionExtensions,front:""},on:{flip:function(t){e.flipCard=!0},refresh:function(t){return e.$emit("refresh")}}})],1),e._v(" "),t("div",{staticClass:"spaceCardBack"},[t("exo-space-card-reverse",{attrs:{space:e.space},on:{flip:function(t){e.flipCard=!1}}})],1)])};r._withStripped=!0;const l=s({props:{space:{type:Object,default:()=>({})},profileActionExtensions:{type:Array,default:()=>[]}},data:()=>({flipCard:!1})},r,[],!1,null,null,null).exports;var p=function(){var e=this,t=e._self._c;return t("v-hover",{scopedSlots:e._u([{key:"default",fn:function({hover:s}){return[t("v-card",{staticClass:"spaceCardItem d-block d-sm-flex",attrs:{id:e.spaceMenuParentId,elevation:s&&!e.isMobile?4:0,outlined:!e.isMobile}},[t("v-img",{staticClass:"white--text align-start d-block spaceBannerImg",attrs:{src:e.spaceBannerUrl,transition:"none",height:"80px","min-height":"80px","max-height":"80px","min-width":"100%",eager:""}}),e._v(" "),t("div",{staticClass:"spaceToolbarIcons px-2"},[t("v-btn",{staticClass:"spaceInfoIcon d-flex",attrs:{title:e.$t("spaceList.label.openSpaceInfo"),icon:"",small:""},on:{click:function(t){return e.$emit("flip")}}},[t("v-icon",{attrs:{size:"12"}},[e._v("fa-info")])],1),e._v(" "),t("v-spacer"),e._v(" "),e.space.isMember&&!e.isMobile?t("exo-space-favorite-action",{attrs:{"is-favorite":e.space.isFavorite,"space-id":e.space.id}}):e._e(),e._v(" "),e.isMobile?t("div",[t("v-icon",{staticClass:"my-3",attrs:{size:"14"},on:{click:e.openBottomMenu}},[e._v("\n          fa-ellipsis-v\n        ")]),e._v(" "),t("v-bottom-sheet",{staticClass:"pa-0",model:{value:e.bottomMenu,callback:function(t){e.bottomMenu=t},expression:"bottomMenu"}},[t("v-sheet",{staticClass:"text-center",attrs:{height:"150px"}},[t("v-list",{attrs:{dense:""}},[e.space.isMember?t("v-list-item",{on:{click:e.leave}},[t("v-list-item-title",{staticClass:"align-center d-flex"},[t("v-icon",{staticClass:"mx-4",attrs:{size:"16"}},[e._v("fas fa-minus-circle")]),e._v(" "),t("span",{staticClass:"mx-2"},[e._v("\n                    "+e._s(e.$t("spacesList.button.leave"))+"\n                  ")])],1)],1):e.space.isInvited?t("v-list-item",[t("v-list-item-title",{staticClass:"align-center d-flex"},[t("div",{on:{click:e.acceptToJoin}},[t("v-icon",{staticClass:"mx-4",attrs:{size:"16"}},[e._v("mdi-check")]),e._v(" "),t("span",{staticClass:"mx-2"},[e._v("\n                      "+e._s(e.$t("spacesList.button.acceptToJoin"))+"\n                    ")])],1),e._v(" "),t("v-divider",{attrs:{vertical:""}}),e._v(" "),t("div",{on:{click:e.refuseToJoin}},[t("v-icon",{staticClass:"mx-4",attrs:{size:"16"}},[e._v("mdi-close")]),e._v(" "),t("span",{staticClass:"mx-2"},[e._v("\n                      "+e._s(e.$t("spacesList.button.refuseToJoin"))+"\n                    ")])],1)],1)],1):"open"!==e.space.subscription||e.space.isMember?"validation"!==e.space.subscription||e.space.isMember||e.space.isPending?e._e():t("v-list-item",{on:{click:e.requestJoin}},[t("v-list-item-title",{staticClass:"align-center d-flex"},[t("v-icon",{staticClass:"mx-4",attrs:{size:"16"}},[e._v("fas fa-plus-circle")]),e._v(" "),t("span",{staticClass:"mx-2"},[e._v("\n                    "+e._s(e.$t("spacesList.button.requestJoin"))+"\n                  ")])],1)],1):t("v-list-item",{on:{click:e.join}},[t("v-list-item-title",{staticClass:"align-center d-flex"},[t("v-icon",{staticClass:"mx-4",attrs:{size:"16"}},[e._v("fas fa-plus-circle")]),e._v(" "),t("span",{staticClass:"mx-2"},[e._v("\n                    "+e._s(e.$t("spacesList.button.join"))+"\n                  ")])],1)],1),e._v(" "),e.space.isPending?t("v-list-item",{on:{click:e.cancelRequest}},[t("v-list-item-title",{staticClass:"align-center d-flex"},[t("v-icon",{staticClass:"mx-4",attrs:{size:"16"}},[e._v("fas fa-minus-circle")]),e._v(" "),t("span",{staticClass:"mx-2"},[e._v("\n                    "+e._s(e.$t("spacesList.button.cancelRequest"))+"\n                  ")])],1)],1):e._e(),e._v(" "),e.space.isManager?t("v-list-item",{on:{click:e.editSpace}},[t("v-list-item-title",{staticClass:"align-center d-flex"},[t("v-icon",{staticClass:"mx-4",attrs:{size:"16"}},[e._v("fa-edit")]),e._v(" "),t("span",{staticClass:"mx-2"},[e._v("\n                    "+e._s(e.$t("spacesList.button.edit"))+"\n                  ")])],1)],1):e._e(),e._v(" "),e.space.isMember?t("v-list-item",[t("v-list-item-title",[t("exo-space-favorite-action",{attrs:{"is-favorite":e.space.isFavorite,"space-id":e.space.id,"extra-class":"ms-3","display-label":""}})],1)],1):e._e()],1)],1)],1)],1):e._e(),e._v(" "),e.canUseActionsMenu?[t("v-btn",{staticClass:"spaceMenuIcon d-block",attrs:{title:e.$t("spaceList.label.openSpaceMenu"),icon:"",text:""},on:{click:function(t){e.displayActionMenu=!0}}},[t("v-icon",{attrs:{size:"21"}},[e._v("mdi-dots-vertical")])],1),e._v(" "),t("v-menu",{ref:"actionMenu",attrs:{attach:`#${e.spaceMenuParentId}`,transition:"slide-x-reverse-transition","content-class":"spaceActionMenu","offset-y":""},model:{value:e.displayActionMenu,callback:function(t){e.displayActionMenu=t},expression:"displayActionMenu"}},[t("v-list",{staticClass:"pa-0",attrs:{dense:""}},[e.space.canEdit?[t("v-list-item",{on:{click:e.editSpace}},[t("v-list-item-title",{staticClass:"subtitle-2"},[t("i",{staticClass:"uiIcon uiIconEdit"}),e._v("\n                  "+e._s(e.$t("spacesList.button.edit"))+"\n                ")])],1),e._v(" "),t("v-list-item",{on:{click:e.removeSpaceConfirm}},[t("v-list-item-title",{staticClass:"subtitle-2"},[t("i",{staticClass:"uiIcon uiIconTrash"}),e._v("\n                  "+e._s(e.$t("spacesList.button.remove"))+"\n                ")])],1)]:e._e(),e._v(" "),e._l(e.enabledProfileActionExtensions,(function(s,i){return t("v-list-item",{key:i,on:{click:function(t){return s.click(e.space)}}},[t("v-list-item-title",[t("i",{staticClass:"uiIcon",class:s.icon?s.icon:"hidden"}),e._v("\n                "+e._s(s.title)+"\n              ")])],1)}))],2)],1)]:e._e()],2),e._v(" "),t("div",{staticClass:"spaceAvatar"},[t("a",{attrs:{href:e.url}},[t("v-img",{staticClass:"mx-auto",attrs:{src:`${e.spaceAvatarUrl}&size=75x75`,transition:"none",height:"75px",width:"75px","max-height":"75px","max-width":"75px",eager:""}})],1)]),e._v(" "),t("v-card-text",{staticClass:"spaceCardBody align-center py-sm-2"},[t("a",{staticClass:"spaceDisplayName",class:e.isMobile?"text-truncate-2 mt-0":"text-truncate d-block",attrs:{href:e.url,title:e.space.displayName}},[e._v("\n        "+e._s(e.space.displayName)+"\n      ")]),e._v(" "),t("a",{staticClass:"spaceMembersLabel py-0 my-0 my-sm-auto",attrs:{href:e.url}},[e._v("\n        "+e._s(e.$t("spacesList.label.members",{0:e.space.membersCount}))+"\n      ")])]),e._v(" "),e.isMobile?e._e():t("v-card-actions",{staticClass:"spaceCardActions"},[t("exo-confirm-dialog",{ref:"confirmDialog",attrs:{title:e.confirmTitle,message:e.confirmMessage,"ok-label":e.$t("spacesList.label.ok"),"cancel-label":e.okMethod&&e.$t("spacesList.label.cancel")},on:{ok:e.okConfirmDialog,"dialog-closed":e.closeConfirmDialog}}),e._v(" "),e.space.isMember?t("v-btn",{staticClass:"btn mx-auto spaceMembershipButton leaveSpaceButton",attrs:{loading:e.sendingAction,disabled:e.sendingAction||e.space.isUserBound,depressed:"",block:""},on:{click:e.leaveConfirm}},[t("v-icon",[e._v("mdi-minus")]),e._v(" "),t("span",{staticClass:"spaceMembershipButtonText d-inline"},[e._v("\n          "+e._s(e.$t("spacesList.button.leave"))+"\n        ")])],1):e.space.isInvited?t("div",{staticClass:"invitationButtons"},[t("div",{staticClass:"acceptToJoinSpaceButtonParent"},[t("v-btn",{staticClass:"btn mx-auto spaceMembershipButton acceptToJoinSpaceButton",attrs:{loading:e.sendingAction,disabled:e.sendingAction,depressed:""},on:{click:e.acceptToJoin}},[t("v-icon",[e._v("mdi-check")]),e._v(" "),t("span",{staticClass:"d-flex"},[e._v("\n              "+e._s(e.$t("spacesList.button.acceptToJoin"))+"\n            ")])],1),e._v(" "),t("v-btn",{staticClass:"btn spaceButtonMenu d-inline",attrs:{depressed:"","x-small":""},on:{click:function(t){e.displaySecondButton=!e.displaySecondButton}}},[t("v-icon",[e._v("mdi-menu-down")])],1)],1),e._v(" "),t("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.displaySecondButton,expression:"displaySecondButton"}],staticClass:"btn mx-auto spaceMembershipButton refuseToJoinSpaceButton",attrs:{loading:e.sendingSecondAction,disabled:e.sendingSecondAction,depressed:"",block:""},on:{click:e.refuseToJoin}},[t("v-icon",[e._v("mdi-close")]),e._v(" "),t("span",{staticClass:"d-flex"},[e._v("\n            "+e._s(e.$t("spacesList.button.refuseToJoin"))+"\n          ")])],1)],1):e.space.isPending?t("v-btn",{staticClass:"btn mx-auto spaceMembershipButton cancelRequestToJoinSpaceButton",attrs:{loading:e.sendingAction,disabled:e.sendingAction,depressed:"",block:""},on:{click:e.cancelRequest}},[t("v-icon",[e._v("mdi-close")]),e._v(" "),t("span",{staticClass:"spaceMembershipButtonText d-inline"},[e._v("\n          "+e._s(e.$t("spacesList.button.cancelRequest"))+"\n        ")])],1):"open"===e.space.subscription?t("v-btn",{staticClass:"btn mx-auto spaceMembershipButton joinSpaceButton",attrs:{loading:e.sendingAction,disabled:e.sendingAction,depressed:"",block:""},on:{click:e.join}},[t("v-icon",[e._v("mdi-plus")]),e._v(" "),t("span",{staticClass:"spaceMembershipButtonText d-inline"},[e._v("\n          "+e._s(e.$t("spacesList.button.join"))+"\n        ")])],1):"validation"===e.space.subscription?t("v-btn",{staticClass:"btn mx-auto spaceMembershipButton joinSpaceButton",attrs:{loading:e.sendingAction,disabled:e.sendingAction,depressed:"",block:""},on:{click:e.requestJoin}},[t("v-icon",[e._v("mdi-plus")]),e._v(" "),t("span",{staticClass:"spaceMembershipButtonText d-inline"},[e._v("\n          "+e._s(e.$t("spacesList.button.requestJoin"))+"\n        ")])],1):t("div",{staticClass:"joinSpaceDisabledLabel",attrs:{title:e.$t("spacesList.label.closedSpace")}},[t("v-btn",{staticClass:"btn mx-auto spaceMembershipButton joinSpaceButton",attrs:{disabled:"",depressed:"",block:""},on:{click:e.join}},[t("v-icon",[e._v("mdi-plus")]),e._v(" "),t("span",{staticClass:"spaceMembershipButtonText d-inline"},[e._v("\n            "+e._s(e.$t("spacesList.button.join"))+"\n          ")])],1)],1)],1)],1)]}}])})};p._withStripped=!0;const d=s({props:{space:{type:Object,default:null},profileActionExtensions:{type:Array,default:()=>[]}},data:()=>({displayActionMenu:!1,waitTimeUntilCloseMenu:200,sendingAction:!1,sendingSecondAction:!1,confirmTitle:"",confirmMessage:"",okMethod:null,displaySecondButton:!1,bottomMenu:!1}),computed:{spaceAvatarUrl(){return this.space&&(this.space.avatarUrl||`/portal/rest/v1/social/spaces/${this.space.prettyName}/avatar`)},spaceBannerUrl(){return this.space&&(this.space.bannerUrl||`/portal/rest/v1/social/spaces/${this.space.prettyName}/banner`)},spaceMenuParentId(){return this.space&&this.space.id&&`spaceMenuParent-${this.space.id}`||"spaceMenuParent"},enabledProfileActionExtensions(){return this.profileActionExtensions&&this.space&&this.space.isMember?this.profileActionExtensions.slice().filter((e=>e.enabled(this.space))):[]},canUseActionsMenu(){return this.space&&(this.space.canEdit||this.enabledProfileActionExtensions.length)},url(){if(this.space&&this.space.groupId){const e=this.space.groupId.replace(/\//g,":");return`${eXo.env.portal.context}/g/${e}/`}return"#"},isMobile(){return this.$vuetify.breakpoint.xs},isFavorite(){return"true"===this.space?.isFavorite}},created(){$(document).on("mousedown",(()=>{this.displayActionMenu&&window.setTimeout((()=>{this.displayActionMenu=!1,this.displaySecondButton=!1}),this.waitTimeUntilCloseMenu)}))},methods:{editSpace(){this.$root.$emit("editSpace",this.space)},removeSpaceConfirm(){this.openConfirmDialog(this.$t("spacesList.title.deleteSpace"),this.$t("spacesList.message.deleteSpace"),this.removeSpace)},removeSpace(){this.sendingAction=!0,this.$spaceService.removeSpace(this.space.id).then((()=>this.$emit("refresh"))).catch((e=>{console.error("Error processing action",e)})).finally((()=>{this.sendingAction=!1}))},leaveConfirm(){this.space.isManager&&this.space.managersCount<=1?this.openConfirmDialog(this.$t("spacesList.warning"),this.$t("spacesList.warning.lastManager")):this.openConfirmDialog(this.$t("spacesList.title.leaveSpace"),this.$t("spacesList.message.leaveSpace",{0:`<b>${this.space.displayName}</b>`}),this.leave)},leave(){this.sendingAction=!0,this.$spaceService.leave(this.space.id).then((()=>this.$emit("refresh"))).catch((e=>{console.error("Error processing action",e)})).finally((()=>{this.sendingAction=!1}))},acceptToJoin(){this.sendingAction=!0,this.$spaceService.accept(this.space.id).then((()=>this.$emit("refresh"))).catch((e=>{console.error("Error processing action",e)})).finally((()=>{this.sendingAction=!1}))},refuseToJoin(){this.sendingSecondAction=!0,this.$spaceService.deny(this.space.id).then((()=>this.$emit("refresh"))).catch((e=>{console.error("Error processing action",e)})).finally((()=>{this.sendingSecondAction=!1}))},join(){this.sendingAction=!0,this.$spaceService.join(this.space.id).then((()=>this.$emit("refresh"))).catch((e=>{console.error("Error processing action",e)})).finally((()=>{this.sendingAction=!1}))},requestJoin(){this.sendingAction=!0,this.$spaceService.requestJoin(this.space.id).then((()=>this.$emit("refresh"))).catch((e=>{console.error("Error processing action",e)})).finally((()=>{this.sendingAction=!1}))},cancelRequest(){this.sendingAction=!0,this.$spaceService.cancel(this.space.id).then((()=>this.$emit("refresh"))).catch((e=>{console.error("Error processing action",e)})).finally((()=>{this.sendingAction=!1}))},openConfirmDialog(e,t,s){this.confirmTitle=e,this.confirmMessage=t,this.okMethod=s||null,this.$refs.confirmDialog.open()},okConfirmDialog(){this.okMethod&&this.okMethod()},closeConfirmDialog(){this.confirmTitle="",this.confirmMessage="",this.okMethod=null},openBottomMenu(){this.bottomMenu=!0}}},p,[],!1,null,null,null).exports;var v=function(){var e=this,t=e._self._c;return t("v-hover",{scopedSlots:e._u([{key:"default",fn:function({hover:s}){return[t("v-card",{staticClass:"spaceCardItem d-flex flex-column",attrs:{id:e.spaceMenuParentId,elevation:s?4:0,outlined:""}},[t("v-btn",{staticClass:"spaceInfoIcon ma-2",attrs:{absolute:"",small:"",icon:""},on:{click:function(t){return e.$emit("flip")}}},[t("v-icon",{attrs:{size:"12"}},[e._v("fa-info")])],1),e._v(" "),t("div",{staticClass:"d-flex pt-3 pb-2"},[t("p",{staticClass:"font-weight-bold ma-auto"},[e._v("\n        "+e._s(e.$t("spacesList.label.description"))+"\n      ")])]),e._v(" "),t("v-card-text",{staticClass:"align-center pa-0 flex-grow-1"},[e.space.description?[e.space.description.length>80?t("ellipsis",{directives:[{name:"show",rawName:"v-show",value:e.space.description,expression:"space.description"}],attrs:{title:e.space.description,data:e.space.description,"line-clamp":3,"end-char":"..."}}):[e._v("\n          "+e._s(e.space.description)+"\n        ")]]:e._e()],2),e._v(" "),e.space&&e.space.managers&&e.space.managers.length?[t("div",{staticClass:"d-flex px-3 pt-3"},[t("p",{staticClass:"font-weight-bold ma-auto"},[e._v("\n          "+e._s(e.$t("spacesList.title.managers"))+"\n        ")])]),e._v(" "),t("v-card-text",{staticClass:"align-center flex-grow-0"},[t("exo-user-avatars-list",{attrs:{users:e.space.managers,"icon-size":28,max:"5","avatar-overlay-position":""},on:{"open-detail":function(t){return e.$root.$emit("displaySpaceManagers",e.space)}}})],1)]:e._e()],2)]}}])})};v._withStripped=!0;const h=s({props:{space:{type:Object,default:null}}},v,[],!1,null,null,null).exports;var u=function(){var e=this,t=e._self._c;return t("exo-drawer",{ref:"managersDrawer",attrs:{right:""}},[t("template",{slot:"title"},[e._v("\n    "+e._s(e.$t("spacesList.title.managers"))+"\n  ")]),e._v(" "),e.space&&e.space.managers?t("template",{slot:"content"},[t("v-layout",{staticClass:"ma-3",attrs:{column:""}},e._l(e.space.managers,(function(e){return t("exo-user-avatar",{key:e.id,attrs:{identity:e,"extra-class":"my-2",popover:""}})})),1)],1):e._e()],2)};u._withStripped=!0;const m=s({data:()=>({space:null}),mounted(){this.$root.$on("displaySpaceManagers",(e=>{this.space=e,this.$refs.managersDrawer.open()}))}},u,[],!1,null,null,null).exports;var f=function(){var e=this,t=e._self._c;return t("exo-drawer",{ref:"spaceFormDrawer",staticClass:"spaceFormDrawer",attrs:{right:""},on:{opened:function(t){e.stepper=1},closed:function(t){e.stepper=0}}},[t("template",{slot:"title"},[e._v("\n    "+e._s(e.title)+"\n  ")]),e._v(" "),t("template",{slot:"content"},[t("div"),e._v(" "),t("div",[t("v-stepper",{staticClass:"ma-0 py-0 me-4",class:e.isMobile?"pr-3":"",attrs:{vertical:"",flat:""},model:{value:e.stepper,callback:function(t){e.stepper=t},expression:"stepper"}},[t("v-stepper-step",{staticClass:"ma-0",attrs:{complete:e.stepper>1,step:"1"}},[e._v("\n          "+e._s(e.$t("spacesList.label.spaceDetails"))+"\n        ")]),e._v(" "),t("v-stepper-content",{staticClass:"ps-4 pe-6 my-0",attrs:{step:"1"}},[t("form",{ref:"form1",on:{submit:e.nextStep}},[t("v-label",{attrs:{for:"name"}},[e._v("\n              "+e._s(e.$t("spacesList.label.name"))+"\n            ")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.space.displayName,expression:"space.displayName"}],ref:"autoFocusInput1",staticClass:"input-block-level ignore-vuetify-classes my-3",attrs:{placeholder:e.$t("spacesList.label.displayName"),type:"text",name:"name",required:""},domProps:{value:e.space.displayName},on:{input:function(t){t.target.composing||e.$set(e.space,"displayName",t.target.value)}}}),e._v(" "),t("v-label",{attrs:{for:"description"}},[e._v("\n              "+e._s(e.$t("spacesList.label.description"))+"\n            ")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.space.description,expression:"space.description"}],staticClass:"input-block-level ignore-vuetify-classes my-3",attrs:{placeholder:e.$t("spacesList.label.description"),name:"description",rows:"20",maxlength:"2000",noresize:""},domProps:{value:e.space.description},on:{input:function(t){t.target.composing||e.$set(e.space,"description",t.target.value)}}}),e._v(" "),t("v-label",{attrs:{for:"spaceTemplate"}},[e._v("\n              "+e._s(e.$t("spacesList.label.spaceTemplate"))+"\n            ")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.template,expression:"template"}],staticClass:"input-block-level ignore-vuetify-classes my-3",attrs:{disabled:e.space&&e.space.id,name:"spaceTemplate",required:""},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.template=t.target.multiple?s:s[0]}}},e._l(e.templates,(function(s){return t("option",{key:s.name,domProps:{value:s.name}},[e._v("\n                "+e._s(s.resolvedLabel||s.name)+"\n              ")])})),0),e._v(" "),t("div",{staticClass:"caption font-italic font-weight-light ps-1 muted"},[e._v(e._s(e.spaceTemplate&&e.spaceTemplate.resolvedDescription||""))]),e._v(" "),t("v-card-actions",{staticClass:"px-0"},[t("v-spacer"),e._v(" "),t("v-btn",{staticClass:"btn btn-primary",attrs:{outlined:""},on:{click:e.nextStep}},[e._v("\n                "+e._s(e.$t("spacesList.button.continue"))+"\n                "),t("v-icon",{staticClass:"ms-2",attrs:{size:"18"}},[e._v("\n                  "+e._s(e.$vuetify.rtl?"fa-caret-left":"fa-caret-right")+"\n                ")])],1)],1)],1)]),e._v(" "),t("v-stepper-step",{staticClass:"ma-0",attrs:{complete:e.stepper>2,step:"2"}},[e._v("\n          "+e._s(e.$t("spacesList.label.spaceAccess"))+"\n        ")]),e._v(" "),t("v-stepper-content",{staticClass:"ps-4 pe-6 my-0",attrs:{step:"2"}},[t("form",{ref:"form2",on:{submit:e.nextStep}},[t("div",{staticClass:"d-flex flex-wrap pt-2"},[t("label",{staticClass:"v-label theme--light my-auto float-left",attrs:{for:"hidden"}},[e._v("\n                "+e._s(e.$t("spacesList.label.hidden"))+"\n              ")]),e._v(" "),t("v-switch",{ref:"autoFocusInput2",staticClass:"float-left my-0 ms-4",attrs:{"true-value":"hidden","false-value":"private"},model:{value:e.space.visibility,callback:function(t){e.$set(e.space,"visibility",t)},expression:"space.visibility"}})],1),e._v(" "),t("div",{staticClass:"caption font-italic font-weight-light ps-1 muted mb-2 mt-1"},[e._v("\n              "+e._s(e.$t(`spacesList.description.${e.space.visibility||"hidden"}`))+"\n            ")]),e._v(" "),t("div",{staticClass:"d-flex flex-wrap pt-2"},[t("label",{staticClass:"v-label theme--light",attrs:{for:"hidden"}},[e._v("\n                "+e._s(e.$t("spacesList.label.registration"))+"\n              ")]),e._v(" "),t("v-radio-group",{staticClass:"mt-2 ms-2",attrs:{mandatory:"",row:"",inset:""},model:{value:e.space.subscription,callback:function(t){e.$set(e.space,"subscription",t)},expression:"space.subscription"}},[t("v-radio",{staticClass:"my-0",attrs:{label:e.$t("spacesList.label.open"),value:"open"}}),e._v(" "),t("v-radio",{staticClass:"my-0",attrs:{label:e.$t("spacesList.label.validation"),value:"validation"}}),e._v(" "),t("v-radio",{staticClass:"my-0",attrs:{label:e.$t("spacesList.label.closed"),value:"closed"}})],1)],1),e._v(" "),t("div",{staticClass:"caption font-italic font-weight-light ps-1 muted"},[e._v(e._s(e.$t(`spacesList.description.${e.space.subscription||"open"}`)))]),e._v(" "),t("v-card-actions",{staticClass:"mt-4 px-0"},[t("v-btn",{staticClass:"btn",on:{click:e.previousStep}},[t("v-icon",{staticClass:"me-2",attrs:{size:"18"}},[e._v("\n                  "+e._s(e.$vuetify.rtl?"fa-caret-right":"fa-caret-left")+"\n                ")]),e._v("\n                "+e._s(e.$t("spacesList.button.back"))+"\n              ")],1),e._v(" "),t("v-spacer"),e._v(" "),t("v-btn",{staticClass:"btn btn-primary",attrs:{outlined:""},on:{click:e.nextStep}},[e._v("\n                "+e._s(e.$t("spacesList.button.continue"))+"\n                "),t("v-icon",{staticClass:"ms-2",attrs:{size:"18"}},[e._v("\n                  "+e._s(e.$vuetify.rtl?"fa-caret-left":"fa-caret-right")+"\n                ")])],1)],1)],1)]),e._v(" "),t("v-stepper-step",{staticClass:"ma-0",attrs:{complete:e.stepper>3,step:"3"}},[e._v("\n          "+e._s(e.$t("spacesList.label.inviteUsers"))+"\n        ")]),e._v(" "),t("v-stepper-content",{staticClass:"ps-4 pe-6 my-0",attrs:{step:"3"}},[t("form",{ref:"form3",attrs:{disabled:e.savingSpace||e.spaceSaved},on:{submit:e.saveSpace}},[t("v-label",{staticClass:"mb-4",attrs:{for:"inviteMembers"}},[e._v("\n              "+e._s(e.$t("spacesList.label.users"))+"\n            ")]),e._v(" "),t("exo-identity-suggester",{ref:"autoFocusInput3",attrs:{labels:e.suggesterLabels,disabled:e.savingSpace||e.spaceSaved,"search-options":{spaceURL:e.space.prettyName},name:"inviteMembers","type-of-relations":"user_to_invite",height:"100","include-users":"","include-spaces":"",multiple:""},model:{value:e.space.invitedMembers,callback:function(t){e.$set(e.space,"invitedMembers",t)},expression:"space.invitedMembers"}}),e._v(" "),t("v-card-actions",{staticClass:"mt-4 px-0"},[t("v-btn",{staticClass:"btn",attrs:{disabled:e.savingSpace||e.spaceSaved},on:{click:e.previousStep}},[t("v-icon",{staticClass:"me-2",attrs:{size:"18"}},[e._v("\n                  "+e._s(e.$vuetify.rtl?"fa-caret-right":"fa-caret-left")+"\n                ")]),e._v("\n                "+e._s(e.$t("spacesList.button.back"))+"\n              ")],1)],1)],1)])],1),e._v(" "),t("div",[0!=e.selectedSpacesWithExternals.length?t("v-alert",{staticClass:"elevation-0 mb-14 me-2 pe-4",attrs:{dismissible:"",icon:"mdi-alert-circle",type:"warning"},model:{value:e.externalAlert,callback:function(t){e.externalAlert=t},expression:"externalAlert"}},[t("p",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:e.invitedSpacesWithExternals,expression:"invitedSpacesWithExternals"}]})]):e._e()],1)],1)]),e._v(" "),t("template",{slot:"footer"},[t("div",{staticClass:"d-flex"},[t("v-spacer"),e._v(" "),t("v-btn",{staticClass:"btn me-2",attrs:{disabled:e.savingSpace||e.spaceSaved},on:{click:e.cancel}},[[e._v("\n          "+e._s(e.$t("spacesList.button.cancel"))+"\n        ")]],2),e._v(" "),t("v-btn",{staticClass:"btn btn-primary",attrs:{loading:e.savingSpace,disabled:e.saveButtonDisabled},on:{click:e.saveSpace}},[e.spaceSaved?t("v-icon",[e._v("mdi-check-all")]):e.spaceToUpdate?[e._v("\n          "+e._s(e.$t("spacesList.button.updateSpace"))+"\n        ")]:[e._v("\n          "+e._s(e.$t("spacesList.button.createSpace"))+"\n        ")]],2)],1)])],2)};f._withStripped=!0;const _=s({data:()=>({savingSpace:!1,spaceSaved:!1,space:{},spaceToUpdate:{},title:null,stepper:0,template:null,spaceTemplate:null,templates:[],selectedSpacesWithExternals:[],externalAlert:!1}),computed:{saveButtonDisabled(){return this.savingSpace||this.spaceSaved||this.stepper<3&&!this.space.id},displayedForm(){return this.$refs&&this.$refs[`form${this.stepper}`]},suggesterLabels(){return{placeholder:this.$t("spacesList.label.inviteMembers"),noDataLabel:this.$t("spacesList.label.noDataLabel")}},invitedSpacesWithExternals(){return this.$t&&this.$t("spaceList.checkExternals.warning",{0:`<strong>[${this.selectedSpacesWithExternals.join(",")}]</strong>`})},isMobile(){return this.$vuetify&&this.$vuetify.breakpoint&&"xs"===this.$vuetify.breakpoint.name}},watch:{savingSpace(){this.savingSpace?this.$refs.spaceFormDrawer.startLoading():this.$refs.spaceFormDrawer.endLoading()},stepper(){this.stepper?this.$nextTick().then((()=>{let e=this.$refs[`autoFocusInput${this.stepper}`];e&&(e=e.focus||!e.$el?e:e.$el||e),e&&window.setTimeout((()=>{e.focus()}),200)})):(this.spaceSaved=!1,this.savingSpace=!1)},template(){this.template&&!this.space.id&&(this.spaceTemplate=this.templates.find((e=>e.name===this.template)),this.setSpaceTemplateProperties())},"space.invitedMembers":function(e){this.selectedSpacesWithExternals=[],e.filter((e=>"space"===e.providerId)).forEach((e=>{this.$spaceService.checkExternals(e.spaceId).then((t=>{t&&"true"===t&&(this.selectedSpacesWithExternals.push(e.displayName),this.externalAlert=!0)}))}))}},created(){const e=window.location.search&&window.location.search.substring(1);if(e){const t=JSON.parse(`{"${decodeURI(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')}"}`).createSpace;t&&Boolean(t)&&this.$root.$once("application-loaded",(()=>{this.$nextTick().then((()=>{this.spaceToUpdate=null,this.setSpaceTemplateProperties(),this.title=this.$t("spacesList.label.addNewSpace"),this.$refs.spaceFormDrawer.open()}))}))}},mounted(){this.$root.$on("addNewSpace",(()=>{this.spaceToUpdate=null,this.space={subscription:"open",visibility:"private"},this.setSpaceTemplateProperties(),this.title=this.$t("spacesList.label.addNewSpace"),this.$refs.spaceFormDrawer.open()})),document.addEventListener("meeds.social.editSpace",this.editSpace),this.$root.$on("editSpace",this.editSpace),this.$spaceService.getSpaceTemplates().then((e=>{this.templates=e||[],this.spaceTemplate=this.templates.length&&this.templates[0]||null,this.template=this.spaceTemplate&&this.spaceTemplate.name}))},methods:{setSpaceTemplateProperties(){this.spaceTemplate&&(this.$set(this.space,"template",this.template),this.$set(this.space,"subscription",this.spaceTemplate.registration),this.$set(this.space,"visibility",this.spaceTemplate.visibility),this.$set(this.space,"invitedMembers",this.spaceTemplate.invitees&&this.spaceTemplate.invitees.split(",")||[]),this.space.invitedMembers&&this.space.invitedMembers.length&&(this.space.invitedMembers=this.space.invitedMembers.map((e=>({id:`organization:${e}`,providerId:"organization",remoteId:e})))))},editSpace(e){(e=e.detail&&e.detail.data||e)&&e.id?(this.spaceToUpdate=e,this.space=Object.assign({},e),this.template=this.space.template||this.template,this.title=this.$t("spacesList.label.editSpace",{0:this.space.displayName}),this.$refs.spaceFormDrawer.open()):console.warn("space does not have an id ",e," ignore user action")},previousStep(){this.stepper--},nextStep(e){e&&(e.preventDefault(),e.stopPropagation()),this.displayedForm&&this.displayedForm.reportValidity()&&this.stepper++},cancel(){this.$refs.spaceFormDrawer.close()},saveSpace(e){e&&(e.preventDefault(),e.stopPropagation()),this.spaceSaved||this.savingSpace||(this.savingSpace=!0,this.space.id?this.$spaceService.updateSpace({id:this.space.id,displayName:this.space.displayName,description:this.space.description,visibility:this.space.visibility,subscription:this.space.subscription,invitedMembers:this.space.invitedMembers}).then((e=>{Object.assign(this.spaceToUpdate,e,{managers:this.spaceToUpdate.managers},{description:e.description||""}),this.spaceSaved=!0,window.setTimeout((()=>{this.$refs.spaceFormDrawer.close()}),200)})).catch((e=>{console.warn("Error updating space ",this.space,e),String(e).indexOf("SPACE_ALREADY_EXIST")>=0?this.displayAlert(this.$t("spacesList.error.spaceWithSameNameExists"),"error"):this.displayAlert(this.$t("spacesList.error.unknownErrorWhenSavingSpace"),"error")})).finally((()=>this.savingSpace=!1)):(this.space.template=this.template,this.$spaceService.createSpace(this.space).then((e=>{this.spaceSaved=!0,window.location.href=`${eXo.env.portal.context}/g/${e.groupId.replace(/\//g,":")}`})).catch((e=>{console.warn("Error creating space ",this.space,e),String(e).indexOf("SPACE_ALREADY_EXIST")>=0?this.displayAlert(this.$t("spacesList.error.spaceWithSameNameExists"),"error"):String(e).indexOf("INVALID_SPACE_NAME")>=0?this.displayAlert(this.$t("spacesList.error.InvalidSpaceName"),"error"):this.displayAlert(this.$t("spacesList.error.unknownErrorWhenSavingSpace"),"error")})).finally((()=>this.savingSpace=!1))))},displayAlert(e,t){document.dispatchEvent(new CustomEvent("notification-alert",{detail:{message:e,type:t||"success"}}))}}},f,[],!1,null,null,null).exports;var b=function(){var e=this;return(0,e._self._c)("favorite-button",{attrs:{id:e.spaceId,"space-id":e.spaceId,favorite:e.favorite,absolute:e.absolute,top:e.top,right:e.right,small:!1,type:"space","type-label":"space","entity-type":e.entityType,"display-label":e.displayLabel,"extra-class":e.extraClass},on:{removed:e.removed,"remove-error":e.removeError,added:e.added,"add-error":e.addError}})};b._withStripped=!0;const g={"exo-spaces-list":i,"exo-spaces-card-list":n,"exo-spaces-toolbar":o,"exo-space-card":l,"exo-space-card-front":d,"exo-space-card-reverse":h,"exo-space-managers-drawer":m,"exo-space-form-drawer":_,"exo-space-favorite-action":s({props:{spaceId:{type:String,default:""},isFavorite:{type:Boolean,default:!1},entityType:{type:String,default:null},absolute:{type:Boolean,default:!1},top:{type:Number,default:()=>0},right:{type:Number,default:()=>0},displayLabel:{type:Boolean,default:!1},extraClass:{type:String,default:()=>""}},data:()=>({favorite:!1}),created(){this.favorite="true"===this.isFavorite},methods:{removed(){this.displayAlert(this.$t("Favorite.tooltip.SuccessfullyDeletedFavorite",{0:this.$t("spaceList.alert.label")})),this.$emit("removed"),document.dispatchEvent(new CustomEvent("space-favorite-removed",{detail:this.spaceId}))},removeError(){this.displayAlert(this.$t("Favorite.tooltip.ErrorDeletingFavorite",{0:this.$t("spaceList.alert.label")}),"error")},added(){this.displayAlert(this.$t("Favorite.tooltip.SuccessfullyAddedAsFavorite",{0:this.$t("spaceList.alert.label")})),this.$emit("added"),document.dispatchEvent(new CustomEvent("space-favorite-added",{detail:this.spaceId}))},addError(){this.displayAlert(this.$t("Favorite.tooltip.ErrorAddingAsFavorite",{0:this.$t("spaceList.alert.label")}),"error")},displayAlert(e,t){document.dispatchEvent(new CustomEvent("notification-alert",{detail:{message:e,type:t||"success"}}))}}},b,[],!1,null,null,null).exports};for(const e in g)Vue.component(e,g[e]);if(extensionRegistry){const e=extensionRegistry.loadComponents("SpacesList");e&&e.length>0&&e.forEach((e=>{Vue.component(e.componentName,e.componentOptions)}))}return e})()));