define((()=>(()=>{"use strict";var t={d:(s,e)=>{for(var i in e)t.o(e,i)&&!t.o(s,i)&&Object.defineProperty(s,i,{enumerable:!0,get:e[i]})},o:(t,s)=>Object.prototype.hasOwnProperty.call(t,s),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},s={};t.r(s),t.d(s,{init:()=>u});var e=function(){var t=this,s=t._self._c;return s("v-app",{staticClass:"hiddenable-widget"},[s("v-flex",{class:t.appVisibilityClass,attrs:{xs12:"",sm12:""}},[s("v-layout",{attrs:{row:"",wrap:"","mx-0":""}},[s("v-flex",{attrs:{"d-flex":"",xs12:""}},[s("v-card",{staticClass:"flex suggestions-wrapper",attrs:{flat:""}},[s("v-card-title",{staticClass:"suggestions-title subtitle-1 text-uppercase pb-0"},[s("span",[t._v(t._s(t.$t("suggestions.label")))])]),t._v(" "),t.peopleSuggestionsList.length>0&&"space"!==t.suggestionsType?s("v-list",{staticClass:"suggestions-list people-list py-4 mx-4",attrs:{dense:""}},t._l(t.peoplesToDisplay,(function(e){return s("exo-suggestions-people-list-item",{key:e.suggestionId,attrs:{people:e,"people-suggestions-list":t.peopleSuggestionsList}})})),1):t._e(),t._v(" "),t.spacesSuggestionsList.length>0&&"people"!==t.suggestionsType?s("v-list",{staticClass:"suggestions-list space-list py-4 mx-4",attrs:{dense:""}},t._l(t.spacesToDisplay,(function(e){return s("exo-suggestions-space-list-item",{key:e.spaceId,attrs:{space:e,"spaces-suggestions-list":t.spacesSuggestionsList}})})),1):t._e()],1)],1)],1)],1)],1)};function i(t,s,e,i,n,o,a,l){var p,r="function"==typeof t?t.options:t;if(s&&(r.render=s,r.staticRenderFns=e,r._compiled=!0),i&&(r.functional=!0),o&&(r._scopeId="data-v-"+o),a?(p=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},r._ssrRegister=p):n&&(p=l?function(){n.call(this,(r.functional?this.parent:this).$root.$options.shadowRoot)}:n),p)if(r.functional){r._injectStyles=p;var c=r.render;r.render=function(t,s){return p.call(s),c(t,s)}}else{var g=r.beforeCreate;r.beforeCreate=g?[].concat(g,p):[p]}return{exports:t,options:r}}e._withStripped=!0;const n=i({props:{suggestionsType:{type:String,default:"all"}},data:()=>({peopleSuggestionsList:[],spacesSuggestionsList:[],loading:2}),computed:{displayPeopleSuggestions(){return!this.suggestionsType||"all"===this.suggestionsType||"user"===this.suggestionsType},displaySpacesSuggestions(){return!this.suggestionsType||"all"===this.suggestionsType||"space"===this.suggestionsType},peoplesToDisplay(){return this.peopleSuggestionsList.slice(0,2)},spacesToDisplay(){return this.spacesSuggestionsList.slice(0,2)},appVisibilityClass(){return this.spacesSuggestionsList&&this.spacesSuggestionsList.length||this.peopleSuggestionsList&&this.peopleSuggestionsList.length?"d-flex":"d-none"}},watch:{loading(t,s){t===s||t||this.$nextTick().then((()=>this.$root.$applicationLoaded()))}},created(){this.displayPeopleSuggestions?this.initPeopleSuggestionsList():this.loading--,this.displaySpacesSuggestions?this.initSpaceSuggestionsList():this.loading--},methods:{initPeopleSuggestionsList(){return this.$userService.getUserSuggestions().then((t=>{this.peopleSuggestionsList=t.items})).finally((()=>{this.loading--}))},initSpaceSuggestionsList(){return this.$spaceService.getSuggestionsSpace().then((t=>{this.spacesSuggestionsList=t.items})).finally((()=>{this.loading--}))}}},e,[],!1,null,null,null).exports;var o=function(){var t=this,s=t._self._c;return s("v-list-item",{staticClass:"suggestions-list-item pa-0"},[s("v-list-item-avatar",{staticClass:"spaceAvatar",attrs:{size:t.avatarSize}},[s("v-img",{attrs:{"lazy-src":t.avatarUrl||"",src:t.avatarUrl||"",transition:"none",eager:""}})],1),t._v(" "),s("v-list-item-content",{staticClass:"pb-3"},[s("v-list-item-title",{staticClass:"body-2 font-weight-bold suggestions-list-item-title"},[s("a",{staticClass:"text-color",attrs:{href:t.url}},[t._v("\n        "+t._s(t.space.displayName)+"\n      ")])]),t._v(" "),s("v-list-item-subtitle",{staticClass:"caption text-sub-title suggestions-list-item-subtitle"},[t._v("\n      "+t._s(t.space.members)+" "+t._s(t.$t("spacemember.Label"))+"\n    ")])],1),t._v(" "),s("v-list-item-action",{staticClass:"suggestions-list-item-actions"},[s("v-btn-toggle",{staticClass:"transparent"},[s("a",{staticClass:"px-0 suggestions-btn-action connexion-accept-btn",attrs:{text:"",icon:"",small:"","min-width":"auto"},on:{click:function(s){return t.joinSpace(t.space)}}},[s("i",{staticClass:"uiIconPlusLight"})]),t._v(" "),s("a",{staticClass:"px-0 suggestions-btn-action connexion-refuse-btn",attrs:{text:"",small:"","min-width":"auto"},on:{click:function(s){return t.ignoredSuggestionSpace(t.space)}}},[s("i",{staticClass:"uiIconCloseCircled"})])])],1)],1)};o._withStripped=!0;const a=i({props:{space:{type:Object,default:()=>null},avatarSize:{type:Number,default:()=>37},spacesSuggestionsList:{type:Array,default:()=>[]}},computed:{avatarUrl(){return this.space&&this.space.spaceAvatarUrl||`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/social/spaces/${this.space.spaceUrl}/avatar`},url(){return this.space&&this.space.spaceId?`${eXo.env.portal.context}/g/:spaces:${this.space.spaceUrl}/`:"#"}},methods:{joinSpace(t){this.$spaceService.requestJoin(t.spaceId).then((()=>{this.spacesSuggestionsList.splice(this.spacesSuggestionsList.indexOf(t),1)}))},ignoredSuggestionSpace(t){this.$spaceService.ignoreSuggestion(t).then((()=>{this.spacesSuggestionsList.splice(this.spacesSuggestionsList.indexOf(t),1)}))}}},o,[],!1,null,null,null).exports;var l=function(){var t=this,s=t._self._c;return s("v-list-item",{staticClass:"suggestions-list-item pa-0"},[s("v-list-item-avatar",{attrs:{size:t.avatarSize}},[s("v-img",{attrs:{"lazy-src":t.avatarUrl||"",src:t.avatarUrl||"",transition:"none",eager:""}})],1),t._v(" "),s("v-list-item-content",{staticClass:"pb-3"},[s("v-list-item-title",{staticClass:"body-2 font-weight-bold text-color suggestions-list-item-title"},[s("a",{staticClass:"text-color",attrs:{href:t.url}},[t._v("\n        "+t._s(t.people.suggestionName)+"\n      ")])]),t._v(" "),s("v-list-item-subtitle",{staticClass:"caption text-sub-title suggestions-list-item-subtitle"},[t._v("\n      "+t._s(t.people.number)+" "+t._s(t.$t("connection.label"))+"\n    ")])],1),t._v(" "),s("v-list-item-action",{staticClass:"suggestions-list-item-actions"},[s("v-btn-toggle",{staticClass:"transparent"},[s("a",{staticClass:"px-0 suggestions-btn-action connexion-accept-btn",attrs:{text:"",icon:"",small:"","min-width":"auto"},on:{click:function(s){return t.connectionRequest(t.people)}}},[s("i",{staticClass:"uiIconInviteUser"})]),t._v(" "),s("a",{staticClass:"px-0 suggestions-btn-action connexion-refuse-btn",attrs:{text:"",small:"","min-width":"auto"},on:{click:function(s){return t.ignoredConnectionUser(t.people)}}},[s("i",{staticClass:"uiIconCloseCircled"})])])],1)],1)};l._withStripped=!0;const p={"exo-suggestions-people-and-space":n,"exo-suggestions-space-list-item":a,"exo-suggestions-people-list-item":i({props:{people:{type:Object,default:()=>null},avatarSize:{type:Number,default:()=>37},peopleSuggestionsList:{type:Array,default:()=>[]}},computed:{avatarUrl(){return this.people&&this.people.avatar||`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/social/users/${this.people.username}/avatar`},url(){return this.people&&this.people.suggestionId?`${eXo.env.portal.context}/${eXo.env.portal.portalName}/profile/${this.people.username}`:"#"}},methods:{connectionRequest(t){this.$userService.connect(t.username).then((()=>{this.peopleSuggestionsList.splice(this.peopleSuggestionsList.indexOf(t),1)}))},ignoredConnectionUser(t){this.$userService.ignore(t.username).then((()=>{this.peopleSuggestionsList.splice(this.peopleSuggestionsList.indexOf(t),1)}))}}},l,[],!1,null,null,null).exports};for(const t in p)Vue.component(t,p[t]);const r="undefined"!=typeof eXo?eXo.env.portal.language:"en",c=`${Vue.prototype.$spacesConstants.PORTAL}/${Vue.prototype.$spacesConstants.PORTAL_REST}/i18n/bundle/locale.portlet.social.SuggestionsPortlet-${r}.json`;if(extensionRegistry){const t=extensionRegistry.loadComponents("ExoSuggestionsPeopleAndSpace");t&&t.length>0&&t.forEach((t=>{Vue.component(t.componentName,t.componentOptions)}))}const g="SuggestionsPeopleAndSpace";function u(t){exoi18n.loadLanguageAsync(r,c).then((s=>{Vue.createApp({template:`<exo-suggestions-people-and-space id="${g}" suggestionsType="${t||"all"}"></exo-suggestions-people-and-space>`,i18n:s,vuetify:Vue.prototype.vuetifyOptions},`#${g}`,`Suggestions ${t}`)}))}return s})()));