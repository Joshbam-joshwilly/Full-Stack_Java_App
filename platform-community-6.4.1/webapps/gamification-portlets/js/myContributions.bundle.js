define((()=>(()=>{"use strict";var t={d:(e,i)=>{for(var o in i)t.o(i,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:i[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{init:()=>f});var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex flex-column full-height full-width"},[i("div",{staticClass:"flex d-flex flex-grow-0 flex-shrink-1"},[t.overviewDisplay&&!t.hasZeroPoints?i("v-layout",{attrs:{row:"",wrap:"","align-start":"","mx-0":""}},[i("v-flex",{attrs:{"d-flex":""}},[i("div",[i("span",{staticClass:"subtitle-2 profile-card-header text-color"},[t._v(t._s(t.$t("overview.myContributions.points")))])])])],1):t.overviewDisplay?t._e():i("v-layout",{attrs:{row:"",wrap:"","align-start":"","mx-4":"","mt-4":""}},[i("v-flex",{attrs:{"d-flex":"",xs1:""}},[i("v-icon",{attrs:{color:"grey darken-2",size:"20"},on:{click:function(e){return t.$emit("isProfileStats")}}},[t._v("\n          "+t._s(t.$vuetify.rtl?"mdi-arrow-right":"mdi-arrow-left")+"\n        ")])],1),t._v(" "),i("v-flex",{attrs:{"d-flex":"",xs10:"","justify-center":""}},[i("div",[i("span",{staticClass:"pe-6 text-uppercase subtitle-2 profile-card-header text-color"},[t._v(t._s(t.$t("homepage.profileStatus.weeklyPoints")))])])]),t._v(" "),t.hasZeroPoints?t._e():i("v-flex",{staticClass:"text-right",attrs:{"d-flex":"",xs1:""}},[i("i",{staticClass:"uiIconInformation clickable primary--text my-auto ms-3 pb-2",on:{click:t.openHistoryDrawer}})])],1)],1),t._v(" "),t.hasZeroPoints?i("v-list",{staticClass:"d-flex flex-shrink-0 flex-grow-1",attrs:{height:"180"}},[i("v-list-item",[i("v-list-item-icon",{staticClass:"my-auto"},[i("v-icon",{staticClass:"secondary--text me-1",attrs:{size:"65"}},[t._v("fas fa-chart-pie")])],1),t._v(" "),i("v-list-item-content",[i("div",{staticClass:"d-flex flex-grow-0 flex-shrink-1"},[i("span",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.$t("overview.myContributions.zeroPoints.description",{0:"<a href='"+t.challengesURL+"' class='primary--text font-weight-bold' rel='nofollow noreferrer noopener'>"+t.$t("overview.myContributions.zeroPoints.description.this")+"</a>"}),expression:"$t('overview.myContributions.zeroPoints.description', {0: `<a href='${challengesURL}' class='primary--text font-weight-bold' rel='nofollow noreferrer noopener'>${$t('overview.myContributions.zeroPoints.description.this')}</a>`})"}],staticClass:"align-self-center text-wrap text-left text-break"})])])],1)],1):i("v-card",{staticClass:"flex full-width flex-grow-1",attrs:{loading:t.displayLoadingChart,flat:""}},[i("div",{staticClass:"d-flex flex-row full-height full-width subtitle-2 text-color"},[t.overviewDisplay?i("div",{staticClass:"col-5 ps-0 pe-1"},t._l(t.programLabels,(function(e){return i("v-tooltip",{key:e.name,attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(o){var n=o.on;return[i("h6",t._g({staticClass:"text-truncate-2 font-weight-light my-1"},n),[i("div",{staticClass:"d-inline-block"},[i("v-card",{staticClass:"me-1 mb-n1",attrs:{color:e.color,"min-width":"30px",width:"30px",height:"17px",flat:""}})],1),t._v("\n              "+t._s(e.name)+"\n            ")])]}}],null,!0)},[t._v(" "),i("span",[t._v(t._s(e.name))])])})),1):t._e(),t._v(" "),i("div",{staticClass:"flex my-auto",style:t.pieChartDimensions,attrs:{id:"echartUserPoints"}})])])],1)};function o(t,e,i,o,n,r,s,a){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=i,c._compiled=!0),o&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),s?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},c._ssrRegister=l):n&&(l=a?function(){n.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:n),l)if(c.functional){c._injectStyles=l;var p=c.render;c.render=function(t,e){return l.call(e),p(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:c}}i._withStripped=!0;var n=o({props:{overviewDisplay:{type:Boolean,default:!1}},data:()=>({userPoints:0,period:"WEEK",programLabels:[],loading:!0,colors:["#4ad66d","#ffe169","#ff8fa3","#20a8ea","#C155F4","#F7A35B","#A0C7FF","#FD6A6A","#059d98","#b7efc5","#dbb42c","#c9184a","#1273d4","#E65ABC","#00FF56","#B1F6FF","#FFFF46","#26a855","#f10000","#208b3a","#c9a227","#ffccd5","#134d9b","#E66CDC","#58D68B","#5CE6D3","#f16a27","#ac1c1e","#eda3ff","#1a7431","#a47e1b","#ff4d6d","#62b0de","#FF97D0","#92e03a","#f44336","#3d6d8a","#E0A5FF","#FF9DB8","#808080"]}),computed:{option(){return{title:[{text:this.$t("overview.myContributions.Total"),textStyle:{fontStyle:"normal",color:"#4d5466",fontWeight:"normal",fontSize:"16"},subtext:"",subtextStyle:{fontStyle:"normal",color:"#4d5466",fontWeight:"bold",fontSize:"18",lineHeight:22},left:"center",top:"43%"}],tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)",position:["center","center"]},series:[{type:"pie",radius:["50%","90%"],center:["50%","50%"],label:{show:!1},color:this.colors}]}},pieChartDimensions(){return this.overviewDisplay?"width:100%; height:100%;":"width:100%; height:220px;"},challengesURL:()=>`${eXo.env.portal.context}/${eXo.env.portal.portalName}/contributions/challenges`,displayLoadingChart(){return!this.overviewDisplay&&this.loading},hasZeroPoints(){return 0===this.userPoints&&!this.loading}},created(){this.loading=!0,Promise.all([this.getGamificationPointsStats(),this.getGamificationPoints()]).finally((()=>this.loading=!1))},methods:{getGamificationPoints(){return this.$nextTick().then((()=>{return(t=this.period,fetch(`/portal/rest/gamification/api/v1/points?userId=${eXo.env.portal.profileOwner}&period=${t||""}`,{method:"GET",credentials:"include"}).then((t=>{if(t&&t.ok)return t.json();throw new Error("Error when getting gamification points")}))).then((t=>{this.userPoints=t.points,0!==t.points&&this.$emit("seeAll",!0),this.option.title[0].subtext=t.points}));var t}))},getGamificationPointsStats(){return(t=this.period,fetch(`/portal/rest/gamification/leaderboard/stats?username=${eXo.env.portal.profileOwner}&period=${t||""}`,{method:"GET",credentials:"include"}).then((t=>{if(t&&t.ok)return t.json();throw new Error("Error when getting gamification points stats")}))).then((t=>{this.option.series[0].data=[];const e=[];for(let i=0;i<t.length;i++){const o=t[i].label;let n,r;n=this.$t(`exoplatform.gamification.gamificationinformation.domain.${o.charAt(0).toUpperCase()}${o.slice(1)}`).includes("exoplatform.gamification.gamificationinformation.domain")?o.charAt(0).toUpperCase()+o.slice(1):this.$t(`exoplatform.gamification.gamificationinformation.domain.${o.charAt(0).toUpperCase()}${o.slice(1)}`),i>4?(r={name:this.$t("exoplatform.gamification.gamificationinformation.domain.others"),value:this.option.series[0].data[4].value+t[i].value},this.option.series[0].data[4]=r):(r={name:n,value:t[i].value},this.option.series[0].data.push(r)),i<=4?e.push({name:r.name,color:this.colors[i]}):e[4].name=r.name}return this.programLabels=e,this.$nextTick()})).finally((()=>this.initChart(this.option)));var t},initChart(t){return new Promise((e=>{window.require(["SHARED/eCharts"],(i=>{e(i),this.$emit("loaded",!1),this.$nextTick().then((()=>{const e=document.getElementById("echartUserPoints");e?i.init(e).setOption(t,!0):window.setTimeout((()=>{this.initChart(t)}),50)}))}))}))},openHistoryDrawer(){this.$root.$emit("open-achievement",this.userPoints)}}},i,[],!1,null,null,null);n.options.__file="src/main/webapp/vue-app/profileStats/components/UserPointsWidget.vue";const r=n.exports;var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("gamification-overview-widget",{attrs:{"see-all-url":t.achievementsURL,loading:t.loading},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n    "+t._s(t.$t("overview.myContributions.title"))+"\n  ")]},proxy:!0},{key:"content",fn:function(){return[i("user-points-widget",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],attrs:{"overview-display":""},on:{seeAll:function(e){return t.updateDisplaySeeAll(e)},loaded:function(e){t.loading=!1}}})]},proxy:!0}])})};s._withStripped=!0;var a=o({data:()=>({seeAllDisplay:!1,loading:!0}),computed:{achievementsURL(){return this.seeAllDisplay&&!this.loading?`${eXo.env.portal.context}/${eXo.env.portal.portalName}/contributions/achievements`:""}},methods:{updateDisplaySeeAll(t){this.seeAllDisplay=t}}},s,[],!1,null,null,null);a.options.__file="src/main/webapp/vue-app/myContributions/components/MyContributions.vue";const l={"my-contributions":a.exports,"user-points-widget":r};for(const t in l)Vue.component(t,l[t]);const c=eXo&&eXo.env&&eXo.env.portal&&eXo.env.portal.language||"en",p=`${eXo.env.portal.context}/${eXo.env.portal.rest}/i18n/bundle/locale.addon.Gamification-${c}.json`,d="myContributions";function f(){exoi18n.loadLanguageAsync(c,p).then((t=>{new Vue({template:`<my-contributions id="${d}" />`,i18n:t,vuetify:Vue.prototype.vuetifyOptions}).$mount(`#${d}`)}))}return e})()));