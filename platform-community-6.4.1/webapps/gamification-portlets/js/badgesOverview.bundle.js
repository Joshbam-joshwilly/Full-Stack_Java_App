define((()=>(()=>{"use strict";var e={d:(t,a)=>{for(var i in a)e.o(a,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:a[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{init:()=>w});var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{staticClass:"white",class:e.owner?"profileBadge":"profileBadgeOther",attrs:{id:"badgesOverview"}},[e.isOverviewDisplay?e._e():a("v-toolbar",{staticClass:"border-box-sizing",attrs:{id:"badgesOverviewHeader",color:"white",flat:"",height:e.isOverviewDisplay?"50":"64"}},[a("div",{staticClass:"text-header-title text-sub-title"},[e._v("\n      "+e._s(e.$t("exoplatform.gamification.badgesByDomain"))+"\n    ")])]),e._v(" "),a("v-card",{attrs:{flat:""}},[a("v-card-text",{staticClass:"d-flex flex-wrap justify-space-between",class:e.isOverviewDisplay?"my-auto pa-0":"pt-0"},[e.badges&&e.badges.length?e._l(e.badgesToDisplay,(function(e){return a("badges-overview-item",{key:e.id,attrs:{badge:e}})})):a("div",{staticClass:"d-flex justify-center",class:e.isOverviewDisplay?"my-auto":"py-4 mx-auto"},[a("span",{staticClass:"emptyBadgesIcon display-3 my-1"},[e._v("\n          Ã˜\n        ")])])],2)],1),e._v(" "),a("badges-overview-drawer")],1)};function i(e,t,a,i,r,s,n,o){var d,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=a,l._compiled=!0),i&&(l.functional=!0),s&&(l._scopeId="data-v-"+s),n?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},l._ssrRegister=d):r&&(d=o?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),d)if(l.functional){l._injectStyles=d;var c=l.render;l.render=function(e,t){return d.call(t),c(e,t)}}else{var v=l.beforeCreate;l.beforeCreate=v?[].concat(v,d):[d]}return{exports:e,options:l}}a._withStripped=!0;var r=i({props:{isOverviewDisplay:{type:Boolean,default:()=>!1}},computed:{badgesToDisplay(){return this.badges?.slice(0,3)}},data:()=>({badges:[]}),created(){this.refresh()},methods:{refresh(){return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/gamification/reputation/badges/${eXo.env.portal.profileOwnerIdentityId}`,{method:"GET",credentials:"include"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Response code indicates a server error",e)})).then((e=>(this.badges=e||[],document.dispatchEvent(new CustomEvent("badgesCount",{detail:this.badges.length})),this.badges.forEach((e=>{e.avatar=e.url,e.domainLabel=this.getLabel("exoplatform.gamification.gamificationinformation.domain",e.zone),e.badgeLabel=this.getLabel("exoplatform.gamification.gamificationinformation.domain",e.title)})),this.$nextTick()))).finally((()=>this.$root.$applicationLoaded()))},getLabel(e,t){const a=`${e}.${t}`,i=this.$t(a);return i===a&&t||i}}},a,[],!1,null,null,null);r.options.__file="src/main/webapp/vue-app/badgesOverview/components/BadgesOverview.vue";const s=r.exports;var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-card",e._g({staticClass:"flex-grow-1 mx-auto",attrs:{"min-width":"90px",width:"auto","max-width":"30%",flat:""}},i),[a("div",{staticClass:"px-1"},[a("v-avatar",{staticClass:"d-flex flex-column content-box-sizing clickable mx-auto",attrs:{height:"50",width:"auto",tile:""},on:{click:e.openDrawer}},[a("img",{attrs:{src:e.badge.avatar,alt:""}})]),e._v(" "),a("div",{staticClass:"d-block text-center mt-2 clickable text-truncate",on:{click:e.openDrawer}},[e._v("\n          "+e._s(e.badgeLabel)+"\n        ")])],1)])]}}])},[e._v(" "),a("span",[e._v(e._s(e.badgeLabel))])])};n._withStripped=!0;var o=i({props:{badge:{type:Object,default:()=>({})}},computed:{badgeLabel(){return this.badge?.badgeLabel}},methods:{openDrawer(){this.$root.$emit("open-badge-drawer",this.badge)}}},n,[],!1,null,null,null);o.options.__file="src/main/webapp/vue-app/badgesOverview/components/BadgesOverviewItem.vue";const d=o.exports;var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("exo-drawer",{ref:"badgesDrawer",staticClass:"badgesDrawer",attrs:{"body-classes":"hide-scroll decrease-z-index-more",right:""}},[a("template",{slot:"title"},[a("div",{staticClass:"d-flex width-fit-content"},[e._v("\n      "+e._s(e.$t("exoplatform.gamification.badgesByDomain"))+":\n      "),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("div",e._g({staticClass:"ms-1 text-truncate"},i),[e._v("\n            "+e._s(e.domainLabel)+"\n          ")])]}}])},[e._v(" "),a("span",[e._v(e._s(e.domainLabel))])])],1)]),e._v(" "),a("template",{slot:"content"},e._l(e.badges,(function(t){return a("badges-overview-drawer-item",{key:t.id,attrs:{badge:t,"current-score":e.badge&&e.badge.score}})})),1)],2)};l._withStripped=!0;var c=i({data:()=>({badge:null,badges:[]}),computed:{domainLabel(){return this.badge?.domainLabel}},created(){this.$root.$on("open-badge-drawer",(e=>{this.open(e)}))},methods:{open(e){return this.badge=e,this.$refs.badgesDrawer.startLoading(),fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/gamification/badges/all`,{method:"GET",credentials:"include"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Response code indicates a server error",e)})).then((e=>{let t=e||[];t=t.filter((e=>e.domainDTO?.title===this.badge.zone)),t.push({isCurrent:!0,neededScore:this.badge.score,avatar:`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/social/users/${eXo.env.portal.profileOwner}/avatar`}),t.sort(((e,t)=>t.neededScore-e.neededScore)),this.badges=t,this.$refs.badgesDrawer.open()})).finally((()=>{this.$refs.badgesDrawer.endLoading()}))}}},l,[],!1,null,null,null);c.options.__file="src/main/webapp/vue-app/badgesOverview/components/BadgesOverviewDrawer.vue";const v=c.exports;var p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-list-item",{staticClass:"pa-0 BadgeItem"},[a("v-list-item-action-text",{staticClass:"BadgeItemPoints",class:(e.isCurrent?"primary--text":!e.isAquired&&"text-sub-title")||"text-color"},[e._v("\n    "+e._s(e.score)+"\n    "+e._s(e.$t("exoplatform.gamification.gamificationinformation.Points"))+"\n  ")]),e._v(" "),a("v-list-item-avatar",{staticClass:"BadgeItemAvatarParent",attrs:{tile:""}},[a("v-list-item-avatar",{staticClass:"BadgeItemAvatar mx-2",class:e.isCurrent?"BadgeItemAvatarProfile":!e.isAquired&&"badgeNotAquired",attrs:{tile:!e.isCurrent}},[a("v-img",{attrs:{src:e.avatar}})],1)],1),e._v(" "),a("v-list-item-content",[e.title?a("v-list-item-title",{class:(e.isCurrent?"primary--text":!e.isAquired&&"text-sub-title")||"text-color"},[e._v("\n      "+e._s(e.title)+"\n    ")]):e._e(),e._v(" "),e.description?a("v-list-item-title",{staticClass:"caption text-sub-title",attrs:{title:e.description}},[e._v("\n      "+e._s(e.description)+"\n    ")]):e._e()],1)],1)};p._withStripped=!0;var u=i({props:{badge:{type:Object,default:()=>({})},currentScore:{type:Number,default:0}},computed:{isCurrent(){return this.badge.isCurrent},isAquired(){return this.isCurrent||this.currentScore>=this.badge.neededScore},avatar(){return this.badge.avatar||`${eXo.env.portal.context}/${eXo.env.portal.rest}/gamification/reputation/badge/${this.badge.iconFileId||this.badge.id}/avatar`},title(){return this.isCurrent?null:this.getLabel("badge.title",this.badge.title)},description(){return this.isCurrent?null:this.getDescription("badge.description",this.badge.title.replace(" ",""),this.badge.domain,this.badge.description)},score(){return this.badge.neededScore?this.badge.neededScore:this.currentScore}},methods:{getLabel(e,t){const a=`${e}.${t}`,i=this.$t(a);return i===a&&t||i},getDescription(e,t,a,i){const r=`${e}.${t}_${a}`,s=this.$t(r);return s===r&&i||s}}},p,[],!1,null,null,null);u.options.__file="src/main/webapp/vue-app/badgesOverview/components/BadgesOverviewDrawerItem.vue";const g={"badges-overview":s,"badges-overview-item":d,"badges-overview-drawer":v,"badges-overview-drawer-item":u.exports};for(const e in g)Vue.component(e,g[e]);if(extensionRegistry){const e=extensionRegistry.loadComponents("BadgesOverview");e&&e.length>0&&e.forEach((e=>{Vue.component(e.componentName,e.componentOptions)}))}Vue.use(Vuetify);const b=new Vuetify(eXo.env.portal.vuetifyPreset),m=eXo&&eXo.env&&eXo.env.portal&&eXo.env.portal.language||"en",f=`${eXo.env.portal.context}/${eXo.env.portal.rest}/i18n/bundle/locale.addon.Gamification-${m}.json`,h="badgesOverview",_=`${h}_${eXo.env.portal.profileOwnerIdentityId}`;function w(){const e=document.createElement("div");e.id=h,exoi18n.loadLanguageAsync(m,f).then((t=>{Vue.createApp({template:`<badges-overview id='${h}' v-cacheable="{cacheId: '${_}'}" />`,i18n:t,vuetify:b},e,"Badges Overview")}))}return t})()));