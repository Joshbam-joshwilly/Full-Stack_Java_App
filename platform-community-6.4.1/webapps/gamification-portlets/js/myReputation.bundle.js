define((()=>(()=>{"use strict";var e={d:(t,a)=>{for(var i in a)e.o(a,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:a[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{init:()=>w});var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("gamification-overview-widget",{attrs:{loading:e.loading},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("\n    "+e._s(e.$t("gamification.myReputation.title"))+"\n  ")]},proxy:!0},{key:"content",fn:function(){return[a("v-card",{attrs:{flat:"",height:"94"}},[a("gamification-overview-widget-row",{directives:[{name:"show",rawName:"v-show",value:e.kudosDisplayed&&!e.loading,expression:"kudosDisplayed && !loading"}],scopedSlots:e._u([{key:"title",fn:function(){return[e._v("\n          "+e._s(e.$t("gamification.myReputation.KudosTitle"))+"\n        ")]},proxy:!0},{key:"content",fn:function(){return[a("extension-registry-components",{staticClass:"d-flex flex-column mx-n4",attrs:{params:e.params,name:"my-reputation-overview-kudos",type:"my-reputation-item"}})]},proxy:!0}])}),e._v(" "),e.kudosDisplayed||e.loading?e._e():a("gamification-overview-widget-row",{attrs:{disabled:e.isExternal},scopedSlots:e._u([{key:"title",fn:function(){return[a("div",{staticClass:"mb-6"},[e._v("\n            "+e._s(e.$t("gamification.myReputation.KudosTitleNoData"))+"\n          ")])]},proxy:!0},{key:"icon",fn:function(){return[a("v-icon",{attrs:{color:"secondary",size:"55px"}},[e._v("fas fa-award")])]},proxy:!0},{key:"content",fn:function(){return[a("span",{domProps:{innerHTML:e._s(e.emptyKudosSummaryText)}})]},proxy:!0}],null,!1,3170417967)})],1),e._v(" "),a("gamification-overview-widget-row",{directives:[{name:"show",rawName:"v-show",value:e.badgesDisplayed&&!e.loading,expression:"badgesDisplayed && !loading"}],staticClass:"my-0",scopedSlots:e._u([{key:"title",fn:function(){return[a("div",{staticClass:"subtitle-2 align-self-start mt-10 mb-2 position-relative"},[e._v("\n          "+e._s(e.$t("gamification.myReputation.badgesTitle"))+"\n        ")])]},proxy:!0},{key:"content",fn:function(){return[a("extension-registry-components",{staticClass:"d-flex flex-column mx-n4",attrs:{params:e.params,name:"my-reputation-overview-badges",type:"my-reputation-item"}})]},proxy:!0}])}),e._v(" "),a("gamification-overview-widget-row",{directives:[{name:"show",rawName:"v-show",value:!e.badgesDisplayed&&!e.loading,expression:"!badgesDisplayed && !loading"}],staticClass:"my-auto",attrs:{disabled:""},scopedSlots:e._u([{key:"title",fn:function(){return[a("div",{staticClass:"mb-6 mt-3 position-relative"},[e._v("\n          "+e._s(e.$t("gamification.myReputation.badgesTitle"))+"\n        ")])]},proxy:!0},{key:"icon",fn:function(){return[a("v-icon",{attrs:{color:"secondary",size:"55px"}},[e._v("fas fa-graduation-cap")])]},proxy:!0},{key:"content",fn:function(){return[a("span",{domProps:{innerHTML:e._s(e.emptyBadgesSummaryText)}})]},proxy:!0}])})]},proxy:!0}])})};function i(e,t,a,i,n,o,s,r){var d,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=a,l._compiled=!0),i&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=d):n&&(d=r?function(){n.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:n),d)if(l.functional){l._injectStyles=d;var c=l.render;l.render=function(e,t){return d.call(t),c(e,t)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,d):[d]}return{exports:e,options:l}}a._withStripped=!0;var n=i({data:()=>({emptyKudosActionName:"gamification-myReputation-kudos-check-actions",receivedKudosCount:0,kudosDisplayed:!0,badgesDisplayed:!0,loadingKudos:!0,loadingBadges:!0}),computed:{params:()=>({isOverviewDisplay:!0}),loading(){return this.loadingBadges||this.loadingKudos},isExternal:()=>"true"===eXo.env.portal.isExternal,emptyKudosSummaryText(){return!this.isExternal&&this.$t("gamification.overview.reputationKudosSummary",{0:`<a class="primary--text font-weight-bold" href="javascript:void(0)" onclick="document.dispatchEvent(new CustomEvent('${this.emptyKudosActionName}'))">`,1:"</a>"})||this.$t("gamification.overview.reputationKudosSummaryForExternal")},emptyBadgesSummaryText(){return this.$t("gamification.overview.reputationBadgesSummary")},kudosData(){return this.sentKudosSize+this.receivedKudosSize>0}},created(){document.addEventListener(this.emptyKudosActionName,this.clickOnKudosEmptyActionLink),document.addEventListener("kudosCount",(e=>{e&&(this.kudosDisplayed=e.detail>0,this.$nextTick().then((()=>this.loadingKudos=!1)))})),document.addEventListener("badgesCount",(e=>{e&&(this.badgesDisplayed=e.detail>0,this.$nextTick().then((()=>this.loadingBadges=!1)))})),this.$root.$applicationLoaded()},beforeDestroy(){document.removeEventListener(this.emptyKudosActionName,this.clickOnKudosEmptyActionLink)},methods:{clickOnKudosEmptyActionLink(){window.location.href=`${eXo.env.portal.context}/${eXo.env.portal.portalName}/people`}}},a,[],!1,null,null,null);n.options.__file="src/main/webapp/vue-app/myReputation/components/MyReputation.vue";const o=n.exports;var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{staticClass:"white",class:e.owner?"profileBadge":"profileBadgeOther",attrs:{id:"badgesOverview"}},[e.isOverviewDisplay?e._e():a("v-toolbar",{staticClass:"border-box-sizing",attrs:{id:"badgesOverviewHeader",color:"white",flat:"",height:e.isOverviewDisplay?"50":"64"}},[a("div",{staticClass:"text-header-title text-sub-title"},[e._v("\n      "+e._s(e.$t("exoplatform.gamification.badgesByDomain"))+"\n    ")])]),e._v(" "),a("v-card",{attrs:{flat:""}},[a("v-card-text",{staticClass:"d-flex flex-wrap justify-space-between",class:e.isOverviewDisplay?"my-auto pa-0":"pt-0"},[e.badges&&e.badges.length?e._l(e.badgesToDisplay,(function(e){return a("badges-overview-item",{key:e.id,attrs:{badge:e}})})):a("div",{staticClass:"d-flex justify-center",class:e.isOverviewDisplay?"my-auto":"py-4 mx-auto"},[a("span",{staticClass:"emptyBadgesIcon display-3 my-1"},[e._v("\n          Ã˜\n        ")])])],2)],1),e._v(" "),a("badges-overview-drawer")],1)};s._withStripped=!0;var r=i({props:{isOverviewDisplay:{type:Boolean,default:()=>!1}},computed:{badgesToDisplay(){return this.badges?.slice(0,3)}},data:()=>({badges:[]}),created(){this.refresh()},methods:{refresh(){return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/gamification/reputation/badges/${eXo.env.portal.profileOwnerIdentityId}`,{method:"GET",credentials:"include"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Response code indicates a server error",e)})).then((e=>(this.badges=e||[],document.dispatchEvent(new CustomEvent("badgesCount",{detail:this.badges.length})),this.badges.forEach((e=>{e.avatar=e.url,e.domainLabel=this.getLabel("exoplatform.gamification.gamificationinformation.domain",e.zone),e.badgeLabel=this.getLabel("exoplatform.gamification.gamificationinformation.domain",e.title)})),this.$nextTick()))).finally((()=>this.$root.$applicationLoaded()))},getLabel(e,t){const a=`${e}.${t}`,i=this.$t(a);return i===a&&t||i}}},s,[],!1,null,null,null);r.options.__file="src/main/webapp/vue-app/badgesOverview/components/BadgesOverview.vue";const d=r.exports;var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-card",e._g({staticClass:"flex-grow-1 mx-auto",attrs:{"min-width":"90px",width:"auto","max-width":"30%",flat:""}},i),[a("div",{staticClass:"px-1"},[a("v-avatar",{staticClass:"d-flex flex-column content-box-sizing clickable mx-auto",attrs:{height:"50",width:"auto",tile:""},on:{click:e.openDrawer}},[a("img",{attrs:{src:e.badge.avatar,alt:""}})]),e._v(" "),a("div",{staticClass:"d-block text-center mt-2 clickable text-truncate",on:{click:e.openDrawer}},[e._v("\n          "+e._s(e.badgeLabel)+"\n        ")])],1)])]}}])},[e._v(" "),a("span",[e._v(e._s(e.badgeLabel))])])};l._withStripped=!0;var c=i({props:{badge:{type:Object,default:()=>({})}},computed:{badgeLabel(){return this.badge?.badgeLabel}},methods:{openDrawer(){this.$root.$emit("open-badge-drawer",this.badge)}}},l,[],!1,null,null,null);c.options.__file="src/main/webapp/vue-app/badgesOverview/components/BadgesOverviewItem.vue";const p=c.exports;var u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("exo-drawer",{ref:"badgesDrawer",staticClass:"badgesDrawer",attrs:{"body-classes":"hide-scroll decrease-z-index-more",right:""}},[a("template",{slot:"title"},[a("div",{staticClass:"d-flex width-fit-content"},[e._v("\n      "+e._s(e.$t("exoplatform.gamification.badgesByDomain"))+":\n      "),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("div",e._g({staticClass:"ms-1 text-truncate"},i),[e._v("\n            "+e._s(e.domainLabel)+"\n          ")])]}}])},[e._v(" "),a("span",[e._v(e._s(e.domainLabel))])])],1)]),e._v(" "),a("template",{slot:"content"},e._l(e.badges,(function(t){return a("badges-overview-drawer-item",{key:t.id,attrs:{badge:t,"current-score":e.badge&&e.badge.score}})})),1)],2)};u._withStripped=!0;var v=i({data:()=>({badge:null,badges:[]}),computed:{domainLabel(){return this.badge?.domainLabel}},created(){this.$root.$on("open-badge-drawer",(e=>{this.open(e)}))},methods:{open(e){return this.badge=e,this.$refs.badgesDrawer.startLoading(),fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/gamification/badges/all`,{method:"GET",credentials:"include"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Response code indicates a server error",e)})).then((e=>{let t=e||[];t=t.filter((e=>e.domainDTO?.title===this.badge.zone)),t.push({isCurrent:!0,neededScore:this.badge.score,avatar:`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/social/users/${eXo.env.portal.profileOwner}/avatar`}),t.sort(((e,t)=>t.neededScore-e.neededScore)),this.badges=t,this.$refs.badgesDrawer.open()})).finally((()=>{this.$refs.badgesDrawer.endLoading()}))}}},u,[],!1,null,null,null);v.options.__file="src/main/webapp/vue-app/badgesOverview/components/BadgesOverviewDrawer.vue";const m=v.exports;var g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-list-item",{staticClass:"pa-0 BadgeItem"},[a("v-list-item-action-text",{staticClass:"BadgeItemPoints",class:(e.isCurrent?"primary--text":!e.isAquired&&"text-sub-title")||"text-color"},[e._v("\n    "+e._s(e.score)+"\n    "+e._s(e.$t("exoplatform.gamification.gamificationinformation.Points"))+"\n  ")]),e._v(" "),a("v-list-item-avatar",{staticClass:"BadgeItemAvatarParent",attrs:{tile:""}},[a("v-list-item-avatar",{staticClass:"BadgeItemAvatar mx-2",class:e.isCurrent?"BadgeItemAvatarProfile":!e.isAquired&&"badgeNotAquired",attrs:{tile:!e.isCurrent}},[a("v-img",{attrs:{src:e.avatar}})],1)],1),e._v(" "),a("v-list-item-content",[e.title?a("v-list-item-title",{class:(e.isCurrent?"primary--text":!e.isAquired&&"text-sub-title")||"text-color"},[e._v("\n      "+e._s(e.title)+"\n    ")]):e._e(),e._v(" "),e.description?a("v-list-item-title",{staticClass:"caption text-sub-title",attrs:{title:e.description}},[e._v("\n      "+e._s(e.description)+"\n    ")]):e._e()],1)],1)};g._withStripped=!0;var f=i({props:{badge:{type:Object,default:()=>({})},currentScore:{type:Number,default:0}},computed:{isCurrent(){return this.badge.isCurrent},isAquired(){return this.isCurrent||this.currentScore>=this.badge.neededScore},avatar(){return this.badge.avatar||`${eXo.env.portal.context}/${eXo.env.portal.rest}/gamification/reputation/badge/${this.badge.iconFileId||this.badge.id}/avatar`},title(){return this.isCurrent?null:this.getLabel("badge.title",this.badge.title)},description(){return this.isCurrent?null:this.getDescription("badge.description",this.badge.title.replace(" ",""),this.badge.domain,this.badge.description)},score(){return this.badge.neededScore?this.badge.neededScore:this.currentScore}},methods:{getLabel(e,t){const a=`${e}.${t}`,i=this.$t(a);return i===a&&t||i},getDescription(e,t,a,i){const n=`${e}.${t}_${a}`,o=this.$t(n);return o===n&&i||o}}},g,[],!1,null,null,null);f.options.__file="src/main/webapp/vue-app/badgesOverview/components/BadgesOverviewDrawerItem.vue";const b={"my-reputation":o,"badges-overview":d,"badges-overview-item":p,"badges-overview-drawer":m,"badges-overview-drawer-item":f.exports};for(const e in b)Vue.component(e,b[e]);extensionRegistry.registerComponent("my-reputation-overview-badges","my-reputation-item",{id:"badges-reputation-overview",vueComponent:Vue.options.components["badges-overview"],rank:20});const h=eXo&&eXo.env&&eXo.env.portal&&eXo.env.portal.language||"en",y=`${eXo.env.portal.context}/${eXo.env.portal.rest}/i18n/bundle/locale.addon.Gamification-${h}.json`,_="myReputation";function w(){exoi18n.loadLanguageAsync(h,y).then((e=>{Vue.createApp({template:`<my-reputation id="${_}" />`,i18n:e,vuetify:Vue.prototype.vuetifyOptions},`#${_}`,"My Reputation")}))}return t})()));