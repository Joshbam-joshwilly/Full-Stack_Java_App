define((()=>(()=>{"use strict";var e={d:(t,r)=>{for(var i in r)e.o(r,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{init:()=>l});var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("gamification-overview-widget",{attrs:{"see-all-url":e.walletURL,loading:e.loading},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("\n      "+e._s(e.$t("gamification.overview.rewardsTitle"))+"\n    ")]},proxy:!0},e.loading?null:{key:"content",fn:function(){return[r("v-card",{attrs:{"min-height":"114","max-height":"114",flat:""}},[e.hasConfiguredWallet?r("div",{staticClass:"d-flex flex-grow-1"},[r("gamification-overview-widget-row",{staticClass:"col col-6 px-0",attrs:{"normal-height":""},scopedSlots:e._u([{key:"title",fn:function(){return[r("div",{staticClass:"d-flex"},[e._v("\n                "+e._s(e.$t("gamification.overview.rewards.earningsTitle"))+"\n                "),r("v-tooltip",{attrs:{"z-index":"4","max-width":"300px",bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,a=t.attrs;return[r("v-icon",e._g(e._b({staticClass:"primary--text mx-2",attrs:{size:"18"}},"v-icon",a,!1),i),[e._v("\n                      fas fa-info-circle\n                    ")])]}}],null,!1,4123062273)},[e._v(" "),r("span",[e._v(e._s(e.$t("gamification.overview.rewards.earningsTooltip")))])])],1)]},proxy:!0},{key:"content",fn:function(){return[r("extension-registry-components",{staticClass:"d-flex flex-row mt-4",attrs:{params:e.params,name:"my-rewards-overview",type:"my-rewards-item"}})]},proxy:!0}],null,!1,2446787904)}),e._v(" "),r("gamification-overview-widget-row",{staticClass:"col col-6 px-0",attrs:{"normal-height":""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("\n              "+e._s(e.$t("gamification.overview.rewards.walletTitle"))+"\n            ")]},proxy:!0},{key:"content",fn:function(){return[r("extension-registry-components",{staticClass:"d-flex flex-row mt-4",attrs:{params:e.params,name:"my-rewards-wallet-overview",type:"my-rewards-wallet-item"}})]},proxy:!0}],null,!1,1298116975)})],1):r("gamification-overview-widget-row",{staticClass:"flex-grow-1",scopedSlots:e._u([{key:"title",fn:function(){return[r("div",{staticClass:"mb-6"},[e._v("\n              "+e._s(e.$t("gamification.overview.rewards.walletTitle"))+"\n            ")])]},proxy:!0},{key:"icon",fn:function(){return[r("v-icon",{staticClass:"secondary--text",attrs:{size:"55"}},[e._v("fas fa-wallet")])]},proxy:!0},{key:"content",fn:function(){return[r("span",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:e.emptyWalletSummaryText,expression:"emptyWalletSummaryText"}]})]},proxy:!0}],null,!1,1684924918)})],1),e._v(" "),r("gamification-overview-widget-row",{staticClass:"mt-5 fill-height d-flex flex-column flex-grow-1",scopedSlots:e._u([{key:"title",fn:function(){return[r("div",{staticClass:"d-flex mb-n1"},[e._v("\n            "+e._s(e.$t("gamification.overview.rewardsPerkstoreSubtitle"))+"\n            "),e.productsLoaded&&e.hasConfiguredWallet?r("div",{staticClass:"ms-auto"},[r("a",{attrs:{href:e.perkstoreLink}},[r("span",{staticClass:"text-font-size primary--text my-0"},[e._v(e._s(e.$t("overview.myContributions.seeAll")))])])]):e._e()])]},proxy:!0},e.displayPerkstorePlaceholder?{key:"icon",fn:function(){return[r("v-icon",{attrs:{color:"secondary",size:"55px"}},[e._v("fas fa-shopping-cart")])]},proxy:!0}:null,e.loading?null:{key:"content",fn:function(){return[e.displayPerkstorePlaceholder?r("span",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:e.emptyPerkstoreSummaryText,expression:"emptyPerkstoreSummaryText"}]}):e._e(),e._v(" "),e.hasConfiguredWallet?r("extension-registry-components",{attrs:{name:"my-rewards-perkstore-overview",type:"my-rewards-perkstore-item"}}):e._e()]},proxy:!0}],null,!0)})]},proxy:!0}],null,!0)}),e._v(" "),r("div",{attrs:{id:"WalletAPIApp"}})],1)};r._withStripped=!0;var i=function(e,t,r,i,a,n,o,s){var l,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=[],d._compiled=!0),l)if(d.functional){d._injectStyles=l;var c=d.render;d.render=function(e,t){return l.call(t),c(e,t)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:d}}({data:()=>({walletLink:`${eXo.env.portal.context}/${eXo.env.portal.portalName}/wallet`,perkstoreLink:`${eXo.env.portal.context}/${eXo.env.portal.portalName}/perkstore`,emptyPerkstoreActionName:"gamification-perk-store-check-actions",loading:!0,hasConfiguredWallet:!1,productsLoaded:!1}),computed:{displayPerkstorePlaceholder(){return!(this.loading||this.hasConfiguredWallet&&this.productsLoaded)},emptyWalletSummaryText(){return this.$t("gamification.overview.rewardsWalletSummary",{0:`<a class="primary--text font-weight-bold" href="${this.walletLink}">`,1:"</a>"})},emptyPerkstoreSummaryText(){const e=this.hasConfiguredWallet?"gamification.overview.rewardsPerkstoreNoProductsSummary":"gamification.overview.rewardsPerkstoreSummary",t=this.hasConfiguredWallet&&this.perkstoreLink||this.walletLink;return this.$t(e,{0:`<a class="primary--text font-weight-bold" href="${t}">`,1:"</a>"})},params:()=>({isOverviewDisplay:!0}),walletURL(){return this.hasConfiguredWallet&&this.walletLink||null}},created(){document.addEventListener("exo-wallet-api-initialized",this.init),document.addEventListener("exo-wallet-settings-loaded",this.checkUserWalletStatus),document.addEventListener("perk-store-products-loaded",this.handleProductsLoaded)},mounted(){this.init()},beforeDestroy(){document.removeEventListener("exo-wallet-api-initialized",this.init),document.removeEventListener("exo-wallet-settings-loaded",this.checkUserWalletStatus),document.removeEventListener("perk-store-products-loaded",this.handleProductsLoaded)},methods:{handleProductsLoaded(){this.productsLoaded=!0},init(){window.walletAPIInitialized||window.require(["SHARED/WalletAPIBundle"],(()=>{document.dispatchEvent(new CustomEvent("exo-wallet-init"))}))},checkUserWalletStatus(){this.hasConfiguredWallet=!!window?.walletSettings?.wallet.address,this.loading=!1}}},r);i.options.__file="src/main/webapp/vue-app/myRewards/components/RewardsOverview.vue";const a={"gamification-overview-rewards":i.exports};for(const e in a)Vue.component(e,a[e]);const n=eXo&&eXo.env&&eXo.env.portal&&eXo.env.portal.language||"en",o=[`${eXo.env.portal.context}/${eXo.env.portal.rest}/i18n/bundle/locale.addon.Gamification-${n}.json`,`${eXo.env.portal.context}/${eXo.env.portal.rest}/i18n/bundle/locale.portlet.Challenges-${n}.json`],s="myRewards";function l(){exoi18n.loadLanguageAsync(n,o).then((e=>{Vue.createApp({template:`<gamification-overview-rewards id="${s}" />`,i18n:e,vuetify:Vue.prototype.vuetifyOptions},`#${s}`,"My Rewards")})),Object.keys(window.requirejs.s.contexts._.registry).filter((e=>e.includes("WalletAPIBundle")||e.includes("PerkStoreOverviewAPI"))).forEach((e=>{window.require([e],(e=>e.init()))}))}return t})()));