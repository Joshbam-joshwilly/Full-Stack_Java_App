define((()=>(()=>{"use strict";var e={r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t);var n=function(){var e=this,t=e._self._c;return t("ul",e._l(e.childrenPages,(function(n){return t("li",{key:n.name},[t("a",{attrs:{href:e.getChildrenPagePath(n)}},[e._v("\n      "+e._s(n.name)+"\n    ")])])})),0)};n._withStripped=!0;function o(e,t,n,o,r,a,s,i){var l,p="function"==typeof e?e.options:e;if(t&&(p.render=t,p.staticRenderFns=n,p._compiled=!0),o&&(p.functional=!0),a&&(p._scopeId="data-v-"+a),s?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},p._ssrRegister=l):r&&(l=i?function(){r.call(this,(p.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(p.functional){p._injectStyles=l;var d=p.render;p.render=function(e,t){return l.call(t),d(e,t)}}else{var c=p.beforeCreate;p.beforeCreate=c?[].concat(c,l):[l]}return{exports:e,options:p}}const r=o({props:{depth:{type:Number,default:1}},data:function(){return{childrenPages:[]}},created(){this.getChildrenPages()},methods:{getChildrenPages(){if("#AddPage"===window.location.hash)return[];let e="WikiHome";eXo.env.server.portalBaseURL.endsWith(`/${eXo.env.portal.selectedNodeUri}`)||(e=eXo.env.server.portalBaseURL.substr(eXo.env.server.portalBaseURL.lastIndexOf("/")+1));let t=`/${eXo.env.portal.containerName}/${eXo.env.portal.rest}/wiki/tree/CHILDREN?path=`;eXo.env.portal.spaceName?t+=`group/spaces/${eXo.env.portal.spaceGroup}/${e}&depth=${this.depth}`:eXo.env.server.portalBaseURL.includes("/wiki/user/")?t+=`user/${eXo.env.portal.userName}/${e}&depth=${this.depth}`:t+=`portal/global/${e}&depth=${this.depth}`,fetch(t,{credentials:"include"}).then((e=>e.json())).then((e=>{e&&e.jsonList&&(this.childrenPages=e.jsonList)}))},getChildrenPagePath(e){if(e&&e.path){const t=e.path.lastIndexOf("%2F"),n=e.path.substring(t+"%2F".length);if(n){let e=window.location.pathname;const t=e.indexOf("/wiki/"),o=e.indexOf("/WikiPortlet/");return-1!==t?e=e.substring(0,t+"/wiki".length):-1!==o?e=e.substring(0,o+"/WikiPortlet".length):e+="/WikiPortlet",e+=`/${n}`}}return"#"}}},n,[],!1,null,null,null).exports;var a=function(){var e=this;return(0,e._self._c)("div",{staticClass:"wiki-include-page",domProps:{innerHTML:e._s(e.pageContent)}})};a._withStripped=!0;const s=o({props:{pageName:{type:String,default:()=>""}},data:()=>({pageContent:""}),mounted(){this.getPageContent()},methods:{getPageContent(){if(this.pageName){this.pageName=this.pageName.replace(/[&/\\#[\]+%@|'`"^:;*?=<>{}\s]+/g,"_");const e=this;let t=`/${eXo.env.portal.containerName}/${eXo.env.portal.rest}/wiki`;eXo.env.portal.spaceId?t+=`/group/spaces/spaces/${eXo.env.portal.spaceGroup}/pages/${this.pageName}`:eXo.env.server.portalBaseURL.includes("/wiki/user/")?t+=`/user/spaces/${eXo.env.portal.userName}/pages/${this.pageName}`:t+=`/portal/spaces/global/pages/${this.pageName}`,fetch(t).then((e=>e.text())).then((e=>(new window.DOMParser).parseFromString(e,"text/xml"))).then((e=>e.documentElement.getElementsByTagName("content")[0].childNodes[0].nodeValue)).then((t=>e.pageContent=t)).catch((t=>console.error(`Error while fetching content of page ${e.pageName}`,t)))}}}},a,[],!1,null,null,null).exports;return Vue.component("exo-wiki-children-pages",r),Vue.customElement("exo-wiki-children-pages",r),Vue.component("exo-wiki-include-page",s),Vue.customElement("exo-wiki-include-page",s),t})()));